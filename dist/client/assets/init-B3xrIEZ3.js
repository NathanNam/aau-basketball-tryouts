import{g as ni,a as hu}from"./main-CHgcn4R6.js";var ut={},Re={};const Te={},si=Object.freeze(Object.defineProperty({__proto__:null,default:Te},Symbol.toStringTag,{value:"Module"})),ke=ni(si);var De={},Ve={},Xs;function fs(){if(Xs)return Ve;Xs=1;var e=Ve&&Ve.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.createID=n;const t=e(ke);function n(s="",r=16){const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=t.default.randomBytes(r),o=Array.from(i,l=>a[l%a.length]).join("");return s?`${s}-${o}`:o}return Ve}var vt={},Js;function Es(){if(Js)return vt;Js=1,Object.defineProperty(vt,"__esModule",{value:!0});const e={INFO:"\x1B[36m",WARN:"\x1B[33m",ERROR:"\x1B[31m",DEBUG:"\x1B[35m"},t="\x1B[32m",n="\x1B[0m";function s(a,i,o){const l=new Date().toISOString(),d=e[a]??"",T=`${`[${l}] [PID: ${process.pid}] ${t}[NODE-CRON]${t} ${d}[${a}]${n}`} ${i}`;switch(a){case"ERROR":console.error(T,o??"");break;case"DEBUG":console.debug(T,o??"");break;case"WARN":console.warn(T);break;case"INFO":default:console.info(T);break}}const r={info(a){s("INFO",a)},warn(a){s("WARN",a)},error(a,i){a instanceof Error?s("ERROR",a.message,a):s("ERROR",a,i)},debug(a,i){a instanceof Error?s("DEBUG",a.message,a):s("DEBUG",a,i)}};return vt.default=r,vt}var at={},Zs;function ri(){if(Zs)return at;Zs=1,Object.defineProperty(at,"__esModule",{value:!0}),at.TrackedPromise=void 0;class e{promise;error;state;value;constructor(n){this.state="pending",this.promise=new Promise((s,r)=>{n(a=>{this.state="fulfilled",this.value=a,s(a)},a=>{this.state="rejected",this.error=a,r(a)})})}getPromise(){return this.promise}getState(){return this.state}isPending(){return this.state==="pending"}isFulfilled(){return this.state==="fulfilled"}isRejected(){return this.state==="rejected"}getValue(){return this.value}getError(){return this.error}then(n,s){return this.promise.then(n,s)}catch(n){return this.promise.catch(n)}finally(n){return this.promise.finally(n)}}return at.TrackedPromise=e,at}var er;function ui(){if(er)return De;er=1;var e=De&&De.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(De,"__esModule",{value:!0}),De.Runner=void 0;const t=fs(),n=e(Es()),s=ri();function r(){}function a(){return!0}function i(T,p){n.default.error("Task failed with error!",p)}class o{timeMatcher;onMatch;noOverlap;maxExecutions;maxRandomDelay;runCount;running;heartBeatTimeout;onMissedExecution;onOverlap;onError;beforeRun;onFinished;onMaxExecutions;constructor(p,_,m){this.timeMatcher=p,this.onMatch=_,this.noOverlap=m==null||m.noOverlap===void 0?!1:m.noOverlap,this.maxExecutions=m?.maxExecutions,this.maxRandomDelay=m?.maxRandomDelay||0,this.onMissedExecution=m?.onMissedExecution||r,this.onOverlap=m?.onOverlap||r,this.onError=m?.onError||i,this.onFinished=m?.onFinished||a,this.beforeRun=m?.beforeRun||a,this.onMaxExecutions=m?.onMaxExecutions||r,this.runCount=0,this.running=!1}start(){this.running=!0;let p,_;const m=D=>{this.running&&(clearTimeout(this.heartBeatTimeout),this.heartBeatTimeout=setTimeout(R,d(this.timeMatcher,D)))},g=D=>new Promise(async M=>{const k={id:(0,t.createID)("exec"),reason:"scheduled"},H=await this.beforeRun(D,k),V=Math.floor(Math.random()*this.maxRandomDelay);H&&setTimeout(async()=>{try{this.runCount++,k.startedAt=new Date;const j=await this.onMatch(D,k);k.finishedAt=new Date,k.result=j,this.onFinished(D,k),this.maxExecutions&&this.runCount>=this.maxExecutions&&(this.onMaxExecutions(D),this.stop())}catch(j){k.finishedAt=new Date,k.error=j,this.onError(D,j,k)}M(!0)},V)}),S=D=>new s.TrackedPromise(async(M,k)=>{try{this.timeMatcher.match(D)&&await g(D),M(!0)}catch(H){k(H)}}),R=async()=>{const D=f();if(_&&_.getTime()<D.getTime())for(;_.getTime()<D.getTime();)n.default.warn(`missed execution at ${_}! Possible blocking IO or high CPU user at the same process used by node-cron.`),_=this.timeMatcher.getNextMatch(_),l(this.onMissedExecution,_,i);if(p&&p.getState()==="pending"&&(l(this.onOverlap,D,i),this.noOverlap)){n.default.warn("task still running, new execution blocked by overlap prevention!"),_=this.timeMatcher.getNextMatch(D),m(D);return}p=S(D),_=this.timeMatcher.getNextMatch(D),m(D)};this.heartBeatTimeout=setTimeout(()=>{R()},d(this.timeMatcher,f()))}nextRun(){return this.timeMatcher.getNextMatch(new Date)}stop(){this.running=!1,this.heartBeatTimeout&&(clearTimeout(this.heartBeatTimeout),this.heartBeatTimeout=void 0)}isStarted(){return!!this.heartBeatTimeout&&this.running}isStopped(){return!this.isStarted()}async execute(){const p=new Date,_={id:(0,t.createID)("exec"),reason:"invoked"};try{if(await this.beforeRun(p,_)){this.runCount++,_.startedAt=new Date;const g=await this.onMatch(p,_);_.finishedAt=new Date,_.result=g,this.onFinished(p,_)}}catch(m){_.finishedAt=new Date,_.error=m,this.onError(p,m,_)}}}De.Runner=o;async function l(T,p,_){try{await T(p)}catch(m){_(p,m)}}function d(T,p){const m=T.getNextMatch(p),g=new Date,S=m.getTime()-g.getTime();return S>864e5?864e5:Math.max(0,S)}function f(){const T=new Date;return T.setMilliseconds(0),T}return De}var Le={},je={},Ht={},tr;function ai(){return tr||(tr=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.default=(()=>{const e=["january","february","march","april","may","june","july","august","september","october","november","december"],t=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"];function n(r,a){for(let i=0;i<a.length;i++)r=r.replace(new RegExp(a[i],"gi"),i+1);return r}function s(r){return r=n(r,e),r=n(r,t),r}return s})()),Ht}var qt={},nr;function ms(){return nr||(nr=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.default=(()=>{const e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],t=["sun","mon","tue","wed","thu","fri","sat"];function n(r,a){for(let i=0;i<a.length;i++)r=r.replace(new RegExp(a[i],"gi"),i);return r}function s(r){return r=r.replace("7","0"),r=n(r,e),n(r,t)}return s})()),qt}var Yt={},sr;function ii(){return sr||(sr=1,Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.default=(()=>{function e(n,s){return n.indexOf("*")!==-1?n.replace("*",s):n}function t(n){return n[0]=e(n[0],"0-59"),n[1]=e(n[1],"0-59"),n[2]=e(n[2],"0-23"),n[3]=e(n[3],"1-31"),n[4]=e(n[4],"1-12"),n[5]=e(n[5],"0-6"),n}return t})()),Yt}var Wt={},rr;function oi(){return rr||(rr=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.default=(()=>{function e(s,r,a,i,o){const l=parseInt(o),d=[];let f=parseInt(i),T=parseInt(a);T>f&&(f=parseInt(a),T=parseInt(i));for(let p=T;p<=f;p+=l)d.push(p);return s.replace(new RegExp(r,"i"),d.join())}function t(s){const r=/(\d+)-(\d+)(\/(\d+)|)/;let a=r.exec(s);for(;a!==null&&a.length>0;)s=e(s,a[0],a[1],a[2],a[4]||"1"),a=r.exec(s);return s}function n(s){for(let r=0;r<s.length;r++)s[r]=t(s[r]);return s}return n})()),Wt}var ur;function Ts(){if(ur)return je;ur=1;var e=je&&je.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(je,"__esModule",{value:!0});const t=e(ai()),n=e(ms()),s=e(ii()),r=e(oi());return je.default=(()=>{function a(d){return d.length===5?["0"].concat(d):d}function i(d){return d.replace(/\s{2,}/g," ").trim()}function o(d){for(let f=0;f<d.length;f++){const T=d[f].split(",");for(let p=0;p<T.length;p++)T[p]=parseInt(T[p]);d[f]=T}return d}function l(d){let f=i(`${d}`).split(" ");return f=a(f),f[4]=(0,t.default)(f[4]),f[5]=(0,n.default)(f[5]),f=(0,s.default)(f),f=(0,r.default)(f),f=o(f),f}return l})(),je}var it={},ar;function En(){if(ar)return it;ar=1,Object.defineProperty(it,"__esModule",{value:!0}),it.LocalizedTime=void 0;class e{timestamp;parts;timezone;constructor(r,a){this.timestamp=r.getTime(),this.timezone=a,this.parts=t(r,a)}toDate(){return new Date(this.timestamp)}toISO(){const r=this.parts.gmt.replace(/^GMT/,""),a=r||"Z",i=o=>String(o).padStart(2,"0");return`${this.parts.year}-${i(this.parts.month)}-${i(this.parts.day)}T${i(this.parts.hour)}:${i(this.parts.minute)}:${i(this.parts.second)}.${String(this.parts.milisecond).padStart(3,"0")}`+a}getParts(){return this.parts}set(r,a){this.parts[r]=a;const i=new Date(this.toISO());this.timestamp=i.getTime(),this.parts=t(i,this.timezone)}}it.LocalizedTime=e;function t(s,r){const a={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",weekday:"short",hour12:!1};r&&(a.timeZone=r);const o=new Intl.DateTimeFormat("en-US",a).formatToParts(s).filter(l=>l.type!=="literal").reduce((l,d)=>(l[d.type]=d.value,l),{});return{day:parseInt(o.day),month:parseInt(o.month),year:parseInt(o.year),hour:o.hour==="24"?0:parseInt(o.hour),minute:parseInt(o.minute),second:parseInt(o.second),milisecond:s.getMilliseconds(),weekday:o.weekday,gmt:n(s,r)}}function n(s,r){const a=new Date(s.toLocaleString("en-US",{timeZone:"UTC"})),i=new Date(s.toLocaleString("en-US",{timeZone:r}));let o=(a.getTime()-i.getTime())/6e4;const l=o<=0?"+":"-";if(o=Math.abs(o),o===0)return"Z";const d=Math.floor(o/60).toString().padStart(2,"0"),f=Math.floor(o%60).toString().padStart(2,"0");return`GMT${l}${d}:${f}`}return it}var xe={},ir;function ci(){if(ir)return xe;ir=1;var e=xe&&xe.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(xe,"__esModule",{value:!0}),xe.MatcherWalker=void 0;const t=e(Ts()),n=En(),s=bs(),r=e(ms());class a{cronExpression;baseDate;pattern;expressions;timeMatcher;timezone;constructor(l,d,f){this.cronExpression=l,this.baseDate=d,this.timeMatcher=new s.TimeMatcher(l,f),this.timezone=f,this.expressions=(0,t.default)(l)}isMatching(){return this.timeMatcher.match(this.baseDate)}matchNext(){const d=(()=>{const p=new Date(this.baseDate.getTime());p.setMilliseconds(0);const _=new n.LocalizedTime(p,this.timezone),m=_.getParts(),g=new n.LocalizedTime(_.toDate(),this.timezone),S=this.expressions[0],R=i(S,m.second);if(R&&(g.set("second",R),this.timeMatcher.match(g.toDate())))return g;g.set("second",S[0]);const D=this.expressions[1],M=i(D,m.minute);if(M&&(g.set("minute",M),this.timeMatcher.match(g.toDate())))return g;g.set("minute",D[0]);const k=this.expressions[2],H=i(k,m.hour);if(H&&(g.set("hour",H),this.timeMatcher.match(g.toDate())))return g;g.set("hour",k[0]);const V=this.expressions[3],j=i(V,m.day);if(j&&(g.set("day",j),this.timeMatcher.match(g.toDate())))return g;g.set("day",V[0]);const Ye=this.expressions[4],Ce=i(Ye,m.month);return Ce&&(g.set("month",Ce),this.timeMatcher.match(g.toDate()))||(g.set("year",g.getParts().year+1),g.set("month",Ye[0])),g})(),f=this.expressions[5];let T=parseInt((0,r.default)(d.getParts().weekday));for(;!(f.indexOf(T)>-1);)d.set("year",d.getParts().year+1),T=parseInt((0,r.default)(d.getParts().weekday));return d}}xe.MatcherWalker=a;function i(o,l){const d=o.sort((f,T)=>f-T).filter(f=>f>l);return d.length>0?d[0]:!1}return xe}var or;function bs(){if(or)return Le;or=1;var e=Le&&Le.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(Le,"__esModule",{value:!0}),Le.TimeMatcher=void 0;const t=e(Ts()),n=e(ms()),s=En(),r=ci();function a(o,l){return o.indexOf(l)!==-1}class i{timezone;pattern;expressions;constructor(l,d){this.timezone=d,this.pattern=l,this.expressions=(0,t.default)(l)}match(l){const f=new s.LocalizedTime(l,this.timezone).getParts(),T=a(this.expressions[0],f.second),p=a(this.expressions[1],f.minute),_=a(this.expressions[2],f.hour),m=a(this.expressions[3],f.day),g=a(this.expressions[4],f.month),S=a(this.expressions[5],parseInt((0,n.default)(f.weekday)));return T&&p&&_&&m&&g&&S}getNextMatch(l){return new r.MatcherWalker(this.pattern,l,this.timezone).matchNext().toDate()}}return Le.TimeMatcher=i,Le}var ot={},cr;function fu(){if(cr)return ot;cr=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.StateMachine=void 0;const e={stopped:["stopped","idle","destroyed"],idle:["idle","running","stopped","destroyed"],running:["running","idle","stopped","destroyed"],destroyed:["destroyed"]};class t{state;constructor(s="stopped"){this.state=s}changeState(s){if(e[this.state].includes(s))this.state=s;else throw new Error(`invalid transition from ${this.state} to ${s}`)}}return ot.StateMachine=t,ot}var lr;function li(){if(lr)return Re;lr=1;var e=Re&&Re.__importDefault||function(f){return f&&f.__esModule?f:{default:f}};Object.defineProperty(Re,"__esModule",{value:!0}),Re.InlineScheduledTask=void 0;const t=e(ke),n=ui(),s=bs(),r=fs(),a=fu(),i=e(Es()),o=En();class l extends t.default{}class d{emitter;cronExpression;timeMatcher;runner;id;name;stateMachine;timezone;constructor(T,p,_){this.emitter=new l,this.cronExpression=T,this.id=(0,r.createID)("task",12),this.name=_?.name||this.id,this.timezone=_?.timezone,this.timeMatcher=new s.TimeMatcher(T,_?.timezone),this.stateMachine=new a.StateMachine;const m={timezone:_?.timezone,noOverlap:_?.noOverlap,maxExecutions:_?.maxExecutions,maxRandomDelay:_?.maxRandomDelay,beforeRun:(g,S)=>(S.reason==="scheduled"&&this.changeState("running"),this.emitter.emit("execution:started",this.createContext(g,S)),!0),onFinished:(g,S)=>(S.reason==="scheduled"&&this.changeState("idle"),this.emitter.emit("execution:finished",this.createContext(g,S)),!0),onError:(g,S,R)=>{i.default.error(S),this.emitter.emit("execution:failed",this.createContext(g,R)),this.changeState("idle")},onOverlap:g=>{this.emitter.emit("execution:overlap",this.createContext(g))},onMissedExecution:g=>{this.emitter.emit("execution:missed",this.createContext(g))},onMaxExecutions:g=>{this.emitter.emit("execution:maxReached",this.createContext(g)),this.destroy()}};this.runner=new n.Runner(this.timeMatcher,(g,S)=>p(this.createContext(g,S)),m)}getNextRun(){return this.stateMachine.state!=="stopped"?this.runner.nextRun():null}changeState(T){this.runner.isStarted()&&this.stateMachine.changeState(T)}start(){this.runner.isStopped()&&(this.runner.start(),this.stateMachine.changeState("idle"),this.emitter.emit("task:started",this.createContext(new Date)))}stop(){this.runner.isStarted()&&(this.runner.stop(),this.stateMachine.changeState("stopped"),this.emitter.emit("task:stopped",this.createContext(new Date)))}getStatus(){return this.stateMachine.state}destroy(){this.stateMachine.state!=="destroyed"&&(this.stop(),this.stateMachine.changeState("destroyed"),this.emitter.emit("task:destroyed",this.createContext(new Date)))}execute(){return new Promise((T,p)=>{const _=g=>{this.off("execution:finished",_),p(g.execution?.error)},m=g=>{this.off("execution:failed",_),T(g.execution?.result)};this.once("execution:finished",m),this.once("execution:failed",_),this.runner.execute()})}on(T,p){this.emitter.on(T,p)}off(T,p){this.emitter.off(T,p)}once(T,p){this.emitter.once(T,p)}createContext(T,p){const _=new o.LocalizedTime(T,this.timezone);return{date:_.toDate(),dateLocalIso:_.toISO(),triggeredAt:new Date,task:this,execution:p}}}return Re.InlineScheduledTask=d,Re}var ct={},dr;function di(){if(dr)return ct;dr=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.TaskRegistry=void 0;const e=new Map;class t{add(s){if(this.has(s.id))throw Error(`task ${s.id} already registred!`);e.set(s.id,s),s.on("task:destroyed",()=>{this.remove(s)})}get(s){return e.get(s)}remove(s){this.has(s.id)&&(s?.destroy(),e.delete(s.id))}all(){return e}has(s){return e.has(s)}killAll(){e.forEach(s=>this.remove(s))}}return ct.TaskRegistry=t,ct}var Ge={},hr;function hi(){if(hr)return Ge;hr=1;var e=Ge&&Ge.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(Ge,"__esModule",{value:!0});const t=e(Ts()),n=/^(?:\d+|\*|\*\/\d+)$/;function s(p,_,m){const g=p;for(const S of g){const R=parseInt(S,10);if(!Number.isNaN(R)&&(R<_||R>m)||!n.test(S))return!1}return!0}function r(p){return!s(p,0,59)}function a(p){return!s(p,0,59)}function i(p){return!s(p,0,23)}function o(p){return!s(p,1,31)}function l(p){return!s(p,1,12)}function d(p){return!s(p,0,7)}function f(p,_){if(r(_[0]))throw new Error(`${p[0]} is a invalid expression for second`);if(a(_[1]))throw new Error(`${p[1]} is a invalid expression for minute`);if(i(_[2]))throw new Error(`${p[2]} is a invalid expression for hour`);if(o(_[3]))throw new Error(`${p[3]} is a invalid expression for day of month`);if(l(_[4]))throw new Error(`${p[4]} is a invalid expression for month`);if(d(_[5]))throw new Error(`${p[5]} is a invalid expression for week day`)}function T(p){if(typeof p!="string")throw new TypeError("pattern must be a string!");const _=p.split(" "),m=(0,t.default)(p);_.length===5&&_.unshift("0"),f(_,m)}return Ge.default=T,Ge}var $e={},fr;function fi(){if(fr)return $e;fr=1;var e=$e&&$e.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty($e,"__esModule",{value:!0});const t=ke,n=ke,s=fs(),r=ke,a=fu(),i=En(),o=e(Es()),l=bs(),d=(0,t.resolve)(__dirname,"daemon.js");class f extends r.EventEmitter{}class T{emitter;id;name;cronExpression;taskPath;options;forkProcess;stateMachine;constructor(m,g,S){this.cronExpression=m,this.taskPath=g,this.options=S,this.id=(0,s.createID)("task"),this.name=S?.name||this.id,this.emitter=new f,this.stateMachine=new a.StateMachine("stopped"),this.on("task:stopped",()=>{this.forkProcess?.kill(),this.forkProcess=void 0,this.stateMachine.changeState("stopped")}),this.on("task:destroyed",()=>{this.forkProcess?.kill(),this.forkProcess=void 0,this.stateMachine.changeState("destroyed")})}getNextRun(){return this.stateMachine.state!=="stopped"?new l.TimeMatcher(this.cronExpression,this.options?.timezone).getNextMatch(new Date):null}start(){return new Promise((m,g)=>{if(this.forkProcess)return m(void 0);const S=setTimeout(()=>{g(new Error("Start operation timed out"))},5e3);try{this.forkProcess=(0,n.fork)(d),this.forkProcess.on("error",R=>{clearTimeout(S),g(new Error(`Error on daemon: ${R.message}`))}),this.forkProcess.on("exit",(R,D)=>{if(R!==0&&D!=="SIGTERM"){const M=new Error(`node-cron daemon exited with code ${R||D}`);o.default.error(M),clearTimeout(S),g(M)}}),this.forkProcess.on("message",R=>{if(R.jsonError&&R.context?.execution&&(R.context.execution.error=p(R.jsonError),delete R.jsonError),R.context?.task?.state&&this.stateMachine.changeState(R.context?.task?.state),R.context){const D=R.context?.execution;delete D?.hasError;const M=this.createContext(new Date(R.context.date),D);this.emitter.emit(R.event,M)}}),this.once("task:started",()=>{this.stateMachine.changeState("idle"),clearTimeout(S),m(void 0)}),this.forkProcess.send({command:"task:start",path:this.taskPath,cron:this.cronExpression,options:this.options})}catch(R){g(R)}})}stop(){return new Promise((m,g)=>{if(!this.forkProcess)return m(void 0);const S=setTimeout(()=>{clearTimeout(S),g(new Error("Stop operation timed out"))},5e3),R=()=>{clearTimeout(S),this.off("task:stopped",D),this.forkProcess=void 0,m(void 0)},D=()=>{R()};this.once("task:stopped",D),this.forkProcess.send({command:"task:stop"})})}getStatus(){return this.stateMachine.state}destroy(){return new Promise((m,g)=>{if(!this.forkProcess)return m(void 0);const S=setTimeout(()=>{clearTimeout(S),g(new Error("Destroy operation timed out"))},5e3),R=()=>{clearTimeout(S),this.off("task:destroyed",R),m(void 0)};this.once("task:destroyed",R),this.forkProcess.send({command:"task:destroy"})})}execute(){return new Promise((m,g)=>{if(!this.forkProcess)return g(new Error("Cannot execute background task because it hasn't been started yet. Please initialize the task using the start() method before attempting to execute it."));const S=setTimeout(()=>{R(),g(new Error("Execution timeout exceeded"))},5e3),R=()=>{clearTimeout(S),this.off("execution:finished",D),this.off("execution:failed",M)},D=k=>{R(),m(k.execution?.result)},M=k=>{R(),g(k.execution?.error||new Error("Execution failed without specific error"))};this.once("execution:finished",D),this.once("execution:failed",M),this.forkProcess.send({command:"task:execute"})})}on(m,g){this.emitter.on(m,g)}off(m,g){this.emitter.off(m,g)}once(m,g){this.emitter.once(m,g)}createContext(m,g){const S=new i.LocalizedTime(m,this.options?.timezone);return{date:S.toDate(),dateLocalIso:S.toISO(),triggeredAt:new Date,task:this,execution:g}}}function p(_){const m=JSON.parse(_),g=globalThis[m.name]||Error,S=new g(m.message);return m.stack&&(S.stack=m.stack),Object.keys(m).forEach(R=>{["name","message","stack"].includes(R)||(S[R]=m[R])}),S}return $e.default=T,$e}var Er;function Ei(){return Er||(Er=1,(function(e){var t=ut&&ut.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(e,"__esModule",{value:!0}),e.nodeCron=e.getTask=e.getTasks=void 0,e.schedule=d,e.createTask=f,e.solvePath=T,e.validate=p;const n=li(),s=di(),r=t(hi()),a=t(fi()),i=t(ke),o=ke,l=new s.TaskRegistry;function d(_,m,g){const S=f(_,m,g);return S.start(),S}function f(_,m,g){let S;if(m instanceof Function)S=new n.InlineScheduledTask(_,m,g);else{const R=T(m);S=new a.default(_,R,g)}return l.add(S),S}function T(_){if(i.default.isAbsolute(_))return(0,o.pathToFileURL)(_).href;if(_.startsWith("file://"))return _;const m=new Error().stack?.split(`
`);if(m){m?.shift();const S=m?.find(R=>R.indexOf(__filename)===-1)?.match(/(file:\/\/)?(((\/?)(\w:))?([/\\].+)):\d+:\d+/);if(S){const R=`${S[5]??""}${i.default.dirname(S[6])}`;return(0,o.pathToFileURL)(i.default.resolve(R,_)).href}}throw new Error(`Could not locate task file ${_}`)}function p(_){try{return(0,r.default)(_),!0}catch{return!1}}e.getTasks=l.all,e.getTask=l.get,e.nodeCron={schedule:d,createTask:f,validate:p,getTasks:e.getTasks,getTask:e.getTask},e.default=e.nodeCron})(ut)),ut}var mi=Ei();const Ti=hu(mi),Et={schedule:"0 9 * * *",enabled:!0,timezone:"America/Los_Angeles",organizations:[{name:"Bay Area Wildcats Basketball",website:"https://bayareawildcats.org",checkPatterns:["tryout","registration","schedule"]},{name:"Team Arsenal AAU",website:"https://teamarsenalaau.com",tryoutPage:"https://teamarsenalaau.com/tryouts",checkPatterns:["tryout","14U","15U","16U","17U"]},{name:"Bay City Basketball",website:"https://www.baycitybasketball.com",checkPatterns:["tryout","registration","warriors","3ssb"]},{name:"Bay Area Mambas AAU",website:"https://bayareamambas.com",checkPatterns:["tryout","14U","registration"]},{name:"SFBA AAU",website:"https://www.sfbasportsperformance.com/sfbaaaubasketballsanfrancisco",checkPatterns:["tryout","2026","spring","summer"]},{name:"LAKESHOW Bay Area AAU",website:"https://www.lakeshowhoops.com",tryoutPage:"https://www.lakeshowhoops.com/2025-spring-tryouts",checkPatterns:["tryout","spring","2025","high school"]},{name:"NorCal Rush Basketball",website:"https://www.norcalrushbasketball.com",tryoutPage:"https://www.norcalrushbasketball.com/tryouts",checkPatterns:["tryout","fall","2025","peninsula","san francisco"]},{name:"Bay Area Lava",website:"https://www.bayarealava.com",checkPatterns:["tryout","december","high school"]}]};function Eu(e,t){return function(){return e.apply(t,arguments)}}const{toString:bi}=Object.prototype,{getPrototypeOf:ps}=Object,{iterator:mn,toStringTag:mu}=Symbol,Tn=(e=>t=>{const n=bi.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ae=e=>(e=e.toLowerCase(),t=>Tn(t)===e),bn=e=>t=>typeof t===e,{isArray:Ze}=Array,Ke=bn("undefined");function Dt(e){return e!==null&&!Ke(e)&&e.constructor!==null&&!Ke(e.constructor)&&te(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Tu=ae("ArrayBuffer");function pi(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Tu(e.buffer),t}const _i=bn("string"),te=bn("function"),bu=bn("number"),Lt=e=>e!==null&&typeof e=="object",gi=e=>e===!0||e===!1,zt=e=>{if(Tn(e)!=="object")return!1;const t=ps(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(mu in e)&&!(mn in e)},Ai=e=>{if(!Lt(e)||Dt(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Ni=ae("Date"),Si=ae("File"),Ii=ae("Blob"),Ci=ae("FileList"),Oi=e=>Lt(e)&&te(e.pipe),Ri=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||te(e.append)&&((t=Tn(e))==="formdata"||t==="object"&&te(e.toString)&&e.toString()==="[object FormData]"))},Di=ae("URLSearchParams"),[Li,xi,yi,Pi]=["ReadableStream","Request","Response","Headers"].map(ae),Mi=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function xt(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,r;if(typeof e!="object"&&(e=[e]),Ze(e))for(s=0,r=e.length;s<r;s++)t.call(null,e[s],s,e);else{if(Dt(e))return;const a=n?Object.getOwnPropertyNames(e):Object.keys(e),i=a.length;let o;for(s=0;s<i;s++)o=a[s],t.call(null,e[o],o,e)}}function pu(e,t){if(Dt(e))return null;t=t.toLowerCase();const n=Object.keys(e);let s=n.length,r;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const Me=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,_u=e=>!Ke(e)&&e!==Me;function zn(){const{caseless:e,skipUndefined:t}=_u(this)&&this||{},n={},s=(r,a)=>{const i=e&&pu(n,a)||a;zt(n[i])&&zt(r)?n[i]=zn(n[i],r):zt(r)?n[i]=zn({},r):Ze(r)?n[i]=r.slice():(!t||!Ke(r))&&(n[i]=r)};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&xt(arguments[r],s);return n}const ki=(e,t,n,{allOwnKeys:s}={})=>(xt(t,(r,a)=>{n&&te(r)?e[a]=Eu(r,n):e[a]=r},{allOwnKeys:s}),e),wi=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Bi=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Fi=(e,t,n,s)=>{let r,a,i;const o={};if(t=t||{},e==null)return t;do{for(r=Object.getOwnPropertyNames(e),a=r.length;a-- >0;)i=r[a],(!s||s(i,e,t))&&!o[i]&&(t[i]=e[i],o[i]=!0);e=n!==!1&&ps(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Ui=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},vi=e=>{if(!e)return null;if(Ze(e))return e;let t=e.length;if(!bu(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Hi=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ps(Uint8Array)),qi=(e,t)=>{const s=(e&&e[mn]).call(e);let r;for(;(r=s.next())&&!r.done;){const a=r.value;t.call(e,a[0],a[1])}},Yi=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},Wi=ae("HTMLFormElement"),Vi=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),mr=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),ji=ae("RegExp"),gu=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};xt(n,(r,a)=>{let i;(i=t(r,a,e))!==!1&&(s[a]=i||r)}),Object.defineProperties(e,s)},Gi=e=>{gu(e,(t,n)=>{if(te(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(te(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},$i=(e,t)=>{const n={},s=r=>{r.forEach(a=>{n[a]=!0})};return Ze(e)?s(e):s(String(e).split(t)),n},Qi=()=>{},zi=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Ki(e){return!!(e&&te(e.append)&&e[mu]==="FormData"&&e[mn])}const Xi=e=>{const t=new Array(10),n=(s,r)=>{if(Lt(s)){if(t.indexOf(s)>=0)return;if(Dt(s))return s;if(!("toJSON"in s)){t[r]=s;const a=Ze(s)?[]:{};return xt(s,(i,o)=>{const l=n(i,r+1);!Ke(l)&&(a[o]=l)}),t[r]=void 0,a}}return s};return n(e,0)},Ji=ae("AsyncFunction"),Zi=e=>e&&(Lt(e)||te(e))&&te(e.then)&&te(e.catch),Au=((e,t)=>e?setImmediate:t?((n,s)=>(Me.addEventListener("message",({source:r,data:a})=>{r===Me&&a===n&&s.length&&s.shift()()},!1),r=>{s.push(r),Me.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",te(Me.postMessage)),eo=typeof queueMicrotask<"u"?queueMicrotask.bind(Me):typeof process<"u"&&process.nextTick||Au,to=e=>e!=null&&te(e[mn]),A={isArray:Ze,isArrayBuffer:Tu,isBuffer:Dt,isFormData:Ri,isArrayBufferView:pi,isString:_i,isNumber:bu,isBoolean:gi,isObject:Lt,isPlainObject:zt,isEmptyObject:Ai,isReadableStream:Li,isRequest:xi,isResponse:yi,isHeaders:Pi,isUndefined:Ke,isDate:Ni,isFile:Si,isBlob:Ii,isRegExp:ji,isFunction:te,isStream:Oi,isURLSearchParams:Di,isTypedArray:Hi,isFileList:Ci,forEach:xt,merge:zn,extend:ki,trim:Mi,stripBOM:wi,inherits:Bi,toFlatObject:Fi,kindOf:Tn,kindOfTest:ae,endsWith:Ui,toArray:vi,forEachEntry:qi,matchAll:Yi,isHTMLForm:Wi,hasOwnProperty:mr,hasOwnProp:mr,reduceDescriptors:gu,freezeMethods:Gi,toObjectSet:$i,toCamelCase:Vi,noop:Qi,toFiniteNumber:zi,findKey:pu,global:Me,isContextDefined:_u,isSpecCompliantForm:Ki,toJSONObject:Xi,isAsyncFn:Ji,isThenable:Zi,setImmediate:Au,asap:eo,isIterable:to};function P(e,t,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}A.inherits(P,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.status}}});const Nu=P.prototype,Su={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Su[e]={value:e}});Object.defineProperties(P,Su);Object.defineProperty(Nu,"isAxiosError",{value:!0});P.from=(e,t,n,s,r,a)=>{const i=Object.create(Nu);A.toFlatObject(e,i,function(f){return f!==Error.prototype},d=>d!=="isAxiosError");const o=e&&e.message?e.message:"Error",l=t==null&&e?e.code:t;return P.call(i,o,l,n,s,r),e&&i.cause==null&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",a&&Object.assign(i,a),i};const no=null;function Kn(e){return A.isPlainObject(e)||A.isArray(e)}function Iu(e){return A.endsWith(e,"[]")?e.slice(0,-2):e}function Tr(e,t,n){return e?e.concat(t).map(function(r,a){return r=Iu(r),!n&&a?"["+r+"]":r}).join(n?".":""):t}function so(e){return A.isArray(e)&&!e.some(Kn)}const ro=A.toFlatObject(A,{},null,function(t){return/^is[A-Z]/.test(t)});function pn(e,t,n){if(!A.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=A.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,S){return!A.isUndefined(S[g])});const s=n.metaTokens,r=n.visitor||f,a=n.dots,i=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(t);if(!A.isFunction(r))throw new TypeError("visitor must be a function");function d(m){if(m===null)return"";if(A.isDate(m))return m.toISOString();if(A.isBoolean(m))return m.toString();if(!l&&A.isBlob(m))throw new P("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(m)||A.isTypedArray(m)?l&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function f(m,g,S){let R=m;if(m&&!S&&typeof m=="object"){if(A.endsWith(g,"{}"))g=s?g:g.slice(0,-2),m=JSON.stringify(m);else if(A.isArray(m)&&so(m)||(A.isFileList(m)||A.endsWith(g,"[]"))&&(R=A.toArray(m)))return g=Iu(g),R.forEach(function(M,k){!(A.isUndefined(M)||M===null)&&t.append(i===!0?Tr([g],k,a):i===null?g:g+"[]",d(M))}),!1}return Kn(m)?!0:(t.append(Tr(S,g,a),d(m)),!1)}const T=[],p=Object.assign(ro,{defaultVisitor:f,convertValue:d,isVisitable:Kn});function _(m,g){if(!A.isUndefined(m)){if(T.indexOf(m)!==-1)throw Error("Circular reference detected in "+g.join("."));T.push(m),A.forEach(m,function(R,D){(!(A.isUndefined(R)||R===null)&&r.call(t,R,A.isString(D)?D.trim():D,g,p))===!0&&_(R,g?g.concat(D):[D])}),T.pop()}}if(!A.isObject(e))throw new TypeError("data must be an object");return _(e),t}function br(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function _s(e,t){this._pairs=[],e&&pn(e,this,t)}const Cu=_s.prototype;Cu.append=function(t,n){this._pairs.push([t,n])};Cu.toString=function(t){const n=t?function(s){return t.call(this,s,br)}:br;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function uo(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ou(e,t,n){if(!t)return e;const s=n&&n.encode||uo;A.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let a;if(r?a=r(t,n):a=A.isURLSearchParams(t)?t.toString():new _s(t,n).toString(s),a){const i=e.indexOf("#");i!==-1&&(e=e.slice(0,i)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class pr{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){A.forEach(this.handlers,function(s){s!==null&&t(s)})}}const Ru={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ao=typeof URLSearchParams<"u"?URLSearchParams:_s,io=typeof FormData<"u"?FormData:null,oo=typeof Blob<"u"?Blob:null,co={isBrowser:!0,classes:{URLSearchParams:ao,FormData:io,Blob:oo},protocols:["http","https","file","blob","url","data"]},gs=typeof window<"u"&&typeof document<"u",Xn=typeof navigator=="object"&&navigator||void 0,lo=gs&&(!Xn||["ReactNative","NativeScript","NS"].indexOf(Xn.product)<0),ho=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fo=gs&&window.location.href||"http://localhost",Eo=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:gs,hasStandardBrowserEnv:lo,hasStandardBrowserWebWorkerEnv:ho,navigator:Xn,origin:fo},Symbol.toStringTag,{value:"Module"})),K={...Eo,...co};function mo(e,t){return pn(e,new K.classes.URLSearchParams,{visitor:function(n,s,r,a){return K.isNode&&A.isBuffer(n)?(this.append(s,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function To(e){return A.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function bo(e){const t={},n=Object.keys(e);let s;const r=n.length;let a;for(s=0;s<r;s++)a=n[s],t[a]=e[a];return t}function Du(e){function t(n,s,r,a){let i=n[a++];if(i==="__proto__")return!0;const o=Number.isFinite(+i),l=a>=n.length;return i=!i&&A.isArray(r)?r.length:i,l?(A.hasOwnProp(r,i)?r[i]=[r[i],s]:r[i]=s,!o):((!r[i]||!A.isObject(r[i]))&&(r[i]=[]),t(n,s,r[i],a)&&A.isArray(r[i])&&(r[i]=bo(r[i])),!o)}if(A.isFormData(e)&&A.isFunction(e.entries)){const n={};return A.forEachEntry(e,(s,r)=>{t(To(s),r,n,0)}),n}return null}function po(e,t,n){if(A.isString(e))try{return(t||JSON.parse)(e),A.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const yt={transitional:Ru,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,a=A.isObject(t);if(a&&A.isHTMLForm(t)&&(t=new FormData(t)),A.isFormData(t))return r?JSON.stringify(Du(t)):t;if(A.isArrayBuffer(t)||A.isBuffer(t)||A.isStream(t)||A.isFile(t)||A.isBlob(t)||A.isReadableStream(t))return t;if(A.isArrayBufferView(t))return t.buffer;if(A.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(a){if(s.indexOf("application/x-www-form-urlencoded")>-1)return mo(t,this.formSerializer).toString();if((o=A.isFileList(t))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return pn(o?{"files[]":t}:t,l&&new l,this.formSerializer)}}return a||r?(n.setContentType("application/json",!1),po(t)):t}],transformResponse:[function(t){const n=this.transitional||yt.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(A.isResponse(t)||A.isReadableStream(t))return t;if(t&&A.isString(t)&&(s&&!this.responseType||r)){const i=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(t,this.parseReviver)}catch(o){if(i)throw o.name==="SyntaxError"?P.from(o,P.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:K.classes.FormData,Blob:K.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],e=>{yt.headers[e]={}});const _o=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),go=e=>{const t={};let n,s,r;return e&&e.split(`
`).forEach(function(i){r=i.indexOf(":"),n=i.substring(0,r).trim().toLowerCase(),s=i.substring(r+1).trim(),!(!n||t[n]&&_o[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},_r=Symbol("internals");function lt(e){return e&&String(e).trim().toLowerCase()}function Kt(e){return e===!1||e==null?e:A.isArray(e)?e.map(Kt):String(e)}function Ao(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const No=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Pn(e,t,n,s,r){if(A.isFunction(s))return s.call(this,t,n);if(r&&(t=n),!!A.isString(t)){if(A.isString(s))return t.indexOf(s)!==-1;if(A.isRegExp(s))return s.test(t)}}function So(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function Io(e,t){const n=A.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(r,a,i){return this[s].call(this,t,r,a,i)},configurable:!0})})}let ne=class{constructor(t){t&&this.set(t)}set(t,n,s){const r=this;function a(o,l,d){const f=lt(l);if(!f)throw new Error("header name must be a non-empty string");const T=A.findKey(r,f);(!T||r[T]===void 0||d===!0||d===void 0&&r[T]!==!1)&&(r[T||l]=Kt(o))}const i=(o,l)=>A.forEach(o,(d,f)=>a(d,f,l));if(A.isPlainObject(t)||t instanceof this.constructor)i(t,n);else if(A.isString(t)&&(t=t.trim())&&!No(t))i(go(t),n);else if(A.isObject(t)&&A.isIterable(t)){let o={},l,d;for(const f of t){if(!A.isArray(f))throw TypeError("Object iterator must return a key-value pair");o[d=f[0]]=(l=o[d])?A.isArray(l)?[...l,f[1]]:[l,f[1]]:f[1]}i(o,n)}else t!=null&&a(n,t,s);return this}get(t,n){if(t=lt(t),t){const s=A.findKey(this,t);if(s){const r=this[s];if(!n)return r;if(n===!0)return Ao(r);if(A.isFunction(n))return n.call(this,r,s);if(A.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=lt(t),t){const s=A.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||Pn(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let r=!1;function a(i){if(i=lt(i),i){const o=A.findKey(s,i);o&&(!n||Pn(s,s[o],o,n))&&(delete s[o],r=!0)}}return A.isArray(t)?t.forEach(a):a(t),r}clear(t){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const a=n[s];(!t||Pn(this,this[a],a,t,!0))&&(delete this[a],r=!0)}return r}normalize(t){const n=this,s={};return A.forEach(this,(r,a)=>{const i=A.findKey(s,a);if(i){n[i]=Kt(r),delete n[a];return}const o=t?So(a):String(a).trim();o!==a&&delete n[a],n[o]=Kt(r),s[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return A.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=t&&A.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(r=>s.set(r)),s}static accessor(t){const s=(this[_r]=this[_r]={accessors:{}}).accessors,r=this.prototype;function a(i){const o=lt(i);s[o]||(Io(r,i),s[o]=!0)}return A.isArray(t)?t.forEach(a):a(t),this}};ne.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);A.reduceDescriptors(ne.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});A.freezeMethods(ne);function Mn(e,t){const n=this||yt,s=t||n,r=ne.from(s.headers);let a=s.data;return A.forEach(e,function(o){a=o.call(n,a,r.normalize(),t?t.status:void 0)}),r.normalize(),a}function Lu(e){return!!(e&&e.__CANCEL__)}function et(e,t,n){P.call(this,e??"canceled",P.ERR_CANCELED,t,n),this.name="CanceledError"}A.inherits(et,P,{__CANCEL__:!0});function xu(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new P("Request failed with status code "+n.status,[P.ERR_BAD_REQUEST,P.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Co(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Oo(e,t){e=e||10;const n=new Array(e),s=new Array(e);let r=0,a=0,i;return t=t!==void 0?t:1e3,function(l){const d=Date.now(),f=s[a];i||(i=d),n[r]=l,s[r]=d;let T=a,p=0;for(;T!==r;)p+=n[T++],T=T%e;if(r=(r+1)%e,r===a&&(a=(a+1)%e),d-i<t)return;const _=f&&d-f;return _?Math.round(p*1e3/_):void 0}}function Ro(e,t){let n=0,s=1e3/t,r,a;const i=(d,f=Date.now())=>{n=f,r=null,a&&(clearTimeout(a),a=null),e(...d)};return[(...d)=>{const f=Date.now(),T=f-n;T>=s?i(d,f):(r=d,a||(a=setTimeout(()=>{a=null,i(r)},s-T)))},()=>r&&i(r)]}const en=(e,t,n=3)=>{let s=0;const r=Oo(50,250);return Ro(a=>{const i=a.loaded,o=a.lengthComputable?a.total:void 0,l=i-s,d=r(l),f=i<=o;s=i;const T={loaded:i,total:o,progress:o?i/o:void 0,bytes:l,rate:d||void 0,estimated:d&&o&&f?(o-i)/d:void 0,event:a,lengthComputable:o!=null,[t?"download":"upload"]:!0};e(T)},n)},gr=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},Ar=e=>(...t)=>A.asap(()=>e(...t)),Do=K.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,K.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(K.origin),K.navigator&&/(msie|trident)/i.test(K.navigator.userAgent)):()=>!0,Lo=K.hasStandardBrowserEnv?{write(e,t,n,s,r,a,i){if(typeof document>"u")return;const o=[`${e}=${encodeURIComponent(t)}`];A.isNumber(n)&&o.push(`expires=${new Date(n).toUTCString()}`),A.isString(s)&&o.push(`path=${s}`),A.isString(r)&&o.push(`domain=${r}`),a===!0&&o.push("secure"),A.isString(i)&&o.push(`SameSite=${i}`),document.cookie=o.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function xo(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function yo(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function yu(e,t,n){let s=!xo(t);return e&&(s||n==!1)?yo(e,t):t}const Nr=e=>e instanceof ne?{...e}:e;function Fe(e,t){t=t||{};const n={};function s(d,f,T,p){return A.isPlainObject(d)&&A.isPlainObject(f)?A.merge.call({caseless:p},d,f):A.isPlainObject(f)?A.merge({},f):A.isArray(f)?f.slice():f}function r(d,f,T,p){if(A.isUndefined(f)){if(!A.isUndefined(d))return s(void 0,d,T,p)}else return s(d,f,T,p)}function a(d,f){if(!A.isUndefined(f))return s(void 0,f)}function i(d,f){if(A.isUndefined(f)){if(!A.isUndefined(d))return s(void 0,d)}else return s(void 0,f)}function o(d,f,T){if(T in t)return s(d,f);if(T in e)return s(void 0,d)}const l={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(d,f,T)=>r(Nr(d),Nr(f),T,!0)};return A.forEach(Object.keys({...e,...t}),function(f){const T=l[f]||r,p=T(e[f],t[f],f);A.isUndefined(p)&&T!==o||(n[f]=p)}),n}const Pu=e=>{const t=Fe({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:a,headers:i,auth:o}=t;if(t.headers=i=ne.from(i),t.url=Ou(yu(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),A.isFormData(n)){if(K.hasStandardBrowserEnv||K.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(A.isFunction(n.getHeaders)){const l=n.getHeaders(),d=["content-type","content-length"];Object.entries(l).forEach(([f,T])=>{d.includes(f.toLowerCase())&&i.set(f,T)})}}if(K.hasStandardBrowserEnv&&(s&&A.isFunction(s)&&(s=s(t)),s||s!==!1&&Do(t.url))){const l=r&&a&&Lo.read(a);l&&i.set(r,l)}return t},Po=typeof XMLHttpRequest<"u",Mo=Po&&function(e){return new Promise(function(n,s){const r=Pu(e);let a=r.data;const i=ne.from(r.headers).normalize();let{responseType:o,onUploadProgress:l,onDownloadProgress:d}=r,f,T,p,_,m;function g(){_&&_(),m&&m(),r.cancelToken&&r.cancelToken.unsubscribe(f),r.signal&&r.signal.removeEventListener("abort",f)}let S=new XMLHttpRequest;S.open(r.method.toUpperCase(),r.url,!0),S.timeout=r.timeout;function R(){if(!S)return;const M=ne.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),H={data:!o||o==="text"||o==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:M,config:e,request:S};xu(function(j){n(j),g()},function(j){s(j),g()},H),S=null}"onloadend"in S?S.onloadend=R:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(R)},S.onabort=function(){S&&(s(new P("Request aborted",P.ECONNABORTED,e,S)),S=null)},S.onerror=function(k){const H=k&&k.message?k.message:"Network Error",V=new P(H,P.ERR_NETWORK,e,S);V.event=k||null,s(V),S=null},S.ontimeout=function(){let k=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const H=r.transitional||Ru;r.timeoutErrorMessage&&(k=r.timeoutErrorMessage),s(new P(k,H.clarifyTimeoutError?P.ETIMEDOUT:P.ECONNABORTED,e,S)),S=null},a===void 0&&i.setContentType(null),"setRequestHeader"in S&&A.forEach(i.toJSON(),function(k,H){S.setRequestHeader(H,k)}),A.isUndefined(r.withCredentials)||(S.withCredentials=!!r.withCredentials),o&&o!=="json"&&(S.responseType=r.responseType),d&&([p,m]=en(d,!0),S.addEventListener("progress",p)),l&&S.upload&&([T,_]=en(l),S.upload.addEventListener("progress",T),S.upload.addEventListener("loadend",_)),(r.cancelToken||r.signal)&&(f=M=>{S&&(s(!M||M.type?new et(null,e,S):M),S.abort(),S=null)},r.cancelToken&&r.cancelToken.subscribe(f),r.signal&&(r.signal.aborted?f():r.signal.addEventListener("abort",f)));const D=Co(r.url);if(D&&K.protocols.indexOf(D)===-1){s(new P("Unsupported protocol "+D+":",P.ERR_BAD_REQUEST,e));return}S.send(a||null)})},ko=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,r;const a=function(d){if(!r){r=!0,o();const f=d instanceof Error?d:this.reason;s.abort(f instanceof P?f:new et(f instanceof Error?f.message:f))}};let i=t&&setTimeout(()=>{i=null,a(new P(`timeout ${t} of ms exceeded`,P.ETIMEDOUT))},t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),e=null)};e.forEach(d=>d.addEventListener("abort",a));const{signal:l}=s;return l.unsubscribe=()=>A.asap(o),l}},wo=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,r;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},Bo=async function*(e,t){for await(const n of Fo(e))yield*wo(n,t)},Fo=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},Sr=(e,t,n,s)=>{const r=Bo(e,t);let a=0,i,o=l=>{i||(i=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:d,value:f}=await r.next();if(d){o(),l.close();return}let T=f.byteLength;if(n){let p=a+=T;n(p)}l.enqueue(new Uint8Array(f))}catch(d){throw o(d),d}},cancel(l){return o(l),r.return()}},{highWaterMark:2})},Ir=64*1024,{isFunction:Vt}=A,Uo=(({Request:e,Response:t})=>({Request:e,Response:t}))(A.global),{ReadableStream:Cr,TextEncoder:Or}=A.global,Rr=(e,...t)=>{try{return!!e(...t)}catch{return!1}},vo=e=>{e=A.merge.call({skipUndefined:!0},Uo,e);const{fetch:t,Request:n,Response:s}=e,r=t?Vt(t):typeof fetch=="function",a=Vt(n),i=Vt(s);if(!r)return!1;const o=r&&Vt(Cr),l=r&&(typeof Or=="function"?(m=>g=>m.encode(g))(new Or):async m=>new Uint8Array(await new n(m).arrayBuffer())),d=a&&o&&Rr(()=>{let m=!1;const g=new n(K.origin,{body:new Cr,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!g}),f=i&&o&&Rr(()=>A.isReadableStream(new s("").body)),T={stream:f&&(m=>m.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!T[m]&&(T[m]=(g,S)=>{let R=g&&g[m];if(R)return R.call(g);throw new P(`Response type '${m}' is not supported`,P.ERR_NOT_SUPPORT,S)})});const p=async m=>{if(m==null)return 0;if(A.isBlob(m))return m.size;if(A.isSpecCompliantForm(m))return(await new n(K.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(A.isArrayBufferView(m)||A.isArrayBuffer(m))return m.byteLength;if(A.isURLSearchParams(m)&&(m=m+""),A.isString(m))return(await l(m)).byteLength},_=async(m,g)=>{const S=A.toFiniteNumber(m.getContentLength());return S??p(g)};return async m=>{let{url:g,method:S,data:R,signal:D,cancelToken:M,timeout:k,onDownloadProgress:H,onUploadProgress:V,responseType:j,headers:Ye,withCredentials:Ce="same-origin",fetchOptions:js}=Pu(m),Gs=t||fetch;j=j?(j+"").toLowerCase():"text";let Ft=ko([D,M&&M.toAbortSignal()],k),rt=null;const Oe=Ft&&Ft.unsubscribe&&(()=>{Ft.unsubscribe()});let $s;try{if(V&&d&&S!=="get"&&S!=="head"&&($s=await _(Ye,R))!==0){let pe=new n(g,{method:"POST",body:R,duplex:"half"}),We;if(A.isFormData(R)&&(We=pe.headers.get("content-type"))&&Ye.setContentType(We),pe.body){const[yn,Ut]=gr($s,en(Ar(V)));R=Sr(pe.body,Ir,yn,Ut)}}A.isString(Ce)||(Ce=Ce?"include":"omit");const oe=a&&"credentials"in n.prototype,Qs={...js,signal:Ft,method:S.toUpperCase(),headers:Ye.normalize().toJSON(),body:R,duplex:"half",credentials:oe?Ce:void 0};rt=a&&new n(g,Qs);let be=await(a?Gs(rt,js):Gs(g,Qs));const zs=f&&(j==="stream"||j==="response");if(f&&(H||zs&&Oe)){const pe={};["status","statusText","headers"].forEach(Ks=>{pe[Ks]=be[Ks]});const We=A.toFiniteNumber(be.headers.get("content-length")),[yn,Ut]=H&&gr(We,en(Ar(H),!0))||[];be=new s(Sr(be.body,Ir,yn,()=>{Ut&&Ut(),Oe&&Oe()}),pe)}j=j||"text";let ti=await T[A.findKey(T,j)||"text"](be,m);return!zs&&Oe&&Oe(),await new Promise((pe,We)=>{xu(pe,We,{data:ti,headers:ne.from(be.headers),status:be.status,statusText:be.statusText,config:m,request:rt})})}catch(oe){throw Oe&&Oe(),oe&&oe.name==="TypeError"&&/Load failed|fetch/i.test(oe.message)?Object.assign(new P("Network Error",P.ERR_NETWORK,m,rt),{cause:oe.cause||oe}):P.from(oe,oe&&oe.code,m,rt)}}},Ho=new Map,Mu=e=>{let t=e&&e.env||{};const{fetch:n,Request:s,Response:r}=t,a=[s,r,n];let i=a.length,o=i,l,d,f=Ho;for(;o--;)l=a[o],d=f.get(l),d===void 0&&f.set(l,d=o?new Map:vo(t)),f=d;return d};Mu();const As={http:no,xhr:Mo,fetch:{get:Mu}};A.forEach(As,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Dr=e=>`- ${e}`,qo=e=>A.isFunction(e)||e===null||e===!1;function Yo(e,t){e=A.isArray(e)?e:[e];const{length:n}=e;let s,r;const a={};for(let i=0;i<n;i++){s=e[i];let o;if(r=s,!qo(s)&&(r=As[(o=String(s)).toLowerCase()],r===void 0))throw new P(`Unknown adapter '${o}'`);if(r&&(A.isFunction(r)||(r=r.get(t))))break;a[o||"#"+i]=r}if(!r){const i=Object.entries(a).map(([l,d])=>`adapter ${l} `+(d===!1?"is not supported by the environment":"is not available in the build"));let o=n?i.length>1?`since :
`+i.map(Dr).join(`
`):" "+Dr(i[0]):"as no adapter specified";throw new P("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r}const ku={getAdapter:Yo,adapters:As};function kn(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new et(null,e)}function Lr(e){return kn(e),e.headers=ne.from(e.headers),e.data=Mn.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ku.getAdapter(e.adapter||yt.adapter,e)(e).then(function(s){return kn(e),s.data=Mn.call(e,e.transformResponse,s),s.headers=ne.from(s.headers),s},function(s){return Lu(s)||(kn(e),s&&s.response&&(s.response.data=Mn.call(e,e.transformResponse,s.response),s.response.headers=ne.from(s.response.headers))),Promise.reject(s)})}const wu="1.13.2",_n={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{_n[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const xr={};_n.transitional=function(t,n,s){function r(a,i){return"[Axios v"+wu+"] Transitional option '"+a+"'"+i+(s?". "+s:"")}return(a,i,o)=>{if(t===!1)throw new P(r(i," has been removed"+(n?" in "+n:"")),P.ERR_DEPRECATED);return n&&!xr[i]&&(xr[i]=!0,console.warn(r(i," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,i,o):!0}};_n.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function Wo(e,t,n){if(typeof e!="object")throw new P("options must be an object",P.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let r=s.length;for(;r-- >0;){const a=s[r],i=t[a];if(i){const o=e[a],l=o===void 0||i(o,a,e);if(l!==!0)throw new P("option "+a+" must be "+l,P.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new P("Unknown option "+a,P.ERR_BAD_OPTION)}}const Xt={assertOptions:Wo,validators:_n},ce=Xt.validators;let we=class{constructor(t){this.defaults=t||{},this.interceptors={request:new pr,response:new pr}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const a=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?a&&!String(s.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+a):s.stack=a}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Fe(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:a}=n;s!==void 0&&Xt.assertOptions(s,{silentJSONParsing:ce.transitional(ce.boolean),forcedJSONParsing:ce.transitional(ce.boolean),clarifyTimeoutError:ce.transitional(ce.boolean)},!1),r!=null&&(A.isFunction(r)?n.paramsSerializer={serialize:r}:Xt.assertOptions(r,{encode:ce.function,serialize:ce.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Xt.assertOptions(n,{baseUrl:ce.spelling("baseURL"),withXsrfToken:ce.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let i=a&&A.merge(a.common,a[n.method]);a&&A.forEach(["delete","get","head","post","put","patch","common"],m=>{delete a[m]}),n.headers=ne.concat(i,a);const o=[];let l=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(l=l&&g.synchronous,o.unshift(g.fulfilled,g.rejected))});const d=[];this.interceptors.response.forEach(function(g){d.push(g.fulfilled,g.rejected)});let f,T=0,p;if(!l){const m=[Lr.bind(this),void 0];for(m.unshift(...o),m.push(...d),p=m.length,f=Promise.resolve(n);T<p;)f=f.then(m[T++],m[T++]);return f}p=o.length;let _=n;for(;T<p;){const m=o[T++],g=o[T++];try{_=m(_)}catch(S){g.call(this,S);break}}try{f=Lr.call(this,_)}catch(m){return Promise.reject(m)}for(T=0,p=d.length;T<p;)f=f.then(d[T++],d[T++]);return f}getUri(t){t=Fe(this.defaults,t);const n=yu(t.baseURL,t.url,t.allowAbsoluteUrls);return Ou(n,t.params,t.paramsSerializer)}};A.forEach(["delete","get","head","options"],function(t){we.prototype[t]=function(n,s){return this.request(Fe(s||{},{method:t,url:n,data:(s||{}).data}))}});A.forEach(["post","put","patch"],function(t){function n(s){return function(a,i,o){return this.request(Fe(o||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:a,data:i}))}}we.prototype[t]=n(),we.prototype[t+"Form"]=n(!0)});let Vo=class Bu{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const s=this;this.promise.then(r=>{if(!s._listeners)return;let a=s._listeners.length;for(;a-- >0;)s._listeners[a](r);s._listeners=null}),this.promise.then=r=>{let a;const i=new Promise(o=>{s.subscribe(o),a=o}).then(r);return i.cancel=function(){s.unsubscribe(a)},i},t(function(a,i,o){s.reason||(s.reason=new et(a,i,o),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new Bu(function(r){t=r}),cancel:t}}};function jo(e){return function(n){return e.apply(null,n)}}function Go(e){return A.isObject(e)&&e.isAxiosError===!0}const Jn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Jn).forEach(([e,t])=>{Jn[t]=e});function Fu(e){const t=new we(e),n=Eu(we.prototype.request,t);return A.extend(n,we.prototype,t,{allOwnKeys:!0}),A.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return Fu(Fe(e,r))},n}const Y=Fu(yt);Y.Axios=we;Y.CanceledError=et;Y.CancelToken=Vo;Y.isCancel=Lu;Y.VERSION=wu;Y.toFormData=pn;Y.AxiosError=P;Y.Cancel=Y.CanceledError;Y.all=function(t){return Promise.all(t)};Y.spread=jo;Y.isAxiosError=Go;Y.mergeConfig=Fe;Y.AxiosHeaders=ne;Y.formToJSON=e=>Du(A.isHTMLForm(e)?new FormData(e):e);Y.getAdapter=ku.getAdapter;Y.HttpStatusCode=Jn;Y.default=Y;const{Axios:gE,AxiosError:AE,CanceledError:NE,isCancel:SE,CancelToken:IE,VERSION:CE,all:OE,Cancel:RE,isAxiosError:DE,spread:LE,toFormData:xE,AxiosHeaders:yE,HttpStatusCode:PE,formToJSON:ME,getAdapter:kE,mergeConfig:wE}=Y;var F;(function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"})(F||(F={}));function $o(e){return e.type===F.Tag||e.type===F.Script||e.type===F.Style}const Ns=F.Root,Uu=F.Text,Qo=F.Directive,vu=F.Comment,zo=F.Script,Ko=F.Style,Zn=F.Tag,Xo=F.CDATA,Jo=F.Doctype;class Hu{constructor(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}get parentNode(){return this.parent}set parentNode(t){this.parent=t}get previousSibling(){return this.prev}set previousSibling(t){this.prev=t}get nextSibling(){return this.next}set nextSibling(t){this.next=t}cloneNode(t=!1){return St(this,t)}}class Ss extends Hu{constructor(t){super(),this.data=t}get nodeValue(){return this.data}set nodeValue(t){this.data=t}}class Nt extends Ss{constructor(){super(...arguments),this.type=F.Text}get nodeType(){return 3}}class Is extends Ss{constructor(){super(...arguments),this.type=F.Comment}get nodeType(){return 8}}class Cs extends Ss{constructor(t,n){super(n),this.name=t,this.type=F.Directive}get nodeType(){return 1}}class Os extends Hu{constructor(t){super(),this.children=t}get firstChild(){var t;return(t=this.children[0])!==null&&t!==void 0?t:null}get lastChild(){return this.children.length>0?this.children[this.children.length-1]:null}get childNodes(){return this.children}set childNodes(t){this.children=t}}class qu extends Os{constructor(){super(...arguments),this.type=F.CDATA}get nodeType(){return 4}}class Ue extends Os{constructor(){super(...arguments),this.type=F.Root}get nodeType(){return 9}}class Rs extends Os{constructor(t,n,s=[],r=t==="script"?F.Script:t==="style"?F.Style:F.Tag){super(s),this.name=t,this.attribs=n,this.type=r}get nodeType(){return 1}get tagName(){return this.name}set tagName(t){this.name=t}get attributes(){return Object.keys(this.attribs).map(t=>{var n,s;return{name:t,value:this.attribs[t],namespace:(n=this["x-attribsNamespace"])===null||n===void 0?void 0:n[t],prefix:(s=this["x-attribsPrefix"])===null||s===void 0?void 0:s[t]}})}}function y(e){return $o(e)}function gn(e){return e.type===F.CDATA}function he(e){return e.type===F.Text}function An(e){return e.type===F.Comment}function es(e){return e.type===F.Directive}function Se(e){return e.type===F.Root}function W(e){return Object.prototype.hasOwnProperty.call(e,"children")}function St(e,t=!1){let n;if(he(e))n=new Nt(e.data);else if(An(e))n=new Is(e.data);else if(y(e)){const s=t?wn(e.children):[],r=new Rs(e.name,{...e.attribs},s);s.forEach(a=>a.parent=r),e.namespace!=null&&(r.namespace=e.namespace),e["x-attribsNamespace"]&&(r["x-attribsNamespace"]={...e["x-attribsNamespace"]}),e["x-attribsPrefix"]&&(r["x-attribsPrefix"]={...e["x-attribsPrefix"]}),n=r}else if(gn(e)){const s=t?wn(e.children):[],r=new qu(s);s.forEach(a=>a.parent=r),n=r}else if(Se(e)){const s=t?wn(e.children):[],r=new Ue(s);s.forEach(a=>a.parent=r),e["x-mode"]&&(r["x-mode"]=e["x-mode"]),n=r}else if(es(e)){const s=new Cs(e.name,e.data);e["x-name"]!=null&&(s["x-name"]=e["x-name"],s["x-publicId"]=e["x-publicId"],s["x-systemId"]=e["x-systemId"]),n=s}else throw new Error(`Not implemented yet: ${e.type}`);return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function wn(e){const t=e.map(n=>St(n,!0));for(let n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}const yr={withStartIndices:!1,withEndIndices:!1,xmlMode:!1};class Zo{constructor(t,n,s){this.dom=[],this.root=new Ue(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof n=="function"&&(s=n,n=yr),typeof t=="object"&&(n=t,t=void 0),this.callback=t??null,this.options=n??yr,this.elementCB=s??null}onparserinit(t){this.parser=t}onreset(){this.dom=[],this.root=new Ue(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null}onend(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))}onerror(t){this.handleCallback(t)}onclosetag(){this.lastNode=null;const t=this.tagStack.pop();this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(t)}onopentag(t,n){const s=this.options.xmlMode?F.Tag:void 0,r=new Rs(t,n,void 0,s);this.addNode(r),this.tagStack.push(r)}ontext(t){const{lastNode:n}=this;if(n&&n.type===F.Text)n.data+=t,this.options.withEndIndices&&(n.endIndex=this.parser.endIndex);else{const s=new Nt(t);this.addNode(s),this.lastNode=s}}oncomment(t){if(this.lastNode&&this.lastNode.type===F.Comment){this.lastNode.data+=t;return}const n=new Is(t);this.addNode(n),this.lastNode=n}oncommentend(){this.lastNode=null}oncdatastart(){const t=new Nt(""),n=new qu([t]);this.addNode(n),t.parent=n,this.lastNode=t}oncdataend(){this.lastNode=null}onprocessinginstruction(t,n){const s=new Cs(t,n);this.addNode(s)}handleCallback(t){if(typeof this.callback=="function")this.callback(t,this.dom);else if(t)throw t}addNode(t){const n=this.tagStack[this.tagStack.length-1],s=n.children[n.children.length-1];this.options.withStartIndices&&(t.startIndex=this.parser.startIndex),this.options.withEndIndices&&(t.endIndex=this.parser.endIndex),n.children.push(t),s&&(t.prev=s,s.next=t),t.parent=n,this.lastNode=null}}const Pr=/["&'<>$\x80-\uFFFF]/g,ec=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]),tc=String.prototype.codePointAt!=null?(e,t)=>e.codePointAt(t):(e,t)=>(e.charCodeAt(t)&64512)===55296?(e.charCodeAt(t)-55296)*1024+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t);function Yu(e){let t="",n=0,s;for(;(s=Pr.exec(e))!==null;){const r=s.index,a=e.charCodeAt(r),i=ec.get(a);i!==void 0?(t+=e.substring(n,r)+i,n=r+1):(t+=`${e.substring(n,r)}&#x${tc(e,r).toString(16)};`,n=Pr.lastIndex+=+((a&64512)===55296))}return t+e.substr(n)}function Wu(e,t){return function(s){let r,a=0,i="";for(;r=e.exec(s);)a!==r.index&&(i+=s.substring(a,r.index)),i+=t.get(r[0].charCodeAt(0)),a=r.index+1;return i+s.substring(a)}}const nc=Wu(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),sc=Wu(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),rc=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),uc=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),ac=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function ic(e){return e.replace(/"/g,"&quot;")}function oc(e,t){var n;if(!e)return;const s=((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)===!1?ic:t.xmlMode||t.encodeEntities!=="utf8"?Yu:nc;return Object.keys(e).map(r=>{var a,i;const o=(a=e[r])!==null&&a!==void 0?a:"";return t.xmlMode==="foreign"&&(r=(i=uc.get(r))!==null&&i!==void 0?i:r),!t.emptyAttrs&&!t.xmlMode&&o===""?r:`${r}="${s(o)}"`}).join(" ")}const Mr=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function Nn(e,t={}){const n="length"in e?e:[e];let s="";for(let r=0;r<n.length;r++)s+=cc(n[r],t);return s}function cc(e,t){switch(e.type){case Ns:return Nn(e.children,t);case Jo:case Qo:return fc(e);case vu:return Tc(e);case Xo:return mc(e);case zo:case Ko:case Zn:return hc(e,t);case Uu:return Ec(e,t)}}const lc=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),dc=new Set(["svg","math"]);function hc(e,t){var n;t.xmlMode==="foreign"&&(e.name=(n=rc.get(e.name))!==null&&n!==void 0?n:e.name,e.parent&&lc.has(e.parent.name)&&(t={...t,xmlMode:!1})),!t.xmlMode&&dc.has(e.name)&&(t={...t,xmlMode:"foreign"});let s=`<${e.name}`;const r=oc(e.attribs,t);return r&&(s+=` ${r}`),e.children.length===0&&(t.xmlMode?t.selfClosingTags!==!1:t.selfClosingTags&&Mr.has(e.name))?(t.xmlMode||(s+=" "),s+="/>"):(s+=">",e.children.length>0&&(s+=Nn(e.children,t)),(t.xmlMode||!Mr.has(e.name))&&(s+=`</${e.name}>`)),s}function fc(e){return`<${e.data}>`}function Ec(e,t){var n;let s=e.data||"";return((n=t.encodeEntities)!==null&&n!==void 0?n:t.decodeEntities)!==!1&&!(!t.xmlMode&&e.parent&&ac.has(e.parent.name))&&(s=t.xmlMode||t.encodeEntities!=="utf8"?Yu(s):sc(s)),s}function mc(e){return`<![CDATA[${e.children[0].data}]]>`}function Tc(e){return`<!--${e.data}-->`}function Vu(e,t){return Nn(e,t)}function bc(e,t){return W(e)?e.children.map(n=>Vu(n,t)).join(""):""}function Jt(e){return Array.isArray(e)?e.map(Jt).join(""):y(e)?e.name==="br"?`
`:Jt(e.children):gn(e)?Jt(e.children):he(e)?e.data:""}function Xe(e){return Array.isArray(e)?e.map(Xe).join(""):W(e)&&!An(e)?Xe(e.children):he(e)?e.data:""}function tn(e){return Array.isArray(e)?e.map(tn).join(""):W(e)&&(e.type===F.Tag||gn(e))?tn(e.children):he(e)?e.data:""}function Sn(e){return W(e)?e.children:[]}function ju(e){return e.parent||null}function Gu(e){const t=ju(e);if(t!=null)return Sn(t);const n=[e];let{prev:s,next:r}=e;for(;s!=null;)n.unshift(s),{prev:s}=s;for(;r!=null;)n.push(r),{next:r}=r;return n}function pc(e,t){var n;return(n=e.attribs)===null||n===void 0?void 0:n[t]}function _c(e,t){return e.attribs!=null&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&e.attribs[t]!=null}function gc(e){return e.name}function Ds(e){let{next:t}=e;for(;t!==null&&!y(t);)({next:t}=t);return t}function Ls(e){let{prev:t}=e;for(;t!==null&&!y(t);)({prev:t}=t);return t}function He(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){const t=e.parent.children,n=t.lastIndexOf(e);n>=0&&t.splice(n,1)}e.next=null,e.prev=null,e.parent=null}function Ac(e,t){const n=t.prev=e.prev;n&&(n.next=t);const s=t.next=e.next;s&&(s.prev=t);const r=t.parent=e.parent;if(r){const a=r.children;a[a.lastIndexOf(e)]=t,e.parent=null}}function Nc(e,t){if(He(t),t.next=null,t.parent=e,e.children.push(t)>1){const n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null}function Sc(e,t){He(t);const{parent:n}=e,s=e.next;if(t.next=s,t.prev=e,e.next=t,t.parent=n,s){if(s.prev=t,n){const r=n.children;r.splice(r.lastIndexOf(s),0,t)}}else n&&n.children.push(t)}function Ic(e,t){if(He(t),t.parent=e,t.prev=null,e.children.unshift(t)!==1){const n=e.children[1];n.prev=t,t.next=n}else t.next=null}function Cc(e,t){He(t);const{parent:n}=e;if(n){const s=n.children;s.splice(s.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t}function Pt(e,t,n=!0,s=1/0){return xs(e,Array.isArray(t)?t:[t],n,s)}function xs(e,t,n,s){const r=[],a=[Array.isArray(t)?t:[t]],i=[0];for(;;){if(i[0]>=a[0].length){if(i.length===1)return r;a.shift(),i.shift();continue}const o=a[0][i[0]++];if(e(o)&&(r.push(o),--s<=0))return r;n&&W(o)&&o.children.length>0&&(i.unshift(0),a.unshift(o.children))}}function Oc(e,t){return t.find(e)}function ys(e,t,n=!0){const s=Array.isArray(t)?t:[t];for(let r=0;r<s.length;r++){const a=s[r];if(y(a)&&e(a))return a;if(n&&W(a)&&a.children.length>0){const i=ys(e,a.children,!0);if(i)return i}}return null}function $u(e,t){return(Array.isArray(t)?t:[t]).some(n=>y(n)&&e(n)||W(n)&&$u(e,n.children))}function Rc(e,t){const n=[],s=[Array.isArray(t)?t:[t]],r=[0];for(;;){if(r[0]>=s[0].length){if(s.length===1)return n;s.shift(),r.shift();continue}const a=s[0][r[0]++];y(a)&&e(a)&&n.push(a),W(a)&&a.children.length>0&&(r.unshift(0),s.unshift(a.children))}}const nn={tag_name(e){return typeof e=="function"?t=>y(t)&&e(t.name):e==="*"?y:t=>y(t)&&t.name===e},tag_type(e){return typeof e=="function"?t=>e(t.type):t=>t.type===e},tag_contains(e){return typeof e=="function"?t=>he(t)&&e(t.data):t=>he(t)&&t.data===e}};function Ps(e,t){return typeof t=="function"?n=>y(n)&&t(n.attribs[e]):n=>y(n)&&n.attribs[e]===t}function Dc(e,t){return n=>e(n)||t(n)}function Qu(e){const t=Object.keys(e).map(n=>{const s=e[n];return Object.prototype.hasOwnProperty.call(nn,n)?nn[n](s):Ps(n,s)});return t.length===0?null:t.reduce(Dc)}function Lc(e,t){const n=Qu(e);return n?n(t):!0}function xc(e,t,n,s=1/0){const r=Qu(e);return r?Pt(r,t,n,s):[]}function yc(e,t,n=!0){return Array.isArray(t)||(t=[t]),ys(Ps("id",e),t,n)}function tt(e,t,n=!0,s=1/0){return Pt(nn.tag_name(e),t,n,s)}function Pc(e,t,n=!0,s=1/0){return Pt(Ps("class",e),t,n,s)}function Mc(e,t,n=!0,s=1/0){return Pt(nn.tag_type(e),t,n,s)}function kc(e){let t=e.length;for(;--t>=0;){const n=e[t];if(t>0&&e.lastIndexOf(n,t-1)>=0){e.splice(t,1);continue}for(let s=n.parent;s;s=s.parent)if(e.includes(s)){e.splice(t,1);break}}return e}var re;(function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"})(re||(re={}));function zu(e,t){const n=[],s=[];if(e===t)return 0;let r=W(e)?e:e.parent;for(;r;)n.unshift(r),r=r.parent;for(r=W(t)?t:t.parent;r;)s.unshift(r),r=r.parent;const a=Math.min(n.length,s.length);let i=0;for(;i<a&&n[i]===s[i];)i++;if(i===0)return re.DISCONNECTED;const o=n[i-1],l=o.children,d=n[i],f=s[i];return l.indexOf(d)>l.indexOf(f)?o===t?re.FOLLOWING|re.CONTAINED_BY:re.FOLLOWING:o===e?re.PRECEDING|re.CONTAINS:re.PRECEDING}function nt(e){return e=e.filter((t,n,s)=>!s.includes(t,n+1)),e.sort((t,n)=>{const s=zu(t,n);return s&re.PRECEDING?-1:s&re.FOLLOWING?1:0}),e}function wc(e){const t=sn(Hc,e);return t?t.name==="feed"?Bc(t):Fc(t):null}function Bc(e){var t;const n=e.children,s={type:"atom",items:tt("entry",n).map(i=>{var o;const{children:l}=i,d={media:Ku(l)};Z(d,"id","id",l),Z(d,"title","title",l);const f=(o=sn("link",l))===null||o===void 0?void 0:o.attribs.href;f&&(d.link=f);const T=Ae("summary",l)||Ae("content",l);T&&(d.description=T);const p=Ae("updated",l);return p&&(d.pubDate=new Date(p)),d})};Z(s,"id","id",n),Z(s,"title","title",n);const r=(t=sn("link",n))===null||t===void 0?void 0:t.attribs.href;r&&(s.link=r),Z(s,"description","subtitle",n);const a=Ae("updated",n);return a&&(s.updated=new Date(a)),Z(s,"author","email",n,!0),s}function Fc(e){var t,n;const s=(n=(t=sn("channel",e.children))===null||t===void 0?void 0:t.children)!==null&&n!==void 0?n:[],r={type:e.name.substr(0,3),id:"",items:tt("item",e.children).map(i=>{const{children:o}=i,l={media:Ku(o)};Z(l,"id","guid",o),Z(l,"title","title",o),Z(l,"link","link",o),Z(l,"description","description",o);const d=Ae("pubDate",o)||Ae("dc:date",o);return d&&(l.pubDate=new Date(d)),l})};Z(r,"title","title",s),Z(r,"link","link",s),Z(r,"description","description",s);const a=Ae("lastBuildDate",s);return a&&(r.updated=new Date(a)),Z(r,"author","managingEditor",s,!0),r}const Uc=["url","type","lang"],vc=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function Ku(e){return tt("media:content",e).map(t=>{const{attribs:n}=t,s={medium:n.medium,isDefault:!!n.isDefault};for(const r of Uc)n[r]&&(s[r]=n[r]);for(const r of vc)n[r]&&(s[r]=parseInt(n[r],10));return n.expression&&(s.expression=n.expression),s})}function sn(e,t){return tt(e,t,!0,1)[0]}function Ae(e,t,n=!1){return Xe(tt(e,t,n,1)).trim()}function Z(e,t,n,s,r=!1){const a=Ae(n,s,r);a&&(e[t]=a)}function Hc(e){return e==="rss"||e==="feed"||e==="rdf:RDF"}const In=Object.freeze(Object.defineProperty({__proto__:null,get DocumentPosition(){return re},append:Sc,appendChild:Nc,compareDocumentPosition:zu,existsOne:$u,filter:Pt,find:xs,findAll:Rc,findOne:ys,findOneChild:Oc,getAttributeValue:pc,getChildren:Sn,getElementById:yc,getElements:xc,getElementsByClassName:Pc,getElementsByTagName:tt,getElementsByTagType:Mc,getFeed:wc,getInnerHTML:bc,getName:gc,getOuterHTML:Vu,getParent:ju,getSiblings:Gu,getText:Jt,hasAttrib:_c,hasChildren:W,innerText:tn,isCDATA:gn,isComment:An,isDocument:Se,isTag:y,isText:he,nextElementSibling:Ds,prepend:Cc,prependChild:Ic,prevElementSibling:Ls,removeElement:He,removeSubsets:kc,replaceElement:Ac,testElement:Lc,textContent:Xe,uniqueSort:nt},Symbol.toStringTag,{value:"Module"})),qc={_useHtmlParser2:!1};function ts(e,t){if(!e)return t??qc;const n={_useHtmlParser2:!!e.xmlMode,...t,...e};return e.xml?(n._useHtmlParser2=!0,n.xmlMode=!0,e.xml!==!0&&Object.assign(n,e.xml)):e.xmlMode&&(n._useHtmlParser2=!0),n}function Xu(e,t,n){return e?e(t??e._root.children,null,void 0,n).toString():""}function Yc(e,t){return typeof e=="object"&&e!=null&&!("length"in e)&&!("type"in e)}function Wc(e,t){const n=Yc(e)?(t=e,void 0):e,s={...this===null||this===void 0?void 0:this._options,...ts(t)};return Xu(this,n,s)}function Vc(e){const t={...this._options,xmlMode:!0};return Xu(this,e,t)}function It(e){const t=e??(this?this.root():[]);let n="";for(let s=0;s<t.length;s++)n+=Xe(t[s]);return n}function jc(e,t,n=typeof t=="boolean"?t:!1){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t);const s=this.load(e,this._options,!1);return n||s("script").remove(),[...s.root()[0].children]}function Gc(){return this(this._root)}function Ju(e,t){if(t===e)return!1;let n=t;for(;n&&n!==n.parent;)if(n=n.parent,n===e)return!0;return!1}function $c(e){return this.root().extract(e)}function Qc(e,t){if(!kr(e)||!kr(t))return;let n=e.length;const s=+t.length;for(let r=0;r<s;r++)e[n++]=t[r];return e.length=n,e}function kr(e){if(Array.isArray(e))return!0;if(typeof e!="object"||e===null||!("length"in e)||typeof e.length!="number"||e.length<0)return!1;for(let t=0;t<e.length;t++)if(!(t in e))return!1;return!0}const zc=Object.freeze(Object.defineProperty({__proto__:null,contains:Ju,extract:$c,html:Wc,merge:Qc,parseHTML:jc,root:Gc,text:It,xml:Vc},Symbol.toStringTag,{value:"Module"}));function me(e){return e.cheerio!=null}function Kc(e){return e.replace(/[._-](\w|$)/g,(t,n)=>n.toUpperCase())}function Xc(e){return e.replace(/[A-Z]/g,"-$&").toLowerCase()}function q(e,t){const n=e.length;for(let s=0;s<n;s++)t(e[s],s);return e}var Pe;(function(e){e[e.LowerA=97]="LowerA",e[e.LowerZ=122]="LowerZ",e[e.UpperA=65]="UpperA",e[e.UpperZ=90]="UpperZ",e[e.Exclamation=33]="Exclamation"})(Pe||(Pe={}));function ns(e){const t=e.indexOf("<");if(t===-1||t>e.length-3)return!1;const n=e.charCodeAt(t+1);return(n>=Pe.LowerA&&n<=Pe.LowerZ||n>=Pe.UpperA&&n<=Pe.UpperZ||n===Pe.Exclamation)&&e.includes(">",t+2)}const Zu=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Jc=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Bn;const Zc=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),wr=(Bn=String.fromCodePoint)!==null&&Bn!==void 0?Bn:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function e0(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Zc.get(e))!==null&&t!==void 0?t:e}var z;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(z||(z={}));const t0=32;var Ne;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Ne||(Ne={}));function ss(e){return e>=z.ZERO&&e<=z.NINE}function n0(e){return e>=z.UPPER_A&&e<=z.UPPER_F||e>=z.LOWER_A&&e<=z.LOWER_F}function s0(e){return e>=z.UPPER_A&&e<=z.UPPER_Z||e>=z.LOWER_A&&e<=z.LOWER_Z||ss(e)}function r0(e){return e===z.EQUALS||s0(e)}var Q;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Q||(Q={}));var ue;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(ue||(ue={}));class ea{constructor(t,n,s){this.decodeTree=t,this.emitCodePoint=n,this.errors=s,this.state=Q.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=ue.Strict}startEntity(t){this.decodeMode=t,this.state=Q.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Q.EntityStart:return t.charCodeAt(n)===z.NUM?(this.state=Q.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Q.NamedEntity,this.stateNamedEntity(t,n));case Q.NumericStart:return this.stateNumericStart(t,n);case Q.NumericDecimal:return this.stateNumericDecimal(t,n);case Q.NumericHex:return this.stateNumericHex(t,n);case Q.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|t0)===z.LOWER_X?(this.state=Q.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Q.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,s,r){if(n!==s){const a=s-n;this.result=this.result*Math.pow(r,a)+Number.parseInt(t.substr(n,a),r),this.consumed+=a}}stateNumericHex(t,n){const s=n;for(;n<t.length;){const r=t.charCodeAt(n);if(ss(r)||n0(r))n+=1;else return this.addToNumericResult(t,s,n,16),this.emitNumericEntity(r,3)}return this.addToNumericResult(t,s,n,16),-1}stateNumericDecimal(t,n){const s=n;for(;n<t.length;){const r=t.charCodeAt(n);if(ss(r))n+=1;else return this.addToNumericResult(t,s,n,10),this.emitNumericEntity(r,2)}return this.addToNumericResult(t,s,n,10),-1}emitNumericEntity(t,n){var s;if(this.consumed<=n)return(s=this.errors)===null||s===void 0||s.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===z.SEMI)this.consumed+=1;else if(this.decodeMode===ue.Strict)return 0;return this.emitCodePoint(e0(this.result),this.consumed),this.errors&&(t!==z.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:s}=this;let r=s[this.treeIndex],a=(r&Ne.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const i=t.charCodeAt(n);if(this.treeIndex=u0(s,r,this.treeIndex+Math.max(1,a),i),this.treeIndex<0)return this.result===0||this.decodeMode===ue.Attribute&&(a===0||r0(i))?0:this.emitNotTerminatedNamedEntity();if(r=s[this.treeIndex],a=(r&Ne.VALUE_LENGTH)>>14,a!==0){if(i===z.SEMI)return this.emitNamedEntityData(this.treeIndex,a,this.consumed+this.excess);this.decodeMode!==ue.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:s}=this,r=(s[n]&Ne.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,r,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,s){const{decodeTree:r}=this;return this.emitCodePoint(n===1?r[t]&~Ne.VALUE_LENGTH:r[t+1],s),n===3&&this.emitCodePoint(r[t+2],s),s}end(){var t;switch(this.state){case Q.NamedEntity:return this.result!==0&&(this.decodeMode!==ue.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Q.NumericDecimal:return this.emitNumericEntity(0,2);case Q.NumericHex:return this.emitNumericEntity(0,3);case Q.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Q.EntityStart:return 0}}}function u0(e,t,n,s){const r=(t&Ne.BRANCH_LENGTH)>>7,a=t&Ne.JUMP_TABLE;if(r===0)return a!==0&&s===a?n:-1;if(a){const l=s-a;return l<0||l>=r?-1:e[n+l]-1}let i=n,o=i+r-1;for(;i<=o;){const l=i+o>>>1,d=e[l];if(d<s)i=l+1;else if(d>s)o=l-1;else return e[l+r]}return-1}var x;(function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"})(x||(x={}));var C;(function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.BeforeSpecialT=23]="BeforeSpecialT",e[e.SpecialStartSequence=24]="SpecialStartSequence",e[e.InSpecialTag=25]="InSpecialTag",e[e.InEntity=26]="InEntity"})(C||(C={}));function fe(e){return e===x.Space||e===x.NewLine||e===x.Tab||e===x.FormFeed||e===x.CarriageReturn}function jt(e){return e===x.Slash||e===x.Gt||fe(e)}function a0(e){return e>=x.LowerA&&e<=x.LowerZ||e>=x.UpperA&&e<=x.UpperZ}var de;(function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"})(de||(de={}));const G={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97]),XmpEnd:new Uint8Array([60,47,120,109,112])};let i0=class{constructor({xmlMode:t=!1,decodeEntities:n=!0},s){this.cbs=s,this.state=C.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=C.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=t,this.decodeEntities=n,this.entityDecoder=new ea(t?Jc:Zu,(r,a)=>this.emitCodePoint(r,a))}reset(){this.state=C.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=C.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(t){this.offset+=this.buffer.length,this.buffer=t,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(t){t===x.Lt||!this.decodeEntities&&this.fastForwardTo(x.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=C.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&t===x.Amp&&this.startEntity()}stateSpecialStartSequence(t){const n=this.sequenceIndex===this.currentSequence.length;if(!(n?jt(t):(t|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!n){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=C.InTagName,this.stateInTagName(t)}stateInSpecialTag(t){if(this.sequenceIndex===this.currentSequence.length){if(t===x.Gt||fe(t)){const n=this.index-this.currentSequence.length;if(this.sectionStart<n){const s=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=s}this.isSpecial=!1,this.sectionStart=n+2,this.stateInClosingTagName(t);return}this.sequenceIndex=0}(t|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===G.TitleEnd?this.decodeEntities&&t===x.Amp&&this.startEntity():this.fastForwardTo(x.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(t===x.Lt)}stateCDATASequence(t){t===G.Cdata[this.sequenceIndex]?++this.sequenceIndex===G.Cdata.length&&(this.state=C.InCommentLike,this.currentSequence=G.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=C.InDeclaration,this.stateInDeclaration(t))}fastForwardTo(t){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===t)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(t){t===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===G.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=C.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):t!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(t){return this.xmlMode?!jt(t):a0(t)}startSpecial(t,n){this.isSpecial=!0,this.currentSequence=t,this.sequenceIndex=n,this.state=C.SpecialStartSequence}stateBeforeTagName(t){if(t===x.ExclamationMark)this.state=C.BeforeDeclaration,this.sectionStart=this.index+1;else if(t===x.Questionmark)this.state=C.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(t)){const n=t|32;this.sectionStart=this.index,this.xmlMode?this.state=C.InTagName:n===G.ScriptEnd[2]?this.state=C.BeforeSpecialS:n===G.TitleEnd[2]||n===G.XmpEnd[2]?this.state=C.BeforeSpecialT:this.state=C.InTagName}else t===x.Slash?this.state=C.BeforeClosingTagName:(this.state=C.Text,this.stateText(t))}stateInTagName(t){jt(t)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=C.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateBeforeClosingTagName(t){fe(t)||(t===x.Gt?this.state=C.Text:(this.state=this.isTagStartChar(t)?C.InClosingTagName:C.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(t){(t===x.Gt||fe(t))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=C.AfterClosingTagName,this.stateAfterClosingTagName(t))}stateAfterClosingTagName(t){(t===x.Gt||this.fastForwardTo(x.Gt))&&(this.state=C.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(t){t===x.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=C.InSpecialTag,this.sequenceIndex=0):this.state=C.Text,this.sectionStart=this.index+1):t===x.Slash?this.state=C.InSelfClosingTag:fe(t)||(this.state=C.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(t){t===x.Gt?(this.cbs.onselfclosingtag(this.index),this.state=C.Text,this.sectionStart=this.index+1,this.isSpecial=!1):fe(t)||(this.state=C.BeforeAttributeName,this.stateBeforeAttributeName(t))}stateInAttributeName(t){(t===x.Eq||jt(t))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=C.AfterAttributeName,this.stateAfterAttributeName(t))}stateAfterAttributeName(t){t===x.Eq?this.state=C.BeforeAttributeValue:t===x.Slash||t===x.Gt?(this.cbs.onattribend(de.NoValue,this.sectionStart),this.sectionStart=-1,this.state=C.BeforeAttributeName,this.stateBeforeAttributeName(t)):fe(t)||(this.cbs.onattribend(de.NoValue,this.sectionStart),this.state=C.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(t){t===x.DoubleQuote?(this.state=C.InAttributeValueDq,this.sectionStart=this.index+1):t===x.SingleQuote?(this.state=C.InAttributeValueSq,this.sectionStart=this.index+1):fe(t)||(this.sectionStart=this.index,this.state=C.InAttributeValueNq,this.stateInAttributeValueNoQuotes(t))}handleInAttributeValue(t,n){t===n||!this.decodeEntities&&this.fastForwardTo(n)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n===x.DoubleQuote?de.Double:de.Single,this.index+1),this.state=C.BeforeAttributeName):this.decodeEntities&&t===x.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(t){this.handleInAttributeValue(t,x.DoubleQuote)}stateInAttributeValueSingleQuotes(t){this.handleInAttributeValue(t,x.SingleQuote)}stateInAttributeValueNoQuotes(t){fe(t)||t===x.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(de.Unquoted,this.index),this.state=C.BeforeAttributeName,this.stateBeforeAttributeName(t)):this.decodeEntities&&t===x.Amp&&this.startEntity()}stateBeforeDeclaration(t){t===x.OpeningSquareBracket?(this.state=C.CDATASequence,this.sequenceIndex=0):this.state=t===x.Dash?C.BeforeComment:C.InDeclaration}stateInDeclaration(t){(t===x.Gt||this.fastForwardTo(x.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=C.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(t){(t===x.Gt||this.fastForwardTo(x.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=C.Text,this.sectionStart=this.index+1)}stateBeforeComment(t){t===x.Dash?(this.state=C.InCommentLike,this.currentSequence=G.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=C.InDeclaration}stateInSpecialComment(t){(t===x.Gt||this.fastForwardTo(x.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=C.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(t){const n=t|32;n===G.ScriptEnd[3]?this.startSpecial(G.ScriptEnd,4):n===G.StyleEnd[3]?this.startSpecial(G.StyleEnd,4):(this.state=C.InTagName,this.stateInTagName(t))}stateBeforeSpecialT(t){switch(t|32){case G.TitleEnd[3]:{this.startSpecial(G.TitleEnd,4);break}case G.TextareaEnd[3]:{this.startSpecial(G.TextareaEnd,4);break}case G.XmpEnd[3]:{this.startSpecial(G.XmpEnd,4);break}default:this.state=C.InTagName,this.stateInTagName(t)}}startEntity(){this.baseState=this.state,this.state=C.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?ue.Strict:this.baseState===C.Text||this.baseState===C.InSpecialTag?ue.Legacy:ue.Attribute)}stateInEntity(){const t=this.entityDecoder.write(this.buffer,this.index-this.offset);t>=0?(this.state=this.baseState,t===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===C.Text||this.state===C.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===C.InAttributeValueDq||this.state===C.InAttributeValueSq||this.state===C.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const t=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case C.Text:{this.stateText(t);break}case C.SpecialStartSequence:{this.stateSpecialStartSequence(t);break}case C.InSpecialTag:{this.stateInSpecialTag(t);break}case C.CDATASequence:{this.stateCDATASequence(t);break}case C.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(t);break}case C.InAttributeName:{this.stateInAttributeName(t);break}case C.InCommentLike:{this.stateInCommentLike(t);break}case C.InSpecialComment:{this.stateInSpecialComment(t);break}case C.BeforeAttributeName:{this.stateBeforeAttributeName(t);break}case C.InTagName:{this.stateInTagName(t);break}case C.InClosingTagName:{this.stateInClosingTagName(t);break}case C.BeforeTagName:{this.stateBeforeTagName(t);break}case C.AfterAttributeName:{this.stateAfterAttributeName(t);break}case C.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(t);break}case C.BeforeAttributeValue:{this.stateBeforeAttributeValue(t);break}case C.BeforeClosingTagName:{this.stateBeforeClosingTagName(t);break}case C.AfterClosingTagName:{this.stateAfterClosingTagName(t);break}case C.BeforeSpecialS:{this.stateBeforeSpecialS(t);break}case C.BeforeSpecialT:{this.stateBeforeSpecialT(t);break}case C.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(t);break}case C.InSelfClosingTag:{this.stateInSelfClosingTag(t);break}case C.InDeclaration:{this.stateInDeclaration(t);break}case C.BeforeDeclaration:{this.stateBeforeDeclaration(t);break}case C.BeforeComment:{this.stateBeforeComment(t);break}case C.InProcessingInstruction:{this.stateInProcessingInstruction(t);break}case C.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===C.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const t=this.buffer.length+this.offset;this.sectionStart>=t||(this.state===C.InCommentLike?this.currentSequence===G.CdataEnd?this.cbs.oncdata(this.sectionStart,t,0):this.cbs.oncomment(this.sectionStart,t,0):this.state===C.InTagName||this.state===C.BeforeAttributeName||this.state===C.BeforeAttributeValue||this.state===C.AfterAttributeName||this.state===C.InAttributeName||this.state===C.InAttributeValueSq||this.state===C.InAttributeValueDq||this.state===C.InAttributeValueNq||this.state===C.InClosingTagName||this.cbs.ontext(this.sectionStart,t))}emitCodePoint(t,n){this.baseState!==C.Text&&this.baseState!==C.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+n,this.index=this.sectionStart-1,this.cbs.onattribentity(t)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+n,this.index=this.sectionStart-1,this.cbs.ontextentity(t,this.sectionStart))}};const Qe=new Set(["input","option","optgroup","select","button","datalist","textarea"]),U=new Set(["p"]),Br=new Set(["thead","tbody"]),Fr=new Set(["dd","dt"]),Ur=new Set(["rt","rp"]),o0=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",U],["h1",U],["h2",U],["h3",U],["h4",U],["h5",U],["h6",U],["select",Qe],["input",Qe],["output",Qe],["button",Qe],["datalist",Qe],["textarea",Qe],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",Fr],["dt",Fr],["address",U],["article",U],["aside",U],["blockquote",U],["details",U],["div",U],["dl",U],["fieldset",U],["figcaption",U],["figure",U],["footer",U],["form",U],["header",U],["hr",U],["main",U],["nav",U],["ol",U],["pre",U],["section",U],["table",U],["ul",U],["rt",Ur],["rp",Ur],["tbody",Br],["tfoot",Br]]),c0=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),vr=new Set(["math","svg"]),Hr=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),l0=/\s|\//;let d0=class{constructor(t,n={}){var s,r,a,i,o,l;this.options=n,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=t??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(s=n.lowerCaseTags)!==null&&s!==void 0?s:this.htmlMode,this.lowerCaseAttributeNames=(r=n.lowerCaseAttributeNames)!==null&&r!==void 0?r:this.htmlMode,this.recognizeSelfClosing=(a=n.recognizeSelfClosing)!==null&&a!==void 0?a:!this.htmlMode,this.tokenizer=new((i=n.Tokenizer)!==null&&i!==void 0?i:i0)(this.options,this),this.foreignContext=[!this.htmlMode],(l=(o=this.cbs).onparserinit)===null||l===void 0||l.call(o,this)}ontext(t,n){var s,r;const a=this.getSlice(t,n);this.endIndex=n-1,(r=(s=this.cbs).ontext)===null||r===void 0||r.call(s,a),this.startIndex=n}ontextentity(t,n){var s,r;this.endIndex=n-1,(r=(s=this.cbs).ontext)===null||r===void 0||r.call(s,wr(t)),this.startIndex=n}isVoidElement(t){return this.htmlMode&&c0.has(t)}onopentagname(t,n){this.endIndex=n;let s=this.getSlice(t,n);this.lowerCaseTagNames&&(s=s.toLowerCase()),this.emitOpenTag(s)}emitOpenTag(t){var n,s,r,a;this.openTagStart=this.startIndex,this.tagname=t;const i=this.htmlMode&&o0.get(t);if(i)for(;this.stack.length>0&&i.has(this.stack[0]);){const o=this.stack.shift();(s=(n=this.cbs).onclosetag)===null||s===void 0||s.call(n,o,!0)}this.isVoidElement(t)||(this.stack.unshift(t),this.htmlMode&&(vr.has(t)?this.foreignContext.unshift(!0):Hr.has(t)&&this.foreignContext.unshift(!1))),(a=(r=this.cbs).onopentagname)===null||a===void 0||a.call(r,t),this.cbs.onopentag&&(this.attribs={})}endOpenTag(t){var n,s;this.startIndex=this.openTagStart,this.attribs&&((s=(n=this.cbs).onopentag)===null||s===void 0||s.call(n,this.tagname,this.attribs,t),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(t){this.endIndex=t,this.endOpenTag(!1),this.startIndex=t+1}onclosetag(t,n){var s,r,a,i,o,l,d,f;this.endIndex=n;let T=this.getSlice(t,n);if(this.lowerCaseTagNames&&(T=T.toLowerCase()),this.htmlMode&&(vr.has(T)||Hr.has(T))&&this.foreignContext.shift(),this.isVoidElement(T))this.htmlMode&&T==="br"&&((i=(a=this.cbs).onopentagname)===null||i===void 0||i.call(a,"br"),(l=(o=this.cbs).onopentag)===null||l===void 0||l.call(o,"br",{},!0),(f=(d=this.cbs).onclosetag)===null||f===void 0||f.call(d,"br",!1));else{const p=this.stack.indexOf(T);if(p!==-1)for(let _=0;_<=p;_++){const m=this.stack.shift();(r=(s=this.cbs).onclosetag)===null||r===void 0||r.call(s,m,_!==p)}else this.htmlMode&&T==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=n+1}onselfclosingtag(t){this.endIndex=t,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=t+1):this.onopentagend(t)}closeCurrentTag(t){var n,s;const r=this.tagname;this.endOpenTag(t),this.stack[0]===r&&((s=(n=this.cbs).onclosetag)===null||s===void 0||s.call(n,r,!t),this.stack.shift())}onattribname(t,n){this.startIndex=t;const s=this.getSlice(t,n);this.attribname=this.lowerCaseAttributeNames?s.toLowerCase():s}onattribdata(t,n){this.attribvalue+=this.getSlice(t,n)}onattribentity(t){this.attribvalue+=wr(t)}onattribend(t,n){var s,r;this.endIndex=n,(r=(s=this.cbs).onattribute)===null||r===void 0||r.call(s,this.attribname,this.attribvalue,t===de.Double?'"':t===de.Single?"'":t===de.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(t){const n=t.search(l0);let s=n<0?t:t.substr(0,n);return this.lowerCaseTagNames&&(s=s.toLowerCase()),s}ondeclaration(t,n){this.endIndex=n;const s=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(s);this.cbs.onprocessinginstruction(`!${r}`,`!${s}`)}this.startIndex=n+1}onprocessinginstruction(t,n){this.endIndex=n;const s=this.getSlice(t,n);if(this.cbs.onprocessinginstruction){const r=this.getInstructionName(s);this.cbs.onprocessinginstruction(`?${r}`,`?${s}`)}this.startIndex=n+1}oncomment(t,n,s){var r,a,i,o;this.endIndex=n,(a=(r=this.cbs).oncomment)===null||a===void 0||a.call(r,this.getSlice(t,n-s)),(o=(i=this.cbs).oncommentend)===null||o===void 0||o.call(i),this.startIndex=n+1}oncdata(t,n,s){var r,a,i,o,l,d,f,T,p,_;this.endIndex=n;const m=this.getSlice(t,n-s);!this.htmlMode||this.options.recognizeCDATA?((a=(r=this.cbs).oncdatastart)===null||a===void 0||a.call(r),(o=(i=this.cbs).ontext)===null||o===void 0||o.call(i,m),(d=(l=this.cbs).oncdataend)===null||d===void 0||d.call(l)):((T=(f=this.cbs).oncomment)===null||T===void 0||T.call(f,`[CDATA[${m}]]`),(_=(p=this.cbs).oncommentend)===null||_===void 0||_.call(p)),this.startIndex=n+1}onend(){var t,n;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let s=0;s<this.stack.length;s++)this.cbs.onclosetag(this.stack[s],!0)}(n=(t=this.cbs).onend)===null||n===void 0||n.call(t)}reset(){var t,n,s,r;(n=(t=this.cbs).onreset)===null||n===void 0||n.call(t),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(r=(s=this.cbs).onparserinit)===null||r===void 0||r.call(s,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(t){this.reset(),this.end(t)}getSlice(t,n){for(;t-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let s=this.buffers[0].slice(t-this.bufferOffset,n-this.bufferOffset);for(;n-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),s+=this.buffers[0].slice(0,n-this.bufferOffset);return s}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(t){var n,s;if(this.ended){(s=(n=this.cbs).onerror)===null||s===void 0||s.call(n,new Error(".write() after done!"));return}this.buffers.push(t),this.tokenizer.running&&(this.tokenizer.write(t),this.writeIndex++)}end(t){var n,s;if(this.ended){(s=(n=this.cbs).onerror)===null||s===void 0||s.call(n,new Error(".end() after done!"));return}t&&this.write(t),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(t){this.write(t)}done(t){this.end(t)}};function h0(e,t){const n=new Zo(void 0,t);return new d0(n,t).end(e),n.root}var Fn;const Ct=(Fn=Object.hasOwn)!==null&&Fn!==void 0?Fn:((e,t)=>Object.prototype.hasOwnProperty.call(e,t)),Ot=/\s+/,rs="data-",Ms=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,f0=/^{[^]*}$|^\[[^]*]$/;function rn(e,t,n){var s;if(!(!e||!y(e))){if((s=e.attribs)!==null&&s!==void 0||(e.attribs={}),!t)return e.attribs;if(Ct(e.attribs,t))return!n&&Ms.test(t)?t:e.attribs[t];if(e.name==="option"&&t==="value")return It(e.children);if(e.name==="input"&&(e.attribs.type==="radio"||e.attribs.type==="checkbox")&&t==="value")return"on"}}function ze(e,t,n){n===null?na(e,t):e.attribs[t]=`${n}`}function E0(e,t){if(typeof e=="object"||t!==void 0){if(typeof t=="function"){if(typeof e!="string")throw new Error("Bad combination of arguments.");return q(this,(n,s)=>{y(n)&&ze(n,e,t.call(n,s,n.attribs[e]))})}return q(this,n=>{if(y(n))if(typeof e=="object")for(const s of Object.keys(e)){const r=e[s];ze(n,s,r)}else ze(n,e,t)})}return arguments.length>1?this:rn(this[0],e,this.options.xmlMode)}function qr(e,t,n){return t in e?e[t]:!n&&Ms.test(t)?rn(e,t,!1)!==void 0:rn(e,t,n)}function Un(e,t,n,s){t in e?e[t]=n:ze(e,t,!s&&Ms.test(t)?n?"":null:`${n}`)}function m0(e,t){var n;if(typeof e=="string"&&t===void 0){const s=this[0];if(!s)return;switch(e){case"style":{const r=this.css(),a=Object.keys(r);for(let i=0;i<a.length;i++)r[i]=a[i];return r.length=a.length,r}case"tagName":case"nodeName":return y(s)?s.name.toUpperCase():void 0;case"href":case"src":{if(!y(s))return;const r=(n=s.attribs)===null||n===void 0?void 0:n[e];return typeof URL<"u"&&(e==="href"&&(s.tagName==="a"||s.tagName==="link")||e==="src"&&(s.tagName==="img"||s.tagName==="iframe"||s.tagName==="audio"||s.tagName==="video"||s.tagName==="source"))&&r!==void 0&&this.options.baseURI?new URL(r,this.options.baseURI).href:r}case"innerText":return tn(s);case"textContent":return Xe(s);case"outerHTML":return s.type===Ns?this.html():this.clone().wrap("<container />").parent().html();case"innerHTML":return this.html();default:return y(s)?qr(s,e,this.options.xmlMode):void 0}}if(typeof e=="object"||t!==void 0){if(typeof t=="function"){if(typeof e=="object")throw new TypeError("Bad combination of arguments.");return q(this,(s,r)=>{y(s)&&Un(s,e,t.call(s,r,qr(s,e,this.options.xmlMode)),this.options.xmlMode)})}return q(this,s=>{if(y(s))if(typeof e=="object")for(const r of Object.keys(e)){const a=e[r];Un(s,r,a,this.options.xmlMode)}else Un(s,e,t,this.options.xmlMode)})}}function Yr(e,t,n){var s;(s=e.data)!==null&&s!==void 0||(e.data={}),typeof t=="object"?Object.assign(e.data,t):typeof t=="string"&&n!==void 0&&(e.data[t]=n)}function T0(e){for(const t of Object.keys(e.attribs)){if(!t.startsWith(rs))continue;const n=Kc(t.slice(rs.length));Ct(e.data,n)||(e.data[n]=ta(e.attribs[t]))}return e.data}function b0(e,t){const n=rs+Xc(t),s=e.data;if(Ct(s,t))return s[t];if(Ct(e.attribs,n))return s[t]=ta(e.attribs[n])}function ta(e){if(e==="null")return null;if(e==="true")return!0;if(e==="false")return!1;const t=Number(e);if(e===String(t))return t;if(f0.test(e))try{return JSON.parse(e)}catch{}return e}function p0(e,t){var n;const s=this[0];if(!s||!y(s))return;const r=s;return(n=r.data)!==null&&n!==void 0||(r.data={}),e==null?T0(r):typeof e=="object"||t!==void 0?(q(this,a=>{y(a)&&(typeof e=="object"?Yr(a,e):Yr(a,e,t))}),this):b0(r,e)}function _0(e){const t=arguments.length===0,n=this[0];if(!n||!y(n))return t?void 0:this;switch(n.name){case"textarea":return this.text(e);case"select":{const s=this.find("option:selected");if(!t){if(this.attr("multiple")==null&&typeof e=="object")return this;this.find("option").removeAttr("selected");const r=typeof e=="object"?e:[e];for(const a of r)this.find(`option[value="${a}"]`).attr("selected","");return this}return this.attr("multiple")?s.toArray().map(r=>It(r.children)):s.attr("value")}case"input":case"option":return t?this.attr("value"):this.attr("value",e)}}function na(e,t){!e.attribs||!Ct(e.attribs,t)||delete e.attribs[t]}function un(e){return e?e.trim().split(Ot):[]}function g0(e){const t=un(e);for(const n of t)q(this,s=>{y(s)&&na(s,n)});return this}function A0(e){return this.toArray().some(t=>{const n=y(t)&&t.attribs.class;let s=-1;if(n&&e.length>0)for(;(s=n.indexOf(e,s+1))>-1;){const r=s+e.length;if((s===0||Ot.test(n[s-1]))&&(r===n.length||Ot.test(n[r])))return!0}return!1})}function sa(e){if(typeof e=="function")return q(this,(s,r)=>{if(y(s)){const a=s.attribs.class||"";sa.call([s],e.call(s,r,a))}});if(!e||typeof e!="string")return this;const t=e.split(Ot),n=this.length;for(let s=0;s<n;s++){const r=this[s];if(!y(r))continue;const a=rn(r,"class",!1);if(a){let i=` ${a} `;for(const o of t){const l=`${o} `;i.includes(` ${l}`)||(i+=l)}ze(r,"class",i.trim())}else ze(r,"class",t.join(" ").trim())}return this}function ra(e){if(typeof e=="function")return q(this,(r,a)=>{y(r)&&ra.call([r],e.call(r,a,r.attribs.class||""))});const t=un(e),n=t.length,s=arguments.length===0;return q(this,r=>{if(y(r))if(s)r.attribs.class="";else{const a=un(r.attribs.class);let i=!1;for(let o=0;o<n;o++){const l=a.indexOf(t[o]);l!==-1&&(a.splice(l,1),i=!0,o--)}i&&(r.attribs.class=a.join(" "))}})}function ua(e,t){if(typeof e=="function")return q(this,(i,o)=>{y(i)&&ua.call([i],e.call(i,o,i.attribs.class||"",t),t)});if(!e||typeof e!="string")return this;const n=e.split(Ot),s=n.length,r=typeof t=="boolean"?t?1:-1:0,a=this.length;for(let i=0;i<a;i++){const o=this[i];if(!y(o))continue;const l=un(o.attribs.class);for(let d=0;d<s;d++){const f=l.indexOf(n[d]);r>=0&&f===-1?l.push(n[d]):r<=0&&f!==-1&&l.splice(f,1)}o.attribs.class=l.join(" ")}return this}const N0=Object.freeze(Object.defineProperty({__proto__:null,addClass:sa,attr:E0,data:p0,hasClass:A0,prop:m0,removeAttr:g0,removeClass:ra,toggleClass:ua,val:_0},Symbol.toStringTag,{value:"Module"}));var L;(function(e){e.Attribute="attribute",e.Pseudo="pseudo",e.PseudoElement="pseudo-element",e.Tag="tag",e.Universal="universal",e.Adjacent="adjacent",e.Child="child",e.Descendant="descendant",e.Parent="parent",e.Sibling="sibling",e.ColumnCombinator="column-combinator"})(L||(L={}));var $;(function(e){e.Any="any",e.Element="element",e.End="end",e.Equals="equals",e.Exists="exists",e.Hyphen="hyphen",e.Not="not",e.Start="start"})($||($={}));const Wr=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,S0=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,I0=new Map([[126,$.Element],[94,$.Start],[36,$.End],[42,$.Any],[33,$.Not],[124,$.Hyphen]]),C0=new Set(["has","not","matches","is","where","host","host-context"]);function Tt(e){switch(e.type){case L.Adjacent:case L.Child:case L.Descendant:case L.Parent:case L.Sibling:case L.ColumnCombinator:return!0;default:return!1}}const O0=new Set(["contains","icontains"]);function R0(e,t,n){const s=parseInt(t,16)-65536;return s!==s||n?t:s<0?String.fromCharCode(s+65536):String.fromCharCode(s>>10|55296,s&1023|56320)}function dt(e){return e.replace(S0,R0)}function vn(e){return e===39||e===34}function Vr(e){return e===32||e===9||e===10||e===12||e===13}function Cn(e){const t=[],n=aa(t,`${e}`,0);if(n<e.length)throw new Error(`Unmatched selector: ${e.slice(n)}`);return t}function aa(e,t,n){let s=[];function r(p){const _=t.slice(n+p).match(Wr);if(!_)throw new Error(`Expected name, found ${t.slice(n)}`);const[m]=_;return n+=p+m.length,dt(m)}function a(p){for(n+=p;n<t.length&&Vr(t.charCodeAt(n));)n++}function i(){n+=1;const p=n;let _=1;for(;_>0&&n<t.length;n++)t.charCodeAt(n)===40&&!o(n)?_++:t.charCodeAt(n)===41&&!o(n)&&_--;if(_)throw new Error("Parenthesis not matched");return dt(t.slice(p,n-1))}function o(p){let _=0;for(;t.charCodeAt(--p)===92;)_++;return(_&1)===1}function l(){if(s.length>0&&Tt(s[s.length-1]))throw new Error("Did not expect successive traversals.")}function d(p){if(s.length>0&&s[s.length-1].type===L.Descendant){s[s.length-1].type=p;return}l(),s.push({type:p})}function f(p,_){s.push({type:L.Attribute,name:p,action:_,value:r(1),namespace:null,ignoreCase:"quirks"})}function T(){if(s.length&&s[s.length-1].type===L.Descendant&&s.pop(),s.length===0)throw new Error("Empty sub-selector");e.push(s)}if(a(0),t.length===n)return n;e:for(;n<t.length;){const p=t.charCodeAt(n);switch(p){case 32:case 9:case 10:case 12:case 13:{(s.length===0||s[0].type!==L.Descendant)&&(l(),s.push({type:L.Descendant})),a(1);break}case 62:{d(L.Child),a(1);break}case 60:{d(L.Parent),a(1);break}case 126:{d(L.Sibling),a(1);break}case 43:{d(L.Adjacent),a(1);break}case 46:{f("class",$.Element);break}case 35:{f("id",$.Equals);break}case 91:{a(1);let _,m=null;t.charCodeAt(n)===124?_=r(1):t.startsWith("*|",n)?(m="*",_=r(2)):(_=r(0),t.charCodeAt(n)===124&&t.charCodeAt(n+1)!==61&&(m=_,_=r(1))),a(0);let g=$.Exists;const S=I0.get(t.charCodeAt(n));if(S){if(g=S,t.charCodeAt(n+1)!==61)throw new Error("Expected `=`");a(2)}else t.charCodeAt(n)===61&&(g=$.Equals,a(1));let R="",D=null;if(g!=="exists"){if(vn(t.charCodeAt(n))){const H=t.charCodeAt(n);let V=n+1;for(;V<t.length&&(t.charCodeAt(V)!==H||o(V));)V+=1;if(t.charCodeAt(V)!==H)throw new Error("Attribute value didn't end");R=dt(t.slice(n+1,V)),n=V+1}else{const H=n;for(;n<t.length&&(!Vr(t.charCodeAt(n))&&t.charCodeAt(n)!==93||o(n));)n+=1;R=dt(t.slice(H,n))}a(0);const k=t.charCodeAt(n)|32;k===115?(D=!1,a(1)):k===105&&(D=!0,a(1))}if(t.charCodeAt(n)!==93)throw new Error("Attribute selector didn't terminate");n+=1;const M={type:L.Attribute,name:_,action:g,value:R,namespace:m,ignoreCase:D};s.push(M);break}case 58:{if(t.charCodeAt(n+1)===58){s.push({type:L.PseudoElement,name:r(2).toLowerCase(),data:t.charCodeAt(n)===40?i():null});continue}const _=r(1).toLowerCase();let m=null;if(t.charCodeAt(n)===40)if(C0.has(_)){if(vn(t.charCodeAt(n+1)))throw new Error(`Pseudo-selector ${_} cannot be quoted`);if(m=[],n=aa(m,t,n+1),t.charCodeAt(n)!==41)throw new Error(`Missing closing parenthesis in :${_} (${t})`);n+=1}else{if(m=i(),O0.has(_)){const g=m.charCodeAt(0);g===m.charCodeAt(m.length-1)&&vn(g)&&(m=m.slice(1,-1))}m=dt(m)}s.push({type:L.Pseudo,name:_,data:m});break}case 44:{T(),s=[],a(1);break}default:{if(t.startsWith("/*",n)){const g=t.indexOf("*/",n+2);if(g<0)throw new Error("Comment was not terminated");n=g+2,s.length===0&&a(0);break}let _=null,m;if(p===42)n+=1,m="*";else if(p===124){if(m="",t.charCodeAt(n+1)===124){d(L.ColumnCombinator),a(2);break}}else if(Wr.test(t.slice(n)))m=r(0);else break e;t.charCodeAt(n)===124&&t.charCodeAt(n+1)!==124&&(_=m,t.charCodeAt(n+1)===42?(m="*",n+=2):m=r(1)),s.push(m==="*"?{type:L.Universal,namespace:_}:{type:L.Tag,name:m,namespace:_})}}}return T(),n}var Hn,jr;function D0(){return jr||(jr=1,Hn={trueFunc:function(){return!0},falseFunc:function(){return!1}}),Hn}var an=D0();const w=hu(an),ia=new Map([[L.Universal,50],[L.Tag,30],[L.Attribute,1],[L.Pseudo,0]]);function ks(e){return!ia.has(e.type)}const L0=new Map([[$.Exists,10],[$.Equals,8],[$.Not,7],[$.Start,6],[$.End,6],[$.Any,5]]);function x0(e){const t=e.map(oa);for(let n=1;n<e.length;n++){const s=t[n];if(!(s<0))for(let r=n-1;r>=0&&s<t[r];r--){const a=e[r+1];e[r+1]=e[r],e[r]=a,t[r+1]=t[r],t[r]=s}}}function oa(e){var t,n;let s=(t=ia.get(e.type))!==null&&t!==void 0?t:-1;return e.type===L.Attribute?(s=(n=L0.get(e.action))!==null&&n!==void 0?n:4,e.action===$.Equals&&e.name==="id"&&(s=9),e.ignoreCase&&(s>>=1)):e.type===L.Pseudo&&(e.data?e.name==="has"||e.name==="contains"?s=0:Array.isArray(e.data)?(s=Math.min(...e.data.map(r=>Math.min(...r.map(oa)))),s<0&&(s=0)):s=2:s=3),s}const y0=/[-[\]{}()*+?.,\\^$|#\s]/g;function Gr(e){return e.replace(y0,"\\$&")}const P0=new Set(["accept","accept-charset","align","alink","axis","bgcolor","charset","checked","clear","codetype","color","compact","declare","defer","dir","direction","disabled","enctype","face","frame","hreflang","http-equiv","lang","language","link","media","method","multiple","nohref","noresize","noshade","nowrap","readonly","rel","rev","rules","scope","scrolling","selected","shape","target","text","type","valign","valuetype","vlink"]);function ye(e,t){return typeof e.ignoreCase=="boolean"?e.ignoreCase:e.ignoreCase==="quirks"?!!t.quirksMode:!t.xmlMode&&P0.has(e.name)}const M0={equals(e,t,n){const{adapter:s}=n,{name:r}=t;let{value:a}=t;return ye(t,n)?(a=a.toLowerCase(),i=>{const o=s.getAttributeValue(i,r);return o!=null&&o.length===a.length&&o.toLowerCase()===a&&e(i)}):i=>s.getAttributeValue(i,r)===a&&e(i)},hyphen(e,t,n){const{adapter:s}=n,{name:r}=t;let{value:a}=t;const i=a.length;return ye(t,n)?(a=a.toLowerCase(),function(l){const d=s.getAttributeValue(l,r);return d!=null&&(d.length===i||d.charAt(i)==="-")&&d.substr(0,i).toLowerCase()===a&&e(l)}):function(l){const d=s.getAttributeValue(l,r);return d!=null&&(d.length===i||d.charAt(i)==="-")&&d.substr(0,i)===a&&e(l)}},element(e,t,n){const{adapter:s}=n,{name:r,value:a}=t;if(/\s/.test(a))return w.falseFunc;const i=new RegExp(`(?:^|\\s)${Gr(a)}(?:$|\\s)`,ye(t,n)?"i":"");return function(l){const d=s.getAttributeValue(l,r);return d!=null&&d.length>=a.length&&i.test(d)&&e(l)}},exists(e,{name:t},{adapter:n}){return s=>n.hasAttrib(s,t)&&e(s)},start(e,t,n){const{adapter:s}=n,{name:r}=t;let{value:a}=t;const i=a.length;return i===0?w.falseFunc:ye(t,n)?(a=a.toLowerCase(),o=>{const l=s.getAttributeValue(o,r);return l!=null&&l.length>=i&&l.substr(0,i).toLowerCase()===a&&e(o)}):o=>{var l;return!!(!((l=s.getAttributeValue(o,r))===null||l===void 0)&&l.startsWith(a))&&e(o)}},end(e,t,n){const{adapter:s}=n,{name:r}=t;let{value:a}=t;const i=-a.length;return i===0?w.falseFunc:ye(t,n)?(a=a.toLowerCase(),o=>{var l;return((l=s.getAttributeValue(o,r))===null||l===void 0?void 0:l.substr(i).toLowerCase())===a&&e(o)}):o=>{var l;return!!(!((l=s.getAttributeValue(o,r))===null||l===void 0)&&l.endsWith(a))&&e(o)}},any(e,t,n){const{adapter:s}=n,{name:r,value:a}=t;if(a==="")return w.falseFunc;if(ye(t,n)){const i=new RegExp(Gr(a),"i");return function(l){const d=s.getAttributeValue(l,r);return d!=null&&d.length>=a.length&&i.test(d)&&e(l)}}return i=>{var o;return!!(!((o=s.getAttributeValue(i,r))===null||o===void 0)&&o.includes(a))&&e(i)}},not(e,t,n){const{adapter:s}=n,{name:r}=t;let{value:a}=t;return a===""?i=>!!s.getAttributeValue(i,r)&&e(i):ye(t,n)?(a=a.toLowerCase(),i=>{const o=s.getAttributeValue(i,r);return(o==null||o.length!==a.length||o.toLowerCase()!==a)&&e(i)}):i=>s.getAttributeValue(i,r)!==a&&e(i)}},k0=new Set([9,10,12,13,32]),$r=48,w0=57;function B0(e){if(e=e.trim().toLowerCase(),e==="even")return[2,0];if(e==="odd")return[2,1];let t=0,n=0,s=a(),r=i();if(t<e.length&&e.charAt(t)==="n"&&(t++,n=s*(r??1),o(),t<e.length?(s=a(),o(),r=i()):s=r=0),r===null||t<e.length)throw new Error(`n-th rule couldn't be parsed ('${e}')`);return[n,s*r];function a(){return e.charAt(t)==="-"?(t++,-1):(e.charAt(t)==="+"&&t++,1)}function i(){const l=t;let d=0;for(;t<e.length&&e.charCodeAt(t)>=$r&&e.charCodeAt(t)<=w0;)d=d*10+(e.charCodeAt(t)-$r),t++;return t===l?null:d}function o(){for(;t<e.length&&k0.has(e.charCodeAt(t));)t++}}function F0(e){const t=e[0],n=e[1]-1;if(n<0&&t<=0)return w.falseFunc;if(t===-1)return a=>a<=n;if(t===0)return a=>a===n;if(t===1)return n<0?w.trueFunc:a=>a>=n;const s=Math.abs(t),r=(n%s+s)%s;return t>1?a=>a>=n&&a%s===r:a=>a<=n&&a%s===r}function Gt(e){return F0(B0(e))}function $t(e,t){return n=>{const s=t.getParent(n);return s!=null&&t.isTag(s)&&e(n)}}const us={contains(e,t,{adapter:n}){return function(r){return e(r)&&n.getText(r).includes(t)}},icontains(e,t,{adapter:n}){const s=t.toLowerCase();return function(a){return e(a)&&n.getText(a).toLowerCase().includes(s)}},"nth-child"(e,t,{adapter:n,equals:s}){const r=Gt(t);return r===w.falseFunc?w.falseFunc:r===w.trueFunc?$t(e,n):function(i){const o=n.getSiblings(i);let l=0;for(let d=0;d<o.length&&!s(i,o[d]);d++)n.isTag(o[d])&&l++;return r(l)&&e(i)}},"nth-last-child"(e,t,{adapter:n,equals:s}){const r=Gt(t);return r===w.falseFunc?w.falseFunc:r===w.trueFunc?$t(e,n):function(i){const o=n.getSiblings(i);let l=0;for(let d=o.length-1;d>=0&&!s(i,o[d]);d--)n.isTag(o[d])&&l++;return r(l)&&e(i)}},"nth-of-type"(e,t,{adapter:n,equals:s}){const r=Gt(t);return r===w.falseFunc?w.falseFunc:r===w.trueFunc?$t(e,n):function(i){const o=n.getSiblings(i);let l=0;for(let d=0;d<o.length;d++){const f=o[d];if(s(i,f))break;n.isTag(f)&&n.getName(f)===n.getName(i)&&l++}return r(l)&&e(i)}},"nth-last-of-type"(e,t,{adapter:n,equals:s}){const r=Gt(t);return r===w.falseFunc?w.falseFunc:r===w.trueFunc?$t(e,n):function(i){const o=n.getSiblings(i);let l=0;for(let d=o.length-1;d>=0;d--){const f=o[d];if(s(i,f))break;n.isTag(f)&&n.getName(f)===n.getName(i)&&l++}return r(l)&&e(i)}},root(e,t,{adapter:n}){return s=>{const r=n.getParent(s);return(r==null||!n.isTag(r))&&e(s)}},scope(e,t,n,s){const{equals:r}=n;return!s||s.length===0?us.root(e,t,n):s.length===1?a=>r(s[0],a)&&e(a):a=>s.includes(a)&&e(a)},hover:qn("isHovered"),visited:qn("isVisited"),active:qn("isActive")};function qn(e){return function(n,s,{adapter:r}){const a=r[e];return typeof a!="function"?w.falseFunc:function(o){return a(o)&&n(o)}}}const Qr={empty(e,{adapter:t}){return!t.getChildren(e).some(n=>t.isTag(n)||t.getText(n)!=="")},"first-child"(e,{adapter:t,equals:n}){if(t.prevElementSibling)return t.prevElementSibling(e)==null;const s=t.getSiblings(e).find(r=>t.isTag(r));return s!=null&&n(e,s)},"last-child"(e,{adapter:t,equals:n}){const s=t.getSiblings(e);for(let r=s.length-1;r>=0;r--){if(n(e,s[r]))return!0;if(t.isTag(s[r]))break}return!1},"first-of-type"(e,{adapter:t,equals:n}){const s=t.getSiblings(e),r=t.getName(e);for(let a=0;a<s.length;a++){const i=s[a];if(n(e,i))return!0;if(t.isTag(i)&&t.getName(i)===r)break}return!1},"last-of-type"(e,{adapter:t,equals:n}){const s=t.getSiblings(e),r=t.getName(e);for(let a=s.length-1;a>=0;a--){const i=s[a];if(n(e,i))return!0;if(t.isTag(i)&&t.getName(i)===r)break}return!1},"only-of-type"(e,{adapter:t,equals:n}){const s=t.getName(e);return t.getSiblings(e).every(r=>n(e,r)||!t.isTag(r)||t.getName(r)!==s)},"only-child"(e,{adapter:t,equals:n}){return t.getSiblings(e).every(s=>n(e,s)||!t.isTag(s))}};function zr(e,t,n,s){if(n===null){if(e.length>s)throw new Error(`Pseudo-class :${t} requires an argument`)}else if(e.length===s)throw new Error(`Pseudo-class :${t} doesn't have any arguments`)}const U0={"any-link":":is(a, area, link)[href]",link:":any-link:not(:visited)",disabled:`:is(
        :is(button, input, select, textarea, optgroup, option)[disabled],
        optgroup[disabled] > option,
        fieldset[disabled]:not(fieldset[disabled] legend:first-of-type *)
    )`,enabled:":not(:disabled)",checked:":is(:is(input[type=radio], input[type=checkbox])[checked], option:selected)",required:":is(input, select, textarea)[required]",optional:":is(input, select, textarea):not([required])",selected:"option:is([selected], select:not([multiple]):not(:has(> option[selected])) > :first-of-type)",checkbox:"[type=checkbox]",file:"[type=file]",password:"[type=password]",radio:"[type=radio]",reset:"[type=reset]",image:"[type=image]",submit:"[type=submit]",parent:":not(:empty)",header:":is(h1, h2, h3, h4, h5, h6)",button:":is(button, input[type=button])",input:":is(input, textarea, select, button)",text:"input:is(:not([type!='']), [type=text])"},ca={};function v0(e,t){return e===w.falseFunc?w.falseFunc:n=>t.isTag(n)&&e(n)}function la(e,t){const n=t.getSiblings(e);if(n.length<=1)return[];const s=n.indexOf(e);return s<0||s===n.length-1?[]:n.slice(s+1).filter(t.isTag)}function as(e){return{xmlMode:!!e.xmlMode,lowerCaseAttributeNames:!!e.lowerCaseAttributeNames,lowerCaseTags:!!e.lowerCaseTags,quirksMode:!!e.quirksMode,cacheResults:!!e.cacheResults,pseudos:e.pseudos,adapter:e.adapter,equals:e.equals}}const Yn=(e,t,n,s,r)=>{const a=r(t,as(n),s);return a===w.trueFunc?e:a===w.falseFunc?w.falseFunc:i=>a(i)&&e(i)},Wn={is:Yn,matches:Yn,where:Yn,not(e,t,n,s,r){const a=r(t,as(n),s);return a===w.falseFunc?e:a===w.trueFunc?w.falseFunc:i=>!a(i)&&e(i)},has(e,t,n,s,r){const{adapter:a}=n,i=as(n);i.relativeSelector=!0;const o=t.some(f=>f.some(ks))?[ca]:void 0,l=r(t,i,o);if(l===w.falseFunc)return w.falseFunc;const d=v0(l,a);if(o&&l!==w.trueFunc){const{shouldTestNextSiblings:f=!1}=l;return T=>{if(!e(T))return!1;o[0]=T;const p=a.getChildren(T),_=f?[...p,...la(T,a)]:p;return a.existsOne(d,_)}}return f=>e(f)&&a.existsOne(d,a.getChildren(f))}};function H0(e,t,n,s,r){var a;const{name:i,data:o}=t;if(Array.isArray(o)){if(!(i in Wn))throw new Error(`Unknown pseudo-class :${i}(${o})`);return Wn[i](e,o,n,s,r)}const l=(a=n.pseudos)===null||a===void 0?void 0:a[i],d=typeof l=="string"?l:U0[i];if(typeof d=="string"){if(o!=null)throw new Error(`Pseudo ${i} doesn't have any arguments`);const f=Cn(d);return Wn.is(e,f,n,s,r)}if(typeof l=="function")return zr(l,i,o,1),f=>l(f,o)&&e(f);if(i in us)return us[i](e,o,n,s);if(i in Qr){const f=Qr[i];return zr(f,i,o,2),T=>f(T,n,o)&&e(T)}throw new Error(`Unknown pseudo-class :${i}`)}function Vn(e,t){const n=t.getParent(e);return n&&t.isTag(n)?n:null}function q0(e,t,n,s,r){const{adapter:a,equals:i}=n;switch(t.type){case L.PseudoElement:throw new Error("Pseudo-elements are not supported by css-select");case L.ColumnCombinator:throw new Error("Column combinators are not yet supported by css-select");case L.Attribute:{if(t.namespace!=null)throw new Error("Namespaced attributes are not yet supported by css-select");return(!n.xmlMode||n.lowerCaseAttributeNames)&&(t.name=t.name.toLowerCase()),M0[t.action](e,t,n)}case L.Pseudo:return H0(e,t,n,s,r);case L.Tag:{if(t.namespace!=null)throw new Error("Namespaced tag names are not yet supported by css-select");let{name:o}=t;return(!n.xmlMode||n.lowerCaseTags)&&(o=o.toLowerCase()),function(d){return a.getName(d)===o&&e(d)}}case L.Descendant:{if(n.cacheResults===!1||typeof WeakSet>"u")return function(d){let f=d;for(;f=Vn(f,a);)if(e(f))return!0;return!1};const o=new WeakSet;return function(d){let f=d;for(;f=Vn(f,a);)if(!o.has(f)){if(a.isTag(f)&&e(f))return!0;o.add(f)}return!1}}case"_flexibleDescendant":return function(l){let d=l;do if(e(d))return!0;while(d=Vn(d,a));return!1};case L.Parent:return function(l){return a.getChildren(l).some(d=>a.isTag(d)&&e(d))};case L.Child:return function(l){const d=a.getParent(l);return d!=null&&a.isTag(d)&&e(d)};case L.Sibling:return function(l){const d=a.getSiblings(l);for(let f=0;f<d.length;f++){const T=d[f];if(i(l,T))break;if(a.isTag(T)&&e(T))return!0}return!1};case L.Adjacent:return a.prevElementSibling?function(l){const d=a.prevElementSibling(l);return d!=null&&e(d)}:function(l){const d=a.getSiblings(l);let f;for(let T=0;T<d.length;T++){const p=d[T];if(i(l,p))break;a.isTag(p)&&(f=p)}return!!f&&e(f)};case L.Universal:{if(t.namespace!=null&&t.namespace!=="*")throw new Error("Namespaced universal selectors are not yet supported by css-select");return e}}}function da(e){return e.type===L.Pseudo&&(e.name==="scope"||Array.isArray(e.data)&&e.data.some(t=>t.some(da)))}const Y0={type:L.Descendant},W0={type:"_flexibleDescendant"},V0={type:L.Pseudo,name:"scope",data:null};function j0(e,{adapter:t},n){const s=!!n?.every(r=>{const a=t.isTag(r)&&t.getParent(r);return r===ca||a&&t.isTag(a)});for(const r of e){if(!(r.length>0&&ks(r[0])&&r[0].type!==L.Descendant))if(s&&!r.some(da))r.unshift(Y0);else continue;r.unshift(V0)}}function ha(e,t,n){var s;e.forEach(x0),n=(s=t.context)!==null&&s!==void 0?s:n;const r=Array.isArray(n),a=n&&(Array.isArray(n)?n:[n]);if(t.relativeSelector!==!1)j0(e,t,a);else if(e.some(l=>l.length>0&&ks(l[0])))throw new Error("Relative selectors are not allowed when the `relativeSelector` option is disabled");let i=!1;const o=e.map(l=>{if(l.length>=2){const[d,f]=l;d.type!==L.Pseudo||d.name!=="scope"||(r&&f.type===L.Descendant?l[1]=W0:(f.type===L.Adjacent||f.type===L.Sibling)&&(i=!0))}return G0(l,t,a)}).reduce($0,w.falseFunc);return o.shouldTestNextSiblings=i,o}function G0(e,t,n){var s;return e.reduce((r,a)=>r===w.falseFunc?w.falseFunc:q0(r,a,t,n,ha),(s=t.rootFunc)!==null&&s!==void 0?s:w.trueFunc)}function $0(e,t){return t===w.falseFunc||e===w.trueFunc?e:e===w.falseFunc||t===w.trueFunc?t:function(s){return e(s)||t(s)}}const fa=(e,t)=>e===t,Q0={adapter:In,equals:fa};function z0(e){var t,n,s,r;const a=e??Q0;return(t=a.adapter)!==null&&t!==void 0||(a.adapter=In),(n=a.equals)!==null&&n!==void 0||(a.equals=(r=(s=a.adapter)===null||s===void 0?void 0:s.equals)!==null&&r!==void 0?r:fa),a}function K0(e){return function(n,s,r){const a=z0(s);return e(n,a,r)}}const ws=K0(ha);function Ea(e,t,n=!1){return n&&(e=X0(e,t)),Array.isArray(e)?t.removeSubsets(e):t.getChildren(e)}function X0(e,t){const n=Array.isArray(e)?e.slice(0):[e],s=n.length;for(let r=0;r<s;r++){const a=la(n[r],t);n.push(...a)}return n}const J0=new Set(["first","last","eq","gt","nth","lt","even","odd"]);function on(e){return e.type!=="pseudo"?!1:J0.has(e.name)?!0:e.name==="not"&&Array.isArray(e.data)?e.data.some(t=>t.some(on)):!1}function Z0(e,t,n){const s=t!=null?parseInt(t,10):NaN;switch(e){case"first":return 1;case"nth":case"eq":return isFinite(s)?s>=0?s+1:1/0:0;case"lt":return isFinite(s)?s>=0?Math.min(s,n):1/0:0;case"gt":return isFinite(s)?1/0:0;case"odd":return 2*n;case"even":return 2*n-1;case"last":case"not":return 1/0}}function el(e){for(;e.parent;)e=e.parent;return e}function Bs(e){const t=[],n=[];for(const s of e)s.some(on)?t.push(s):n.push(s);return[n,t]}const tl={type:L.Universal,namespace:null},nl={type:L.Pseudo,name:"scope",data:null};function ma(e,t,n={}){return Ta([e],t,n)}function Ta(e,t,n={}){if(typeof t=="function")return e.some(t);const[s,r]=Bs(Cn(t));return s.length>0&&e.some(ws(s,n))||r.some(a=>_a(a,e,n).length>0)}function sl(e,t,n,s){const r=typeof n=="string"?parseInt(n,10):NaN;switch(e){case"first":case"lt":return t;case"last":return t.length>0?[t[t.length-1]]:t;case"nth":case"eq":return isFinite(r)&&Math.abs(r)<t.length?[r<0?t[t.length+r]:t[r]]:[];case"gt":return isFinite(r)?t.slice(r+1):[];case"even":return t.filter((a,i)=>i%2===0);case"odd":return t.filter((a,i)=>i%2===1);case"not":{const a=new Set(pa(n,t,s));return t.filter(i=>!a.has(i))}}}function ba(e,t,n={}){return pa(Cn(e),t,n)}function pa(e,t,n){if(t.length===0)return[];const[s,r]=Bs(e);let a;if(s.length){const i=os(t,s,n);if(r.length===0)return i;i.length&&(a=new Set(i))}for(let i=0;i<r.length&&a?.size!==t.length;i++){const o=r[i];if((a?t.filter(f=>y(f)&&!a.has(f)):t).length===0)break;const d=_a(o,t,n);if(d.length)if(a)d.forEach(f=>a.add(f));else{if(i===r.length-1)return d;a=new Set(d)}}return typeof a<"u"?a.size===t.length?t:t.filter(i=>a.has(i)):[]}function _a(e,t,n){var s;if(e.some(Tt)){const r=(s=n.root)!==null&&s!==void 0?s:el(t[0]),a={...n,context:t,relativeSelector:!1};return e.push(nl),cn(r,e,a,!0,t.length)}return cn(t,e,n,!1,t.length)}function rl(e,t,n={},s=1/0){if(typeof e=="function")return ga(t,e);const[r,a]=Bs(Cn(e)),i=a.map(o=>cn(t,o,n,!0,s));return r.length&&i.push(is(t,r,n,s)),i.length===0?[]:i.length===1?i[0]:nt(i.reduce((o,l)=>[...o,...l]))}function cn(e,t,n,s,r){const a=t.findIndex(on),i=t.slice(0,a),o=t[a],l=t.length-1===a?r:1/0,d=Z0(o.name,o.data,l);if(d===0)return[];const T=(i.length===0&&!Array.isArray(e)?Sn(e).filter(y):i.length===0?(Array.isArray(e)?e:[e]).filter(y):s||i.some(Tt)?is(e,[i],n,d):os(e,[i],n)).slice(0,d);let p=sl(o.name,T,o.data,n);if(p.length===0||t.length===a+1)return p;const _=t.slice(a+1),m=_.some(Tt);if(m){if(Tt(_[0])){const{type:g}=_[0];(g===L.Sibling||g===L.Adjacent)&&(p=Ea(p,In,!0)),_.unshift(tl)}n={...n,relativeSelector:!1,rootFunc:g=>p.includes(g)}}else n.rootFunc&&n.rootFunc!==an.trueFunc&&(n={...n,rootFunc:an.trueFunc});return _.some(on)?cn(p,_,n,!1,r):m?is(p,[_],n,r):os(p,[_],n)}function is(e,t,n,s){const r=ws(t,n,e);return ga(e,r,s)}function ga(e,t,n=1/0){const s=Ea(e,In,t.shouldTestNextSiblings);return xs(r=>y(r)&&t(r),s,!0,n)}function os(e,t,n){const s=(Array.isArray(e)?e:[e]).filter(y);if(s.length===0)return s;const r=ws(t,n);return r===an.trueFunc?s:s.filter(r)}const ul=/^\s*[+~]/;function al(e){if(!e)return this._make([]);if(typeof e!="string"){const t=me(e)?e.toArray():[e],n=this.toArray();return this._make(t.filter(s=>n.some(r=>Ju(r,s))))}return this._findBySelector(e,Number.POSITIVE_INFINITY)}function il(e,t){var n;const s=this.toArray(),r=ul.test(e)?s:this.children().toArray(),a={context:s,root:(n=this._root)===null||n===void 0?void 0:n[0],xmlMode:this.options.xmlMode,lowerCaseTags:this.options.lowerCaseTags,lowerCaseAttributeNames:this.options.lowerCaseAttributeNames,pseudos:this.options.pseudos,quirksMode:this.options.quirksMode};return this._make(rl(e,r,a,t))}function Fs(e){return function(t,...n){return function(s){var r;let a=e(t,this);return s&&(a=Hs(a,s,this.options.xmlMode,(r=this._root)===null||r===void 0?void 0:r[0])),this._make(this.length>1&&a.length>1?n.reduce((i,o)=>o(i),a):a)}}}const Mt=Fs((e,t)=>{let n=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r.length>0&&(n=n.concat(r))}return n}),Us=Fs((e,t)=>{const n=[];for(let s=0;s<t.length;s++){const r=e(t[s]);r!==null&&n.push(r)}return n});function vs(e,...t){let n=null;const s=Fs((r,a)=>{const i=[];return q(a,o=>{for(let l;(l=r(o))&&!n?.(l,i.length);o=l)i.push(l)}),i})(e,...t);return function(r,a){n=typeof r=="string"?o=>ma(o,r,this.options):r?kt(r):null;const i=s.call(this,a);return n=null,i}}function st(e){return e.length>1?Array.from(new Set(e)):e}const ol=Us(({parent:e})=>e&&!Se(e)?e:null,st),cl=Mt(e=>{const t=[];for(;e.parent&&!Se(e.parent);)t.push(e.parent),e=e.parent;return t},nt,e=>e.reverse()),ll=vs(({parent:e})=>e&&!Se(e)?e:null,nt,e=>e.reverse());function dl(e){var t;const n=[];if(!e)return this._make(n);const s={xmlMode:this.options.xmlMode,root:(t=this._root)===null||t===void 0?void 0:t[0]},r=typeof e=="string"?a=>ma(a,e,s):kt(e);return q(this,a=>{for(a&&!Se(a)&&!y(a)&&(a=a.parent);a&&y(a);){if(r(a,0)){n.includes(a)||n.push(a);break}a=a.parent}}),this._make(n)}const hl=Us(e=>Ds(e)),fl=Mt(e=>{const t=[];for(;e.next;)e=e.next,y(e)&&t.push(e);return t},st),El=vs(e=>Ds(e),st),ml=Us(e=>Ls(e)),Tl=Mt(e=>{const t=[];for(;e.prev;)e=e.prev,y(e)&&t.push(e);return t},st),bl=vs(e=>Ls(e),st),pl=Mt(e=>Gu(e).filter(t=>y(t)&&t!==e),nt),_l=Mt(e=>Sn(e).filter(y),st);function gl(){const e=this.toArray().reduce((t,n)=>W(n)?t.concat(n.children):t,[]);return this._make(e)}function Al(e){let t=0;const n=this.length;for(;t<n&&e.call(this[t],t,this[t])!==!1;)++t;return this}function Nl(e){let t=[];for(let n=0;n<this.length;n++){const s=this[n],r=e.call(s,n,s);r!=null&&(t=t.concat(r))}return this._make(t)}function kt(e){return typeof e=="function"?(t,n)=>e.call(t,n,t):me(e)?t=>Array.prototype.includes.call(e,t):function(t){return e===t}}function Sl(e){var t;return this._make(Hs(this.toArray(),e,this.options.xmlMode,(t=this._root)===null||t===void 0?void 0:t[0]))}function Hs(e,t,n,s){return typeof t=="string"?ba(t,e,{xmlMode:n,root:s}):e.filter(kt(t))}function Il(e){const t=this.toArray();return typeof e=="string"?Ta(t.filter(y),e,this.options):e?t.some(kt(e)):!1}function Cl(e){let t=this.toArray();if(typeof e=="string"){const n=new Set(ba(e,t,this.options));t=t.filter(s=>!n.has(s))}else{const n=kt(e);t=t.filter((s,r)=>!n(s,r))}return this._make(t)}function Ol(e){return this.filter(typeof e=="string"?`:has(${e})`:(t,n)=>this._make(n).find(e).length>0)}function Rl(){return this.length>1?this._make(this[0]):this}function Dl(){return this.length>0?this._make(this[this.length-1]):this}function Ll(e){var t;return e=+e,e===0&&this.length<=1?this:(e<0&&(e=this.length+e),this._make((t=this[e])!==null&&t!==void 0?t:[]))}function xl(e){return e==null?this.toArray():this[e<0?this.length+e:e]}function yl(){return Array.prototype.slice.call(this)}function Pl(e){let t,n;return e==null?(t=this.parent().children(),n=this[0]):typeof e=="string"?(t=this._make(e),n=this[0]):(t=this,n=me(e)?e[0]:e),Array.prototype.indexOf.call(t,n)}function Ml(e,t){return this._make(Array.prototype.slice.call(this,e,t))}function kl(){var e;return(e=this.prevObject)!==null&&e!==void 0?e:this._make([])}function wl(e,t){const n=this._make(e,t),s=nt([...this.get(),...n.get()]);return this._make(s)}function Bl(e){return this.prevObject?this.add(e?this.prevObject.filter(e):this.prevObject):this}const Fl=Object.freeze(Object.defineProperty({__proto__:null,_findBySelector:il,add:wl,addBack:Bl,children:_l,closest:dl,contents:gl,each:Al,end:kl,eq:Ll,filter:Sl,filterArray:Hs,find:al,first:Rl,get:xl,has:Ol,index:Pl,is:Il,last:Dl,map:Nl,next:hl,nextAll:fl,nextUntil:El,not:Cl,parent:ol,parents:cl,parentsUntil:ll,prev:ml,prevAll:Tl,prevUntil:bl,siblings:pl,slice:Ml,toArray:yl},Symbol.toStringTag,{value:"Module"}));function Ul(e){return function(n,s,r,a){if(typeof Buffer<"u"&&Buffer.isBuffer(n)&&(n=n.toString()),typeof n=="string")return e(n,s,r,a);const i=n;if(!Array.isArray(i)&&Se(i))return i;const o=new Ue([]);return ve(i,o),o}}function ve(e,t){const n=Array.isArray(e)?e:[e];t?t.children=n:t=null;for(let s=0;s<n.length;s++){const r=n[s];r.parent&&r.parent.children!==n&&He(r),t?(r.prev=n[s-1]||null,r.next=n[s+1]||null):r.prev=r.next=null,r.parent=t}return t}function vl(e,t){if(e==null)return[];if(typeof e=="string")return this._parse(e,this.options,!1,null).children.slice(0);if("length"in e){if(e.length===1)return this._makeDomArray(e[0],t);const n=[];for(let s=0;s<e.length;s++){const r=e[s];if(typeof r=="object"){if(r==null)continue;if(!("length"in r)){n.push(t?St(r,!0):r);continue}}n.push(...this._makeDomArray(r,t))}return n}return[t?St(e,!0):e]}function Aa(e){return function(...t){const n=this.length-1;return q(this,(s,r)=>{if(!W(s))return;const a=typeof t[0]=="function"?t[0].call(s,r,this._render(s.children)):t,i=this._makeDomArray(a,r<n);e(i,s.children,s)})}}function Ie(e,t,n,s,r){var a,i;const o=[t,n,...s],l=t===0?null:e[t-1],d=t+n>=e.length?null:e[t+n];for(let f=0;f<s.length;++f){const T=s[f],p=T.parent;if(p){const m=p.children.indexOf(T);m!==-1&&(p.children.splice(m,1),r===p&&t>m&&o[0]--)}T.parent=r,T.prev&&(T.prev.next=(a=T.next)!==null&&a!==void 0?a:null),T.next&&(T.next.prev=(i=T.prev)!==null&&i!==void 0?i:null),T.prev=f===0?l:s[f-1],T.next=f===s.length-1?d:s[f+1]}return l&&(l.next=s[0]),d&&(d.prev=s[s.length-1]),e.splice(...o)}function Hl(e){return(me(e)?e:this._make(e)).append(this),this}function ql(e){return(me(e)?e:this._make(e)).prepend(this),this}const Yl=Aa((e,t,n)=>{Ie(t,t.length,0,e,n)}),Wl=Aa((e,t,n)=>{Ie(t,0,0,e,n)});function Na(e){return function(t){const n=this.length-1,s=this.parents().last();for(let r=0;r<this.length;r++){const a=this[r],i=typeof t=="function"?t.call(a,r,a):typeof t=="string"&&!ns(t)?s.find(t).clone():t,[o]=this._makeDomArray(i,r<n);if(!o||!W(o))continue;let l=o,d=0;for(;d<l.children.length;){const f=l.children[d];y(f)?(l=f,d=0):d++}e(a,l,[o])}return this}}const Vl=Na((e,t,n)=>{const{parent:s}=e;if(!s)return;const r=s.children,a=r.indexOf(e);ve([e],t),Ie(r,a,0,n,s)}),jl=Na((e,t,n)=>{W(e)&&(ve(e.children,t),ve(n,e))});function Gl(e){return this.parent(e).not("body").each((t,n)=>{this._make(n).replaceWith(n.children)}),this}function $l(e){const t=this[0];if(t){const n=this._make(typeof e=="function"?e.call(t,0,t):e).insertBefore(t);let s;for(let a=0;a<n.length;a++)n[a].type===Zn&&(s=n[a]);let r=0;for(;s&&r<s.children.length;){const a=s.children[r];a.type===Zn?(s=a,r=0):r++}s&&this._make(s).append(this)}return this}function Ql(...e){const t=this.length-1;return q(this,(n,s)=>{if(!W(n)||!n.parent)return;const r=n.parent.children,a=r.indexOf(n);if(a===-1)return;const i=typeof e[0]=="function"?e[0].call(n,s,this._render(n.children)):e,o=this._makeDomArray(i,s<t);Ie(r,a+1,0,o,n.parent)})}function zl(e){typeof e=="string"&&(e=this._make(e)),this.remove();const t=[];for(const n of this._makeDomArray(e)){const s=this.clone().toArray(),{parent:r}=n;if(!r)continue;const a=r.children,i=a.indexOf(n);i!==-1&&(Ie(a,i+1,0,s,r),t.push(...s))}return this._make(t)}function Kl(...e){const t=this.length-1;return q(this,(n,s)=>{if(!W(n)||!n.parent)return;const r=n.parent.children,a=r.indexOf(n);if(a===-1)return;const i=typeof e[0]=="function"?e[0].call(n,s,this._render(n.children)):e,o=this._makeDomArray(i,s<t);Ie(r,a,0,o,n.parent)})}function Xl(e){const t=this._make(e);this.remove();const n=[];return q(t,s=>{const r=this.clone().toArray(),{parent:a}=s;if(!a)return;const i=a.children,o=i.indexOf(s);o!==-1&&(Ie(i,o,0,r,a),n.push(...r))}),this._make(n)}function Jl(e){const t=e?this.filter(e):this;return q(t,n=>{He(n),n.prev=n.next=n.parent=null}),this}function Zl(e){return q(this,(t,n)=>{const{parent:s}=t;if(!s)return;const r=s.children,a=typeof e=="function"?e.call(t,n,t):e,i=this._makeDomArray(a);ve(i,null);const o=r.indexOf(t);Ie(r,o,1,i,s),i.includes(t)||(t.parent=t.prev=t.next=null)})}function ed(){return q(this,e=>{if(W(e)){for(const t of e.children)t.next=t.prev=t.parent=null;e.children.length=0}})}function td(e){if(e===void 0){const t=this[0];return!t||!W(t)?null:this._render(t.children)}return q(this,t=>{if(!W(t))return;for(const s of t.children)s.next=s.prev=s.parent=null;const n=me(e)?e.toArray():this._parse(`${e}`,this.options,!1,t).children;ve(n,t)})}function nd(){return this._render(this)}function sd(e){return e===void 0?It(this):typeof e=="function"?q(this,(t,n)=>this._make(t).text(e.call(t,n,It([t])))):q(this,t=>{if(!W(t))return;for(const s of t.children)s.next=s.prev=s.parent=null;const n=new Nt(`${e}`);ve(n,t)})}function rd(){const e=Array.prototype.map.call(this.get(),n=>St(n,!0)),t=new Ue(e);for(const n of e)n.parent=t;return this._make(e)}const ud=Object.freeze(Object.defineProperty({__proto__:null,_makeDomArray:vl,after:Ql,append:Yl,appendTo:Hl,before:Kl,clone:rd,empty:ed,html:td,insertAfter:zl,insertBefore:Xl,prepend:Wl,prependTo:ql,remove:Jl,replaceWith:Zl,text:sd,toString:nd,unwrap:Gl,wrap:Vl,wrapAll:$l,wrapInner:jl},Symbol.toStringTag,{value:"Module"}));function ad(e,t){if(e!=null&&t!=null||typeof e=="object"&&!Array.isArray(e))return q(this,(n,s)=>{y(n)&&Sa(n,e,t,s)});if(this.length!==0)return Ia(this[0],e)}function Sa(e,t,n,s){if(typeof t=="string"){const r=Ia(e),a=typeof n=="function"?n.call(e,s,r[t]):n;a===""?delete r[t]:a!=null&&(r[t]=a),e.attribs.style=id(r)}else if(typeof t=="object"){const r=Object.keys(t);for(let a=0;a<r.length;a++){const i=r[a];Sa(e,i,t[i],a)}}}function Ia(e,t){if(!e||!y(e))return;const n=od(e.attribs.style);if(typeof t=="string")return n[t];if(Array.isArray(t)){const s={};for(const r of t)n[r]!=null&&(s[r]=n[r]);return s}return n}function id(e){return Object.keys(e).reduce((t,n)=>`${t}${t?" ":""}${n}: ${e[n]};`,"")}function od(e){if(e=(e||"").trim(),!e)return{};const t={};let n;for(const s of e.split(";")){const r=s.indexOf(":");if(r<1||r===s.length-1){const a=s.trimEnd();a.length>0&&n!==void 0&&(t[n]+=`;${a}`)}else n=s.slice(0,r).trim(),t[n]=s.slice(r+1).trim()}return t}const cd=Object.freeze(Object.defineProperty({__proto__:null,css:ad},Symbol.toStringTag,{value:"Module"})),Kr="input,select,textarea,keygen",ld=/%20/g,Xr=/\r?\n/g;function dd(){return this.serializeArray().map(n=>`${encodeURIComponent(n.name)}=${encodeURIComponent(n.value)}`).join("&").replace(ld,"+")}function hd(){return this.map((e,t)=>{const n=this._make(t);return y(t)&&t.name==="form"?n.find(Kr).toArray():n.filter(Kr).toArray()}).filter('[name!=""]:enabled:not(:submit, :button, :image, :reset, :file):matches([checked], :not(:checkbox, :radio))').map((e,t)=>{var n;const s=this._make(t),r=s.attr("name"),a=(n=s.val())!==null&&n!==void 0?n:"";return Array.isArray(a)?a.map(i=>({name:r,value:i.replace(Xr,`\r
`)})):{name:r,value:a.replace(Xr,`\r
`)}}).toArray()}const fd=Object.freeze(Object.defineProperty({__proto__:null,serialize:dd,serializeArray:hd},Symbol.toStringTag,{value:"Module"}));function Ed(e){var t;return typeof e=="string"?{selector:e,value:"textContent"}:{selector:e.selector,value:(t=e.value)!==null&&t!==void 0?t:"textContent"}}function md(e){const t={};for(const n in e){const s=e[n],r=Array.isArray(s),{selector:a,value:i}=Ed(r?s[0]:s),o=typeof i=="function"?i:typeof i=="string"?l=>this._make(l).prop(i):l=>this._make(l).extract(i);if(r)t[n]=this._findBySelector(a,Number.POSITIVE_INFINITY).map((l,d)=>o(d,n,t)).get();else{const l=this._findBySelector(a,1);t[n]=l.length>0?o(l[0],n,t):void 0}}return t}const Td=Object.freeze(Object.defineProperty({__proto__:null,extract:md},Symbol.toStringTag,{value:"Module"}));class wt{constructor(t,n,s){if(this.length=0,this.options=s,this._root=n,t){for(let r=0;r<t.length;r++)this[r]=t[r];this.length=t.length}}}wt.prototype.cheerio="[cheerio object]";wt.prototype.splice=Array.prototype.splice;wt.prototype[Symbol.iterator]=Array.prototype[Symbol.iterator];Object.assign(wt.prototype,N0,Fl,ud,cd,fd,Td);function bd(e,t){return function n(s,r,a=!0){if(s==null)throw new Error("cheerio.load() expects a string");const i=ts(r),o=e(s,i,a,null);class l extends wt{_make(T,p){const _=d(T,p);return _.prevObject=this,_}_parse(T,p,_,m){return e(T,p,_,m)}_render(T){return t(T,this.options)}}function d(f,T,p=o,_){if(f&&me(f))return f;const m=ts(_,i),g=typeof p=="string"?[e(p,m,!1,null)]:"length"in p?p:[p],S=me(g)?g:new l(g,null,m);if(S._root=S,!f)return new l(void 0,S,m);const R=typeof f=="string"&&ns(f)?e(f,m,!1,null).children:pd(f)?[f]:Array.isArray(f)?f:void 0,D=new l(R,S,m);if(R)return D;if(typeof f!="string")throw new TypeError("Unexpected type of selector");let M=f;const k=T?typeof T=="string"?ns(T)?new l([e(T,m,!1,null)],S,m):(M=`${T} ${M}`,S):me(T)?T:new l(Array.isArray(T)?T:[T],S,m):S;return k?k.find(M):D}return Object.assign(d,zc,{load:n,_root:o,_options:i,fn:l.prototype,prototype:l.prototype}),d}}function pd(e){return!!e.name||e.type===Ns||e.type===Uu||e.type===vu}const _d=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),v="";var c;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z"})(c||(c={}));const J={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function Ca(e){return e>=55296&&e<=57343}function gd(e){return e>=56320&&e<=57343}function Ad(e,t){return(e-55296)*1024+9216+t}function Oa(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function Ra(e){return e>=64976&&e<=65007||_d.has(e)}var N;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(N||(N={}));const Nd=65536;class Sd{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Nd,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t,n){const{line:s,col:r,offset:a}=this,i=r+n,o=a+n;return{code:t,startLine:s,endLine:s,startCol:i,endCol:i,startOffset:o,endOffset:o}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t,0)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(gd(n))return this.pos++,this._addGap(),Ad(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,c.EOF;return this._err(N.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let s=0;s<t.length;s++)if((this.html.charCodeAt(this.pos+s)|32)!==t.charCodeAt(s))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,c.EOF;const s=this.html.charCodeAt(n);return s===c.CARRIAGE_RETURN?c.LINE_FEED:s}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,c.EOF;let t=this.html.charCodeAt(this.pos);return t===c.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,c.LINE_FEED):t===c.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,Ca(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===c.LINE_FEED||t===c.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){Oa(t)?this._err(N.controlCharacterInInputStream):Ra(t)&&this._err(N.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var B;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(B||(B={}));function Da(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}var I;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(I||(I={}));var Be;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(Be||(Be={}));var se;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(se||(se={}));var b;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SEARCH="search",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(b||(b={}));var u;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SEARCH=94]="SEARCH",e[e.SECTION=95]="SECTION",e[e.SELECT=96]="SELECT",e[e.SOURCE=97]="SOURCE",e[e.SMALL=98]="SMALL",e[e.SPAN=99]="SPAN",e[e.STRIKE=100]="STRIKE",e[e.STRONG=101]="STRONG",e[e.STYLE=102]="STYLE",e[e.SUB=103]="SUB",e[e.SUMMARY=104]="SUMMARY",e[e.SUP=105]="SUP",e[e.TABLE=106]="TABLE",e[e.TBODY=107]="TBODY",e[e.TEMPLATE=108]="TEMPLATE",e[e.TEXTAREA=109]="TEXTAREA",e[e.TFOOT=110]="TFOOT",e[e.TD=111]="TD",e[e.TH=112]="TH",e[e.THEAD=113]="THEAD",e[e.TITLE=114]="TITLE",e[e.TR=115]="TR",e[e.TRACK=116]="TRACK",e[e.TT=117]="TT",e[e.U=118]="U",e[e.UL=119]="UL",e[e.SVG=120]="SVG",e[e.VAR=121]="VAR",e[e.WBR=122]="WBR",e[e.XMP=123]="XMP"})(u||(u={}));const Id=new Map([[b.A,u.A],[b.ADDRESS,u.ADDRESS],[b.ANNOTATION_XML,u.ANNOTATION_XML],[b.APPLET,u.APPLET],[b.AREA,u.AREA],[b.ARTICLE,u.ARTICLE],[b.ASIDE,u.ASIDE],[b.B,u.B],[b.BASE,u.BASE],[b.BASEFONT,u.BASEFONT],[b.BGSOUND,u.BGSOUND],[b.BIG,u.BIG],[b.BLOCKQUOTE,u.BLOCKQUOTE],[b.BODY,u.BODY],[b.BR,u.BR],[b.BUTTON,u.BUTTON],[b.CAPTION,u.CAPTION],[b.CENTER,u.CENTER],[b.CODE,u.CODE],[b.COL,u.COL],[b.COLGROUP,u.COLGROUP],[b.DD,u.DD],[b.DESC,u.DESC],[b.DETAILS,u.DETAILS],[b.DIALOG,u.DIALOG],[b.DIR,u.DIR],[b.DIV,u.DIV],[b.DL,u.DL],[b.DT,u.DT],[b.EM,u.EM],[b.EMBED,u.EMBED],[b.FIELDSET,u.FIELDSET],[b.FIGCAPTION,u.FIGCAPTION],[b.FIGURE,u.FIGURE],[b.FONT,u.FONT],[b.FOOTER,u.FOOTER],[b.FOREIGN_OBJECT,u.FOREIGN_OBJECT],[b.FORM,u.FORM],[b.FRAME,u.FRAME],[b.FRAMESET,u.FRAMESET],[b.H1,u.H1],[b.H2,u.H2],[b.H3,u.H3],[b.H4,u.H4],[b.H5,u.H5],[b.H6,u.H6],[b.HEAD,u.HEAD],[b.HEADER,u.HEADER],[b.HGROUP,u.HGROUP],[b.HR,u.HR],[b.HTML,u.HTML],[b.I,u.I],[b.IMG,u.IMG],[b.IMAGE,u.IMAGE],[b.INPUT,u.INPUT],[b.IFRAME,u.IFRAME],[b.KEYGEN,u.KEYGEN],[b.LABEL,u.LABEL],[b.LI,u.LI],[b.LINK,u.LINK],[b.LISTING,u.LISTING],[b.MAIN,u.MAIN],[b.MALIGNMARK,u.MALIGNMARK],[b.MARQUEE,u.MARQUEE],[b.MATH,u.MATH],[b.MENU,u.MENU],[b.META,u.META],[b.MGLYPH,u.MGLYPH],[b.MI,u.MI],[b.MO,u.MO],[b.MN,u.MN],[b.MS,u.MS],[b.MTEXT,u.MTEXT],[b.NAV,u.NAV],[b.NOBR,u.NOBR],[b.NOFRAMES,u.NOFRAMES],[b.NOEMBED,u.NOEMBED],[b.NOSCRIPT,u.NOSCRIPT],[b.OBJECT,u.OBJECT],[b.OL,u.OL],[b.OPTGROUP,u.OPTGROUP],[b.OPTION,u.OPTION],[b.P,u.P],[b.PARAM,u.PARAM],[b.PLAINTEXT,u.PLAINTEXT],[b.PRE,u.PRE],[b.RB,u.RB],[b.RP,u.RP],[b.RT,u.RT],[b.RTC,u.RTC],[b.RUBY,u.RUBY],[b.S,u.S],[b.SCRIPT,u.SCRIPT],[b.SEARCH,u.SEARCH],[b.SECTION,u.SECTION],[b.SELECT,u.SELECT],[b.SOURCE,u.SOURCE],[b.SMALL,u.SMALL],[b.SPAN,u.SPAN],[b.STRIKE,u.STRIKE],[b.STRONG,u.STRONG],[b.STYLE,u.STYLE],[b.SUB,u.SUB],[b.SUMMARY,u.SUMMARY],[b.SUP,u.SUP],[b.TABLE,u.TABLE],[b.TBODY,u.TBODY],[b.TEMPLATE,u.TEMPLATE],[b.TEXTAREA,u.TEXTAREA],[b.TFOOT,u.TFOOT],[b.TD,u.TD],[b.TH,u.TH],[b.THEAD,u.THEAD],[b.TITLE,u.TITLE],[b.TR,u.TR],[b.TRACK,u.TRACK],[b.TT,u.TT],[b.U,u.U],[b.UL,u.UL],[b.SVG,u.SVG],[b.VAR,u.VAR],[b.WBR,u.WBR],[b.XMP,u.XMP]]);function On(e){var t;return(t=Id.get(e))!==null&&t!==void 0?t:u.UNKNOWN}const O=u,Cd={[I.HTML]:new Set([O.ADDRESS,O.APPLET,O.AREA,O.ARTICLE,O.ASIDE,O.BASE,O.BASEFONT,O.BGSOUND,O.BLOCKQUOTE,O.BODY,O.BR,O.BUTTON,O.CAPTION,O.CENTER,O.COL,O.COLGROUP,O.DD,O.DETAILS,O.DIR,O.DIV,O.DL,O.DT,O.EMBED,O.FIELDSET,O.FIGCAPTION,O.FIGURE,O.FOOTER,O.FORM,O.FRAME,O.FRAMESET,O.H1,O.H2,O.H3,O.H4,O.H5,O.H6,O.HEAD,O.HEADER,O.HGROUP,O.HR,O.HTML,O.IFRAME,O.IMG,O.INPUT,O.LI,O.LINK,O.LISTING,O.MAIN,O.MARQUEE,O.MENU,O.META,O.NAV,O.NOEMBED,O.NOFRAMES,O.NOSCRIPT,O.OBJECT,O.OL,O.P,O.PARAM,O.PLAINTEXT,O.PRE,O.SCRIPT,O.SECTION,O.SELECT,O.SOURCE,O.STYLE,O.SUMMARY,O.TABLE,O.TBODY,O.TD,O.TEMPLATE,O.TEXTAREA,O.TFOOT,O.TH,O.THEAD,O.TITLE,O.TR,O.TRACK,O.UL,O.WBR,O.XMP]),[I.MATHML]:new Set([O.MI,O.MO,O.MN,O.MS,O.MTEXT,O.ANNOTATION_XML]),[I.SVG]:new Set([O.TITLE,O.FOREIGN_OBJECT,O.DESC]),[I.XLINK]:new Set,[I.XML]:new Set,[I.XMLNS]:new Set},cs=new Set([O.H1,O.H2,O.H3,O.H4,O.H5,O.H6]),Od=new Set([b.STYLE,b.SCRIPT,b.XMP,b.IFRAME,b.NOEMBED,b.NOFRAMES,b.PLAINTEXT]);function Rd(e,t){return Od.has(e)||t&&e===b.NOSCRIPT}var h;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=72]="AMBIGUOUS_AMPERSAND"})(h||(h={}));const ee={DATA:h.DATA,RCDATA:h.RCDATA,RAWTEXT:h.RAWTEXT,SCRIPT_DATA:h.SCRIPT_DATA,PLAINTEXT:h.PLAINTEXT,CDATA_SECTION:h.CDATA_SECTION};function Dd(e){return e>=c.DIGIT_0&&e<=c.DIGIT_9}function mt(e){return e>=c.LATIN_CAPITAL_A&&e<=c.LATIN_CAPITAL_Z}function Ld(e){return e>=c.LATIN_SMALL_A&&e<=c.LATIN_SMALL_Z}function _e(e){return Ld(e)||mt(e)}function Jr(e){return _e(e)||Dd(e)}function Qt(e){return e+32}function La(e){return e===c.SPACE||e===c.LINE_FEED||e===c.TABULATION||e===c.FORM_FEED}function Zr(e){return La(e)||e===c.SOLIDUS||e===c.GREATER_THAN_SIGN}function xd(e){return e===c.NULL?N.nullCharacterReference:e>1114111?N.characterReferenceOutsideUnicodeRange:Ca(e)?N.surrogateCharacterReference:Ra(e)?N.noncharacterCharacterReference:Oa(e)||e===c.CARRIAGE_RETURN?N.controlCharacterReference:null}class yd{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=h.DATA,this.returnState=h.DATA,this.entityStartPos=0,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Sd(n),this.currentLocation=this.getCurrentLocation(-1),this.entityDecoder=new ea(Zu,(s,r)=>{this.preprocessor.pos=this.entityStartPos+r-1,this._flushCodePointConsumedAsCharacterReference(s)},n.onParseError?{missingSemicolonAfterCharacterReference:()=>{this._err(N.missingSemicolonAfterCharacterReference,1)},absenceOfDigitsInNumericCharacterReference:s=>{this._err(N.absenceOfDigitsInNumericCharacterReference,this.entityStartPos-this.preprocessor.pos+s)},validateNumericCharacterReference:s=>{const r=xd(s);r&&this._err(r,1)}}:void 0)}_err(t,n=0){var s,r;(r=(s=this.handler).onParseError)===null||r===void 0||r.call(s,this.preprocessor.getError(t,n))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t?.())}write(t,n,s){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||s?.()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this.preprocessor.retreat(this.consumedAfterSnapshot),this.consumedAfterSnapshot=0,this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:B.START_TAG,tagName:"",tagID:u.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:B.END_TAG,tagName:"",tagID:u.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:B.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:B.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const s=this.currentToken;if(Da(s,this.currentAttr.name)===null){if(s.attrs.push(this.currentAttr),s.location&&this.currentLocation){const r=(t=(n=s.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);r[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(N.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=On(t.tagName),t.type===B.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(N.endTagWithAttributes),t.selfClosing&&this._err(N.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case B.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case B.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case B.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:B.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type===t){this.currentCharacterToken.chars+=n;return}else this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();this._createCharacterToken(t,n)}_emitCodePoint(t){const n=La(t)?B.WHITESPACE_CHARACTER:t===c.NULL?B.NULL_CHARACTER:B.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(B.CHARACTER,t)}_startCharacterReference(){this.returnState=this.state,this.state=h.CHARACTER_REFERENCE,this.entityStartPos=this.preprocessor.pos,this.entityDecoder.startEntity(this._isCharacterReferenceInAttribute()?ue.Attribute:ue.Legacy)}_isCharacterReferenceInAttribute(){return this.returnState===h.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===h.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===h.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case h.DATA:{this._stateData(t);break}case h.RCDATA:{this._stateRcdata(t);break}case h.RAWTEXT:{this._stateRawtext(t);break}case h.SCRIPT_DATA:{this._stateScriptData(t);break}case h.PLAINTEXT:{this._statePlaintext(t);break}case h.TAG_OPEN:{this._stateTagOpen(t);break}case h.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case h.TAG_NAME:{this._stateTagName(t);break}case h.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case h.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case h.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case h.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case h.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case h.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case h.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case h.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case h.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case h.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case h.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case h.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case h.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case h.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case h.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case h.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case h.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case h.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case h.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case h.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case h.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case h.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case h.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case h.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case h.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case h.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case h.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case h.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case h.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case h.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case h.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case h.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case h.BOGUS_COMMENT:{this._stateBogusComment(t);break}case h.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case h.COMMENT_START:{this._stateCommentStart(t);break}case h.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case h.COMMENT:{this._stateComment(t);break}case h.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case h.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case h.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case h.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case h.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case h.COMMENT_END:{this._stateCommentEnd(t);break}case h.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case h.DOCTYPE:{this._stateDoctype(t);break}case h.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case h.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case h.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case h.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case h.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case h.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case h.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case h.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case h.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case h.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case h.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case h.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case h.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case h.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case h.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case h.CDATA_SECTION:{this._stateCdataSection(t);break}case h.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case h.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case h.CHARACTER_REFERENCE:{this._stateCharacterReference();break}case h.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case c.LESS_THAN_SIGN:{this.state=h.TAG_OPEN;break}case c.AMPERSAND:{this._startCharacterReference();break}case c.NULL:{this._err(N.unexpectedNullCharacter),this._emitCodePoint(t);break}case c.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case c.AMPERSAND:{this._startCharacterReference();break}case c.LESS_THAN_SIGN:{this.state=h.RCDATA_LESS_THAN_SIGN;break}case c.NULL:{this._err(N.unexpectedNullCharacter),this._emitChars(v);break}case c.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case c.LESS_THAN_SIGN:{this.state=h.RAWTEXT_LESS_THAN_SIGN;break}case c.NULL:{this._err(N.unexpectedNullCharacter),this._emitChars(v);break}case c.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case c.LESS_THAN_SIGN:{this.state=h.SCRIPT_DATA_LESS_THAN_SIGN;break}case c.NULL:{this._err(N.unexpectedNullCharacter),this._emitChars(v);break}case c.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case c.NULL:{this._err(N.unexpectedNullCharacter),this._emitChars(v);break}case c.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(_e(t))this._createStartTagToken(),this.state=h.TAG_NAME,this._stateTagName(t);else switch(t){case c.EXCLAMATION_MARK:{this.state=h.MARKUP_DECLARATION_OPEN;break}case c.SOLIDUS:{this.state=h.END_TAG_OPEN;break}case c.QUESTION_MARK:{this._err(N.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=h.BOGUS_COMMENT,this._stateBogusComment(t);break}case c.EOF:{this._err(N.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(N.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=h.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(_e(t))this._createEndTagToken(),this.state=h.TAG_NAME,this._stateTagName(t);else switch(t){case c.GREATER_THAN_SIGN:{this._err(N.missingEndTagName),this.state=h.DATA;break}case c.EOF:{this._err(N.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(N.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=h.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:{this.state=h.BEFORE_ATTRIBUTE_NAME;break}case c.SOLIDUS:{this.state=h.SELF_CLOSING_START_TAG;break}case c.GREATER_THAN_SIGN:{this.state=h.DATA,this.emitCurrentTagToken();break}case c.NULL:{this._err(N.unexpectedNullCharacter),n.tagName+=v;break}case c.EOF:{this._err(N.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(mt(t)?Qt(t):t)}}_stateRcdataLessThanSign(t){t===c.SOLIDUS?this.state=h.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=h.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){_e(t)?(this.state=h.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=h.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=h.BEFORE_ATTRIBUTE_NAME,!1;case c.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=h.SELF_CLOSING_START_TAG,!1;case c.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=h.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=h.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===c.SOLIDUS?this.state=h.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=h.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){_e(t)?(this.state=h.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=h.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=h.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case c.SOLIDUS:{this.state=h.SCRIPT_DATA_END_TAG_OPEN;break}case c.EXCLAMATION_MARK:{this.state=h.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=h.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){_e(t)?(this.state=h.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=h.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=h.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===c.HYPHEN_MINUS?(this.state=h.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=h.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===c.HYPHEN_MINUS?(this.state=h.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=h.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case c.HYPHEN_MINUS:{this.state=h.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case c.LESS_THAN_SIGN:{this.state=h.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case c.NULL:{this._err(N.unexpectedNullCharacter),this._emitChars(v);break}case c.EOF:{this._err(N.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case c.HYPHEN_MINUS:{this.state=h.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case c.LESS_THAN_SIGN:{this.state=h.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case c.NULL:{this._err(N.unexpectedNullCharacter),this.state=h.SCRIPT_DATA_ESCAPED,this._emitChars(v);break}case c.EOF:{this._err(N.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=h.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case c.HYPHEN_MINUS:{this._emitChars("-");break}case c.LESS_THAN_SIGN:{this.state=h.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case c.GREATER_THAN_SIGN:{this.state=h.SCRIPT_DATA,this._emitChars(">");break}case c.NULL:{this._err(N.unexpectedNullCharacter),this.state=h.SCRIPT_DATA_ESCAPED,this._emitChars(v);break}case c.EOF:{this._err(N.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=h.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===c.SOLIDUS?this.state=h.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:_e(t)?(this._emitChars("<"),this.state=h.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=h.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){_e(t)?(this.state=h.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=h.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=h.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(J.SCRIPT,!1)&&Zr(this.preprocessor.peek(J.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<J.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=h.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=h.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case c.HYPHEN_MINUS:{this.state=h.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case c.LESS_THAN_SIGN:{this.state=h.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case c.NULL:{this._err(N.unexpectedNullCharacter),this._emitChars(v);break}case c.EOF:{this._err(N.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case c.HYPHEN_MINUS:{this.state=h.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case c.LESS_THAN_SIGN:{this.state=h.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case c.NULL:{this._err(N.unexpectedNullCharacter),this.state=h.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(v);break}case c.EOF:{this._err(N.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=h.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case c.HYPHEN_MINUS:{this._emitChars("-");break}case c.LESS_THAN_SIGN:{this.state=h.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case c.GREATER_THAN_SIGN:{this.state=h.SCRIPT_DATA,this._emitChars(">");break}case c.NULL:{this._err(N.unexpectedNullCharacter),this.state=h.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(v);break}case c.EOF:{this._err(N.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=h.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===c.SOLIDUS?(this.state=h.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=h.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(J.SCRIPT,!1)&&Zr(this.preprocessor.peek(J.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<J.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=h.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=h.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:break;case c.SOLIDUS:case c.GREATER_THAN_SIGN:case c.EOF:{this.state=h.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case c.EQUALS_SIGN:{this._err(N.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=h.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=h.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:case c.SOLIDUS:case c.GREATER_THAN_SIGN:case c.EOF:{this._leaveAttrName(),this.state=h.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case c.EQUALS_SIGN:{this._leaveAttrName(),this.state=h.BEFORE_ATTRIBUTE_VALUE;break}case c.QUOTATION_MARK:case c.APOSTROPHE:case c.LESS_THAN_SIGN:{this._err(N.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case c.NULL:{this._err(N.unexpectedNullCharacter),this.currentAttr.name+=v;break}default:this.currentAttr.name+=String.fromCodePoint(mt(t)?Qt(t):t)}}_stateAfterAttributeName(t){switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:break;case c.SOLIDUS:{this.state=h.SELF_CLOSING_START_TAG;break}case c.EQUALS_SIGN:{this.state=h.BEFORE_ATTRIBUTE_VALUE;break}case c.GREATER_THAN_SIGN:{this.state=h.DATA,this.emitCurrentTagToken();break}case c.EOF:{this._err(N.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=h.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:break;case c.QUOTATION_MARK:{this.state=h.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case c.APOSTROPHE:{this.state=h.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case c.GREATER_THAN_SIGN:{this._err(N.missingAttributeValue),this.state=h.DATA,this.emitCurrentTagToken();break}default:this.state=h.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case c.QUOTATION_MARK:{this.state=h.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case c.AMPERSAND:{this._startCharacterReference();break}case c.NULL:{this._err(N.unexpectedNullCharacter),this.currentAttr.value+=v;break}case c.EOF:{this._err(N.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case c.APOSTROPHE:{this.state=h.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case c.AMPERSAND:{this._startCharacterReference();break}case c.NULL:{this._err(N.unexpectedNullCharacter),this.currentAttr.value+=v;break}case c.EOF:{this._err(N.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:{this._leaveAttrValue(),this.state=h.BEFORE_ATTRIBUTE_NAME;break}case c.AMPERSAND:{this._startCharacterReference();break}case c.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=h.DATA,this.emitCurrentTagToken();break}case c.NULL:{this._err(N.unexpectedNullCharacter),this.currentAttr.value+=v;break}case c.QUOTATION_MARK:case c.APOSTROPHE:case c.LESS_THAN_SIGN:case c.EQUALS_SIGN:case c.GRAVE_ACCENT:{this._err(N.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case c.EOF:{this._err(N.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:{this._leaveAttrValue(),this.state=h.BEFORE_ATTRIBUTE_NAME;break}case c.SOLIDUS:{this._leaveAttrValue(),this.state=h.SELF_CLOSING_START_TAG;break}case c.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=h.DATA,this.emitCurrentTagToken();break}case c.EOF:{this._err(N.eofInTag),this._emitEOFToken();break}default:this._err(N.missingWhitespaceBetweenAttributes),this.state=h.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case c.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=h.DATA,this.emitCurrentTagToken();break}case c.EOF:{this._err(N.eofInTag),this._emitEOFToken();break}default:this._err(N.unexpectedSolidusInTag),this.state=h.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case c.GREATER_THAN_SIGN:{this.state=h.DATA,this.emitCurrentComment(n);break}case c.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case c.NULL:{this._err(N.unexpectedNullCharacter),n.data+=v;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(J.DASH_DASH,!0)?(this._createCommentToken(J.DASH_DASH.length+1),this.state=h.COMMENT_START):this._consumeSequenceIfMatch(J.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(J.DOCTYPE.length+1),this.state=h.DOCTYPE):this._consumeSequenceIfMatch(J.CDATA_START,!0)?this.inForeignNode?this.state=h.CDATA_SECTION:(this._err(N.cdataInHtmlContent),this._createCommentToken(J.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=h.BOGUS_COMMENT):this._ensureHibernation()||(this._err(N.incorrectlyOpenedComment),this._createCommentToken(2),this.state=h.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case c.HYPHEN_MINUS:{this.state=h.COMMENT_START_DASH;break}case c.GREATER_THAN_SIGN:{this._err(N.abruptClosingOfEmptyComment),this.state=h.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=h.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case c.HYPHEN_MINUS:{this.state=h.COMMENT_END;break}case c.GREATER_THAN_SIGN:{this._err(N.abruptClosingOfEmptyComment),this.state=h.DATA,this.emitCurrentComment(n);break}case c.EOF:{this._err(N.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=h.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case c.HYPHEN_MINUS:{this.state=h.COMMENT_END_DASH;break}case c.LESS_THAN_SIGN:{n.data+="<",this.state=h.COMMENT_LESS_THAN_SIGN;break}case c.NULL:{this._err(N.unexpectedNullCharacter),n.data+=v;break}case c.EOF:{this._err(N.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case c.EXCLAMATION_MARK:{n.data+="!",this.state=h.COMMENT_LESS_THAN_SIGN_BANG;break}case c.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=h.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===c.HYPHEN_MINUS?this.state=h.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=h.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===c.HYPHEN_MINUS?this.state=h.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=h.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==c.GREATER_THAN_SIGN&&t!==c.EOF&&this._err(N.nestedComment),this.state=h.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case c.HYPHEN_MINUS:{this.state=h.COMMENT_END;break}case c.EOF:{this._err(N.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=h.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case c.GREATER_THAN_SIGN:{this.state=h.DATA,this.emitCurrentComment(n);break}case c.EXCLAMATION_MARK:{this.state=h.COMMENT_END_BANG;break}case c.HYPHEN_MINUS:{n.data+="-";break}case c.EOF:{this._err(N.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=h.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case c.HYPHEN_MINUS:{n.data+="--!",this.state=h.COMMENT_END_DASH;break}case c.GREATER_THAN_SIGN:{this._err(N.incorrectlyClosedComment),this.state=h.DATA,this.emitCurrentComment(n);break}case c.EOF:{this._err(N.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=h.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:{this.state=h.BEFORE_DOCTYPE_NAME;break}case c.GREATER_THAN_SIGN:{this.state=h.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case c.EOF:{this._err(N.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(N.missingWhitespaceBeforeDoctypeName),this.state=h.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(mt(t))this._createDoctypeToken(String.fromCharCode(Qt(t))),this.state=h.DOCTYPE_NAME;else switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:break;case c.NULL:{this._err(N.unexpectedNullCharacter),this._createDoctypeToken(v),this.state=h.DOCTYPE_NAME;break}case c.GREATER_THAN_SIGN:{this._err(N.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=h.DATA;break}case c.EOF:{this._err(N.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=h.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:{this.state=h.AFTER_DOCTYPE_NAME;break}case c.GREATER_THAN_SIGN:{this.state=h.DATA,this.emitCurrentDoctype(n);break}case c.NULL:{this._err(N.unexpectedNullCharacter),n.name+=v;break}case c.EOF:{this._err(N.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(mt(t)?Qt(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:break;case c.GREATER_THAN_SIGN:{this.state=h.DATA,this.emitCurrentDoctype(n);break}case c.EOF:{this._err(N.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(J.PUBLIC,!1)?this.state=h.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(J.SYSTEM,!1)?this.state=h.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(N.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=h.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:{this.state=h.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case c.QUOTATION_MARK:{this._err(N.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=h.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case c.APOSTROPHE:{this._err(N.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=h.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case c.GREATER_THAN_SIGN:{this._err(N.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=h.DATA,this.emitCurrentDoctype(n);break}case c.EOF:{this._err(N.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(N.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=h.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:break;case c.QUOTATION_MARK:{n.publicId="",this.state=h.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case c.APOSTROPHE:{n.publicId="",this.state=h.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case c.GREATER_THAN_SIGN:{this._err(N.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=h.DATA,this.emitCurrentDoctype(n);break}case c.EOF:{this._err(N.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(N.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=h.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case c.QUOTATION_MARK:{this.state=h.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case c.NULL:{this._err(N.unexpectedNullCharacter),n.publicId+=v;break}case c.GREATER_THAN_SIGN:{this._err(N.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=h.DATA;break}case c.EOF:{this._err(N.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case c.APOSTROPHE:{this.state=h.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case c.NULL:{this._err(N.unexpectedNullCharacter),n.publicId+=v;break}case c.GREATER_THAN_SIGN:{this._err(N.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=h.DATA;break}case c.EOF:{this._err(N.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:{this.state=h.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case c.GREATER_THAN_SIGN:{this.state=h.DATA,this.emitCurrentDoctype(n);break}case c.QUOTATION_MARK:{this._err(N.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=h.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case c.APOSTROPHE:{this._err(N.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=h.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case c.EOF:{this._err(N.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(N.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=h.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:break;case c.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=h.DATA;break}case c.QUOTATION_MARK:{n.systemId="",this.state=h.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case c.APOSTROPHE:{n.systemId="",this.state=h.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case c.EOF:{this._err(N.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(N.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=h.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:{this.state=h.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case c.QUOTATION_MARK:{this._err(N.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=h.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case c.APOSTROPHE:{this._err(N.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=h.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case c.GREATER_THAN_SIGN:{this._err(N.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=h.DATA,this.emitCurrentDoctype(n);break}case c.EOF:{this._err(N.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(N.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=h.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:break;case c.QUOTATION_MARK:{n.systemId="",this.state=h.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case c.APOSTROPHE:{n.systemId="",this.state=h.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case c.GREATER_THAN_SIGN:{this._err(N.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=h.DATA,this.emitCurrentDoctype(n);break}case c.EOF:{this._err(N.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(N.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=h.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case c.QUOTATION_MARK:{this.state=h.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case c.NULL:{this._err(N.unexpectedNullCharacter),n.systemId+=v;break}case c.GREATER_THAN_SIGN:{this._err(N.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=h.DATA;break}case c.EOF:{this._err(N.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case c.APOSTROPHE:{this.state=h.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case c.NULL:{this._err(N.unexpectedNullCharacter),n.systemId+=v;break}case c.GREATER_THAN_SIGN:{this._err(N.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=h.DATA;break}case c.EOF:{this._err(N.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case c.SPACE:case c.LINE_FEED:case c.TABULATION:case c.FORM_FEED:break;case c.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=h.DATA;break}case c.EOF:{this._err(N.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(N.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=h.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case c.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=h.DATA;break}case c.NULL:{this._err(N.unexpectedNullCharacter);break}case c.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case c.RIGHT_SQUARE_BRACKET:{this.state=h.CDATA_SECTION_BRACKET;break}case c.EOF:{this._err(N.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===c.RIGHT_SQUARE_BRACKET?this.state=h.CDATA_SECTION_END:(this._emitChars("]"),this.state=h.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case c.GREATER_THAN_SIGN:{this.state=h.DATA;break}case c.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=h.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(){let t=this.entityDecoder.write(this.preprocessor.html,this.preprocessor.pos);if(t<0)if(this.preprocessor.lastChunkWritten)t=this.entityDecoder.end();else{this.active=!1,this.preprocessor.pos=this.preprocessor.html.length-1,this.consumedAfterSnapshot=0,this.preprocessor.endOfChunkHit=!0;return}t===0?(this.preprocessor.pos=this.entityStartPos,this._flushCodePointConsumedAsCharacterReference(c.AMPERSAND),this.state=!this._isCharacterReferenceInAttribute()&&Jr(this.preprocessor.peek(1))?h.AMBIGUOUS_AMPERSAND:this.returnState):this.state=this.returnState}_stateAmbiguousAmpersand(t){Jr(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===c.SEMICOLON&&this._err(N.unknownNamedCharacterReference),this.state=this.returnState,this._callState(t))}}const xa=new Set([u.DD,u.DT,u.LI,u.OPTGROUP,u.OPTION,u.P,u.RB,u.RP,u.RT,u.RTC]),eu=new Set([...xa,u.CAPTION,u.COLGROUP,u.TBODY,u.TD,u.TFOOT,u.TH,u.THEAD,u.TR]),ln=new Set([u.APPLET,u.CAPTION,u.HTML,u.MARQUEE,u.OBJECT,u.TABLE,u.TD,u.TEMPLATE,u.TH]),Pd=new Set([...ln,u.OL,u.UL]),Md=new Set([...ln,u.BUTTON]),tu=new Set([u.ANNOTATION_XML,u.MI,u.MN,u.MO,u.MS,u.MTEXT]),nu=new Set([u.DESC,u.FOREIGN_OBJECT,u.TITLE]),kd=new Set([u.TR,u.TEMPLATE,u.HTML]),wd=new Set([u.TBODY,u.TFOOT,u.THEAD,u.TEMPLATE,u.HTML]),Bd=new Set([u.TABLE,u.TEMPLATE,u.HTML]),Fd=new Set([u.TD,u.TH]);class Ud{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,s){this.treeAdapter=n,this.handler=s,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=u.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===u.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===I.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const s=this._indexOf(t);this.items[s]=n,s===this.stackTop&&(this.current=n)}insertAfter(t,n,s){const r=this._indexOf(t)+1;this.items.splice(r,0,n),this.tagIDs.splice(r,0,s),this.stackTop++,r===this.stackTop&&this._updateCurrentElement(),this.current&&this.currentTagId!==void 0&&this.handler.onItemPush(this.current,this.currentTagId,r===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==I.HTML);this.shortenToLength(Math.max(n,0))}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(Math.max(n,0))}popUntilPopped(t,n){const s=this._indexOfTagNames(t,n);this.shortenToLength(Math.max(s,0))}popUntilNumberedHeaderPopped(){this.popUntilPopped(cs,I.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Fd,I.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let s=this.stackTop;s>=0;s--)if(t.has(this.tagIDs[s])&&this.treeAdapter.getNamespaceURI(this.items[s])===n)return s;return-1}clearBackTo(t,n){const s=this._indexOfTagNames(t,n);this.shortenToLength(s+1)}clearBackToTableContext(){this.clearBackTo(Bd,I.HTML)}clearBackToTableBodyContext(){this.clearBackTo(wd,I.HTML)}clearBackToTableRowContext(){this.clearBackTo(kd,I.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===u.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===u.HTML}hasInDynamicScope(t,n){for(let s=this.stackTop;s>=0;s--){const r=this.tagIDs[s];switch(this.treeAdapter.getNamespaceURI(this.items[s])){case I.HTML:{if(r===t)return!0;if(n.has(r))return!1;break}case I.SVG:{if(nu.has(r))return!1;break}case I.MATHML:{if(tu.has(r))return!1;break}}}return!0}hasInScope(t){return this.hasInDynamicScope(t,ln)}hasInListItemScope(t){return this.hasInDynamicScope(t,Pd)}hasInButtonScope(t){return this.hasInDynamicScope(t,Md)}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];switch(this.treeAdapter.getNamespaceURI(this.items[t])){case I.HTML:{if(cs.has(n))return!0;if(ln.has(n))return!1;break}case I.SVG:{if(nu.has(n))return!1;break}case I.MATHML:{if(tu.has(n))return!1;break}}}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===I.HTML)switch(this.tagIDs[n]){case t:return!0;case u.TABLE:case u.HTML:return!1}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--)if(this.treeAdapter.getNamespaceURI(this.items[t])===I.HTML)switch(this.tagIDs[t]){case u.TBODY:case u.THEAD:case u.TFOOT:return!0;case u.TABLE:case u.HTML:return!1}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--)if(this.treeAdapter.getNamespaceURI(this.items[n])===I.HTML)switch(this.tagIDs[n]){case t:return!0;case u.OPTION:case u.OPTGROUP:break;default:return!1}return!0}generateImpliedEndTags(){for(;this.currentTagId!==void 0&&xa.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;this.currentTagId!==void 0&&eu.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==void 0&&this.currentTagId!==t&&eu.has(this.currentTagId);)this.pop()}}const jn=3;var le;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(le||(le={}));const su={type:le.Marker};class vd{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const s=[],r=n.length,a=this.treeAdapter.getTagName(t),i=this.treeAdapter.getNamespaceURI(t);for(let o=0;o<this.entries.length;o++){const l=this.entries[o];if(l.type===le.Marker)break;const{element:d}=l;if(this.treeAdapter.getTagName(d)===a&&this.treeAdapter.getNamespaceURI(d)===i){const f=this.treeAdapter.getAttrList(d);f.length===r&&s.push({idx:o,attrs:f})}}return s}_ensureNoahArkCondition(t){if(this.entries.length<jn)return;const n=this.treeAdapter.getAttrList(t),s=this._getNoahArkConditionCandidates(t,n);if(s.length<jn)return;const r=new Map(n.map(i=>[i.name,i.value]));let a=0;for(let i=0;i<s.length;i++){const o=s[i];o.attrs.every(l=>r.get(l.name)===l.value)&&(a+=1,a>=jn&&this.entries.splice(o.idx,1))}}insertMarker(){this.entries.unshift(su)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:le.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const s=this.entries.indexOf(this.bookmark);this.entries.splice(s,0,{type:le.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n!==-1&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(su);t===-1?this.entries.length=0:this.entries.splice(0,t+1)}getElementEntryInScopeWithTagName(t){const n=this.entries.find(s=>s.type===le.Marker||this.treeAdapter.getTagName(s.element)===t);return n&&n.type===le.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===le.Element&&n.element===t)}}const Ee={createDocument(){return{nodeName:"#document",mode:se.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},createTextNode(e){return{nodeName:"#text",value:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const s=e.childNodes.indexOf(n);e.childNodes.splice(s,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,s){const r=e.childNodes.find(a=>a.nodeName==="#documentType");if(r)r.name=t,r.publicId=n,r.systemId=s;else{const a={nodeName:"#documentType",name:t,publicId:n,systemId:s,parentNode:null};Ee.appendChild(e,a)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(Ee.isTextNode(n)){n.value+=t;return}}Ee.appendChild(e,Ee.createTextNode(t))},insertTextBefore(e,t,n){const s=e.childNodes[e.childNodes.indexOf(n)-1];s&&Ee.isTextNode(s)?s.value+=t:Ee.insertBefore(e,Ee.createTextNode(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(s=>s.name));for(let s=0;s<t.length;s++)n.has(t[s].name)||e.attrs.push(t[s])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},ya="html",Hd="about:legacy-compat",qd="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",Pa=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Yd=[...Pa,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Wd=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),Ma=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Vd=[...Ma,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function ru(e,t){return t.some(n=>e.startsWith(n))}function jd(e){return e.name===ya&&e.publicId===null&&(e.systemId===null||e.systemId===Hd)}function Gd(e){if(e.name!==ya)return se.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===qd)return se.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),Wd.has(n))return se.QUIRKS;let s=t===null?Yd:Pa;if(ru(n,s))return se.QUIRKS;if(s=t===null?Ma:Vd,ru(n,s))return se.LIMITED_QUIRKS}return se.NO_QUIRKS}const uu={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},$d="definitionurl",Qd="definitionURL",zd=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),Kd=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:I.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:I.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:I.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:I.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:I.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:I.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:I.XLINK}],["xml:lang",{prefix:"xml",name:"lang",namespace:I.XML}],["xml:space",{prefix:"xml",name:"space",namespace:I.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:I.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:I.XMLNS}]]),Xd=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Jd=new Set([u.B,u.BIG,u.BLOCKQUOTE,u.BODY,u.BR,u.CENTER,u.CODE,u.DD,u.DIV,u.DL,u.DT,u.EM,u.EMBED,u.H1,u.H2,u.H3,u.H4,u.H5,u.H6,u.HEAD,u.HR,u.I,u.IMG,u.LI,u.LISTING,u.MENU,u.META,u.NOBR,u.OL,u.P,u.PRE,u.RUBY,u.S,u.SMALL,u.SPAN,u.STRONG,u.STRIKE,u.SUB,u.SUP,u.TABLE,u.TT,u.U,u.UL,u.VAR]);function Zd(e){const t=e.tagID;return t===u.FONT&&e.attrs.some(({name:s})=>s===Be.COLOR||s===Be.SIZE||s===Be.FACE)||Jd.has(t)}function ka(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===$d){e.attrs[t].name=Qd;break}}function wa(e){for(let t=0;t<e.attrs.length;t++){const n=zd.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function qs(e){for(let t=0;t<e.attrs.length;t++){const n=Kd.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function eh(e){const t=Xd.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=On(e.tagName))}function th(e,t){return t===I.MATHML&&(e===u.MI||e===u.MO||e===u.MN||e===u.MS||e===u.MTEXT)}function nh(e,t,n){if(t===I.MATHML&&e===u.ANNOTATION_XML){for(let s=0;s<n.length;s++)if(n[s].name===Be.ENCODING){const r=n[s].value.toLowerCase();return r===uu.TEXT_HTML||r===uu.APPLICATION_XML}}return t===I.SVG&&(e===u.FOREIGN_OBJECT||e===u.DESC||e===u.TITLE)}function sh(e,t,n,s){return(!s||s===I.HTML)&&nh(e,t,n)||(!s||s===I.MATHML)&&th(e,t)}const rh="hidden",uh=8,ah=3;var E;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(E||(E={}));const ih={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},Ba=new Set([u.TABLE,u.TBODY,u.TFOOT,u.THEAD,u.TR]),au={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:Ee,onParseError:null};class Fa{constructor(t,n,s=null,r=null){this.fragmentContext=s,this.scriptHandler=r,this.currentToken=null,this.stopped=!1,this.insertionMode=E.INITIAL,this.originalInsertionMode=E.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...au,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new yd(this.options,this),this.activeFormattingElements=new vd(this.treeAdapter),this.fragmentContextID=s?On(this.treeAdapter.getTagName(s)):u.UNKNOWN,this._setContextModes(s??this.document,this.fragmentContextID),this.openElements=new Ud(this.document,this.treeAdapter,this)}static parse(t,n){const s=new this(n);return s.tokenizer.write(t,!0),s.document}static getFragmentParser(t,n){const s={...au,...n};t??(t=s.treeAdapter.createElement(b.TEMPLATE,I.HTML,[]));const r=s.treeAdapter.createElement("documentmock",I.HTML,[]),a=new this(s,r,t);return a.fragmentContextID===u.TEMPLATE&&a.tmplInsertionModeStack.unshift(E.IN_TEMPLATE),a._initTokenizerForFragmentParsing(),a._insertFakeRootElement(),a._resetInsertionMode(),a._findFormInFragmentContext(),a}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,s){var r;if(!this.onParseError)return;const a=(r=t.location)!==null&&r!==void 0?r:ih,i={code:n,startLine:a.startLine,startCol:a.startCol,startOffset:a.startOffset,endLine:s?a.startLine:a.endLine,endCol:s?a.startCol:a.endCol,endOffset:s?a.startOffset:a.endOffset};this.onParseError(i)}onItemPush(t,n,s){var r,a;(a=(r=this.treeAdapter).onItemPush)===null||a===void 0||a.call(r,t),s&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var s,r;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(r=(s=this.treeAdapter).onItemPop)===null||r===void 0||r.call(s,t,this.openElements.current),n){let a,i;this.openElements.stackTop===0&&this.fragmentContext?(a=this.fragmentContext,i=this.fragmentContextID):{current:a,currentTagId:i}=this.openElements,this._setContextModes(a,i)}}_setContextModes(t,n){const s=t===this.document||t&&this.treeAdapter.getNamespaceURI(t)===I.HTML;this.currentNotInHTML=!s,this.tokenizer.inForeignNode=!s&&t!==void 0&&n!==void 0&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,I.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=E.TEXT}switchToPlaintextParsing(){this.insertionMode=E.TEXT,this.originalInsertionMode=E.IN_BODY,this.tokenizer.state=ee.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===b.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==I.HTML))switch(this.fragmentContextID){case u.TITLE:case u.TEXTAREA:{this.tokenizer.state=ee.RCDATA;break}case u.STYLE:case u.XMP:case u.IFRAME:case u.NOEMBED:case u.NOFRAMES:case u.NOSCRIPT:{this.tokenizer.state=ee.RAWTEXT;break}case u.SCRIPT:{this.tokenizer.state=ee.SCRIPT_DATA;break}case u.PLAINTEXT:{this.tokenizer.state=ee.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",s=t.publicId||"",r=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,s,r),t.location){const i=this.treeAdapter.getChildNodes(this.document).find(o=>this.treeAdapter.isDocumentTypeNode(o));i&&this.treeAdapter.setNodeSourceCodeLocation(i,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const s=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,s)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const s=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(s??this.document,t)}}_appendElement(t,n){const s=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(s,t.location)}_insertElement(t,n){const s=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(s,t.location),this.openElements.push(s,t.tagID)}_insertFakeElement(t,n){const s=this.treeAdapter.createElement(t,I.HTML,[]);this._attachElementToTree(s,null),this.openElements.push(s,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,I.HTML,t.attrs),s=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,s),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(b.HTML,I.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,u.HTML)}_appendCommentNode(t,n){const s=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,s),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(s,t.location)}_insertCharacters(t){let n,s;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:s}=this._findFosterParentingLocation(),s?this.treeAdapter.insertTextBefore(n,t.chars,s):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const r=this.treeAdapter.getChildNodes(n),a=s?r.lastIndexOf(s):r.length,i=r[a-1];if(this.treeAdapter.getNodeSourceCodeLocation(i)){const{endLine:l,endCol:d,endOffset:f}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(i,{endLine:l,endCol:d,endOffset:f})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(i,t.location)}_adoptNodes(t,n){for(let s=this.treeAdapter.getFirstChild(t);s;s=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(s),this.treeAdapter.appendChild(n,s)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const s=n.location,r=this.treeAdapter.getTagName(t),a=n.type===B.END_TAG&&r===n.tagName?{endTag:{...s},endLine:s.endLine,endCol:s.endCol,endOffset:s.endOffset}:{endLine:s.startLine,endCol:s.startCol,endOffset:s.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,a)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,s;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,s=this.fragmentContextID):{current:n,currentTagId:s}=this.openElements,t.tagID===u.SVG&&this.treeAdapter.getTagName(n)===b.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===I.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===u.MGLYPH||t.tagID===u.MALIGNMARK)&&s!==void 0&&!this._isIntegrationPoint(s,n,I.HTML)}_processToken(t){switch(t.type){case B.CHARACTER:{this.onCharacter(t);break}case B.NULL_CHARACTER:{this.onNullCharacter(t);break}case B.COMMENT:{this.onComment(t);break}case B.DOCTYPE:{this.onDoctype(t);break}case B.START_TAG:{this._processStartTag(t);break}case B.END_TAG:{this.onEndTag(t);break}case B.EOF:{this.onEof(t);break}case B.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,s){const r=this.treeAdapter.getNamespaceURI(n),a=this.treeAdapter.getAttrList(n);return sh(t,r,a,s)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(r=>r.type===le.Marker||this.openElements.contains(r.element)),s=n===-1?t-1:n-1;for(let r=s;r>=0;r--){const a=this.activeFormattingElements.entries[r];this._insertElement(a.token,this.treeAdapter.getNamespaceURI(a.element)),a.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=E.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(u.P),this.openElements.popUntilTagNamePopped(u.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case u.TR:{this.insertionMode=E.IN_ROW;return}case u.TBODY:case u.THEAD:case u.TFOOT:{this.insertionMode=E.IN_TABLE_BODY;return}case u.CAPTION:{this.insertionMode=E.IN_CAPTION;return}case u.COLGROUP:{this.insertionMode=E.IN_COLUMN_GROUP;return}case u.TABLE:{this.insertionMode=E.IN_TABLE;return}case u.BODY:{this.insertionMode=E.IN_BODY;return}case u.FRAMESET:{this.insertionMode=E.IN_FRAMESET;return}case u.SELECT:{this._resetInsertionModeForSelect(t);return}case u.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case u.HTML:{this.insertionMode=this.headElement?E.AFTER_HEAD:E.BEFORE_HEAD;return}case u.TD:case u.TH:{if(t>0){this.insertionMode=E.IN_CELL;return}break}case u.HEAD:{if(t>0){this.insertionMode=E.IN_HEAD;return}break}}this.insertionMode=E.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const s=this.openElements.tagIDs[n];if(s===u.TEMPLATE)break;if(s===u.TABLE){this.insertionMode=E.IN_SELECT_IN_TABLE;return}}this.insertionMode=E.IN_SELECT}_isElementCausesFosterParenting(t){return Ba.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this.openElements.currentTagId!==void 0&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case u.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===I.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case u.TABLE:{const s=this.treeAdapter.getParentNode(n);return s?{parent:s,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const s=this.treeAdapter.getNamespaceURI(t);return Cd[s].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Uf(this,t);return}switch(this.insertionMode){case E.INITIAL:{ht(this,t);break}case E.BEFORE_HTML:{bt(this,t);break}case E.BEFORE_HEAD:{pt(this,t);break}case E.IN_HEAD:{_t(this,t);break}case E.IN_HEAD_NO_SCRIPT:{gt(this,t);break}case E.AFTER_HEAD:{At(this,t);break}case E.IN_BODY:case E.IN_CAPTION:case E.IN_CELL:case E.IN_TEMPLATE:{va(this,t);break}case E.TEXT:case E.IN_SELECT:case E.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case E.IN_TABLE:case E.IN_TABLE_BODY:case E.IN_ROW:{Gn(this,t);break}case E.IN_TABLE_TEXT:{ja(this,t);break}case E.IN_COLUMN_GROUP:{dn(this,t);break}case E.AFTER_BODY:{hn(this,t);break}case E.AFTER_AFTER_BODY:{Zt(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Ff(this,t);return}switch(this.insertionMode){case E.INITIAL:{ht(this,t);break}case E.BEFORE_HTML:{bt(this,t);break}case E.BEFORE_HEAD:{pt(this,t);break}case E.IN_HEAD:{_t(this,t);break}case E.IN_HEAD_NO_SCRIPT:{gt(this,t);break}case E.AFTER_HEAD:{At(this,t);break}case E.TEXT:{this._insertCharacters(t);break}case E.IN_TABLE:case E.IN_TABLE_BODY:case E.IN_ROW:{Gn(this,t);break}case E.IN_COLUMN_GROUP:{dn(this,t);break}case E.AFTER_BODY:{hn(this,t);break}case E.AFTER_AFTER_BODY:{Zt(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){ls(this,t);return}switch(this.insertionMode){case E.INITIAL:case E.BEFORE_HTML:case E.BEFORE_HEAD:case E.IN_HEAD:case E.IN_HEAD_NO_SCRIPT:case E.AFTER_HEAD:case E.IN_BODY:case E.IN_TABLE:case E.IN_CAPTION:case E.IN_COLUMN_GROUP:case E.IN_TABLE_BODY:case E.IN_ROW:case E.IN_CELL:case E.IN_SELECT:case E.IN_SELECT_IN_TABLE:case E.IN_TEMPLATE:case E.IN_FRAMESET:case E.AFTER_FRAMESET:{ls(this,t);break}case E.IN_TABLE_TEXT:{ft(this,t);break}case E.AFTER_BODY:{Eh(this,t);break}case E.AFTER_AFTER_BODY:case E.AFTER_AFTER_FRAMESET:{mh(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case E.INITIAL:{Th(this,t);break}case E.BEFORE_HEAD:case E.IN_HEAD:case E.IN_HEAD_NO_SCRIPT:case E.AFTER_HEAD:{this._err(t,N.misplacedDoctype);break}case E.IN_TABLE_TEXT:{ft(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,N.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?vf(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case E.INITIAL:{ht(this,t);break}case E.BEFORE_HTML:{bh(this,t);break}case E.BEFORE_HEAD:{_h(this,t);break}case E.IN_HEAD:{ie(this,t);break}case E.IN_HEAD_NO_SCRIPT:{Nh(this,t);break}case E.AFTER_HEAD:{Ih(this,t);break}case E.IN_BODY:{X(this,t);break}case E.IN_TABLE:{Je(this,t);break}case E.IN_TABLE_TEXT:{ft(this,t);break}case E.IN_CAPTION:{Af(this,t);break}case E.IN_COLUMN_GROUP:{Vs(this,t);break}case E.IN_TABLE_BODY:{Ln(this,t);break}case E.IN_ROW:{xn(this,t);break}case E.IN_CELL:{If(this,t);break}case E.IN_SELECT:{Qa(this,t);break}case E.IN_SELECT_IN_TABLE:{Of(this,t);break}case E.IN_TEMPLATE:{Df(this,t);break}case E.AFTER_BODY:{xf(this,t);break}case E.IN_FRAMESET:{yf(this,t);break}case E.AFTER_FRAMESET:{Mf(this,t);break}case E.AFTER_AFTER_BODY:{wf(this,t);break}case E.AFTER_AFTER_FRAMESET:{Bf(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Hf(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case E.INITIAL:{ht(this,t);break}case E.BEFORE_HTML:{ph(this,t);break}case E.BEFORE_HEAD:{gh(this,t);break}case E.IN_HEAD:{Ah(this,t);break}case E.IN_HEAD_NO_SCRIPT:{Sh(this,t);break}case E.AFTER_HEAD:{Ch(this,t);break}case E.IN_BODY:{Dn(this,t);break}case E.TEXT:{df(this,t);break}case E.IN_TABLE:{Rt(this,t);break}case E.IN_TABLE_TEXT:{ft(this,t);break}case E.IN_CAPTION:{Nf(this,t);break}case E.IN_COLUMN_GROUP:{Sf(this,t);break}case E.IN_TABLE_BODY:{ds(this,t);break}case E.IN_ROW:{$a(this,t);break}case E.IN_CELL:{Cf(this,t);break}case E.IN_SELECT:{za(this,t);break}case E.IN_SELECT_IN_TABLE:{Rf(this,t);break}case E.IN_TEMPLATE:{Lf(this,t);break}case E.AFTER_BODY:{Xa(this,t);break}case E.IN_FRAMESET:{Pf(this,t);break}case E.AFTER_FRAMESET:{kf(this,t);break}case E.AFTER_AFTER_BODY:{Zt(this,t);break}}}onEof(t){switch(this.insertionMode){case E.INITIAL:{ht(this,t);break}case E.BEFORE_HTML:{bt(this,t);break}case E.BEFORE_HEAD:{pt(this,t);break}case E.IN_HEAD:{_t(this,t);break}case E.IN_HEAD_NO_SCRIPT:{gt(this,t);break}case E.AFTER_HEAD:{At(this,t);break}case E.IN_BODY:case E.IN_TABLE:case E.IN_CAPTION:case E.IN_COLUMN_GROUP:case E.IN_TABLE_BODY:case E.IN_ROW:case E.IN_CELL:case E.IN_SELECT:case E.IN_SELECT_IN_TABLE:{Wa(this,t);break}case E.TEXT:{hf(this,t);break}case E.IN_TABLE_TEXT:{ft(this,t);break}case E.IN_TEMPLATE:{Ka(this,t);break}case E.AFTER_BODY:case E.IN_FRAMESET:case E.AFTER_FRAMESET:case E.AFTER_AFTER_BODY:case E.AFTER_AFTER_FRAMESET:{Ws(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===c.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case E.IN_HEAD:case E.IN_HEAD_NO_SCRIPT:case E.AFTER_HEAD:case E.TEXT:case E.IN_COLUMN_GROUP:case E.IN_SELECT:case E.IN_SELECT_IN_TABLE:case E.IN_FRAMESET:case E.AFTER_FRAMESET:{this._insertCharacters(t);break}case E.IN_BODY:case E.IN_CAPTION:case E.IN_CELL:case E.IN_TEMPLATE:case E.AFTER_BODY:case E.AFTER_AFTER_BODY:case E.AFTER_AFTER_FRAMESET:{Ua(this,t);break}case E.IN_TABLE:case E.IN_TABLE_BODY:case E.IN_ROW:{Gn(this,t);break}case E.IN_TABLE_TEXT:{Va(this,t);break}}}}function oh(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):Ya(e,t),n}function ch(e,t){let n=null,s=e.openElements.stackTop;for(;s>=0;s--){const r=e.openElements.items[s];if(r===t.element)break;e._isSpecialElement(r,e.openElements.tagIDs[s])&&(n=r)}return n||(e.openElements.shortenToLength(Math.max(s,0)),e.activeFormattingElements.removeEntry(t)),n}function lh(e,t,n){let s=t,r=e.openElements.getCommonAncestor(t);for(let a=0,i=r;i!==n;a++,i=r){r=e.openElements.getCommonAncestor(i);const o=e.activeFormattingElements.getElementEntry(i),l=o&&a>=ah;!o||l?(l&&e.activeFormattingElements.removeEntry(o),e.openElements.remove(i)):(i=dh(e,o),s===t&&(e.activeFormattingElements.bookmark=o),e.treeAdapter.detachNode(s),e.treeAdapter.appendChild(i,s),s=i)}return s}function dh(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),s=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,s),t.element=s,s}function hh(e,t,n){const s=e.treeAdapter.getTagName(t),r=On(s);if(e._isElementCausesFosterParenting(r))e._fosterParentElement(n);else{const a=e.treeAdapter.getNamespaceURI(t);r===u.TEMPLATE&&a===I.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function fh(e,t,n){const s=e.treeAdapter.getNamespaceURI(n.element),{token:r}=n,a=e.treeAdapter.createElement(r.tagName,s,r.attrs);e._adoptNodes(t,a),e.treeAdapter.appendChild(t,a),e.activeFormattingElements.insertElementAfterBookmark(a,r),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,a,r.tagID)}function Ys(e,t){for(let n=0;n<uh;n++){const s=oh(e,t);if(!s)break;const r=ch(e,s);if(!r)break;e.activeFormattingElements.bookmark=s;const a=lh(e,r,s.element),i=e.openElements.getCommonAncestor(s.element);e.treeAdapter.detachNode(a),i&&hh(e,i,a),fh(e,r,s)}}function ls(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Eh(e,t){e._appendCommentNode(t,e.openElements.items[0])}function mh(e,t){e._appendCommentNode(t,e.document)}function Ws(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let s=e.openElements.stackTop;s>=n;s--)e._setEndLocation(e.openElements.items[s],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const s=e.openElements.items[0],r=e.treeAdapter.getNodeSourceCodeLocation(s);if(r&&!r.endTag&&(e._setEndLocation(s,t),e.openElements.stackTop>=1)){const a=e.openElements.items[1],i=e.treeAdapter.getNodeSourceCodeLocation(a);i&&!i.endTag&&e._setEndLocation(a,t)}}}}function Th(e,t){e._setDocumentType(t);const n=t.forceQuirks?se.QUIRKS:Gd(t);jd(t)||e._err(t,N.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=E.BEFORE_HTML}function ht(e,t){e._err(t,N.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,se.QUIRKS),e.insertionMode=E.BEFORE_HTML,e._processToken(t)}function bh(e,t){t.tagID===u.HTML?(e._insertElement(t,I.HTML),e.insertionMode=E.BEFORE_HEAD):bt(e,t)}function ph(e,t){const n=t.tagID;(n===u.HTML||n===u.HEAD||n===u.BODY||n===u.BR)&&bt(e,t)}function bt(e,t){e._insertFakeRootElement(),e.insertionMode=E.BEFORE_HEAD,e._processToken(t)}function _h(e,t){switch(t.tagID){case u.HTML:{X(e,t);break}case u.HEAD:{e._insertElement(t,I.HTML),e.headElement=e.openElements.current,e.insertionMode=E.IN_HEAD;break}default:pt(e,t)}}function gh(e,t){const n=t.tagID;n===u.HEAD||n===u.BODY||n===u.HTML||n===u.BR?pt(e,t):e._err(t,N.endTagWithoutMatchingOpenElement)}function pt(e,t){e._insertFakeElement(b.HEAD,u.HEAD),e.headElement=e.openElements.current,e.insertionMode=E.IN_HEAD,e._processToken(t)}function ie(e,t){switch(t.tagID){case u.HTML:{X(e,t);break}case u.BASE:case u.BASEFONT:case u.BGSOUND:case u.LINK:case u.META:{e._appendElement(t,I.HTML),t.ackSelfClosing=!0;break}case u.TITLE:{e._switchToTextParsing(t,ee.RCDATA);break}case u.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ee.RAWTEXT):(e._insertElement(t,I.HTML),e.insertionMode=E.IN_HEAD_NO_SCRIPT);break}case u.NOFRAMES:case u.STYLE:{e._switchToTextParsing(t,ee.RAWTEXT);break}case u.SCRIPT:{e._switchToTextParsing(t,ee.SCRIPT_DATA);break}case u.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=E.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(E.IN_TEMPLATE);break}case u.HEAD:{e._err(t,N.misplacedStartTagForHeadElement);break}default:_t(e,t)}}function Ah(e,t){switch(t.tagID){case u.HEAD:{e.openElements.pop(),e.insertionMode=E.AFTER_HEAD;break}case u.BODY:case u.BR:case u.HTML:{_t(e,t);break}case u.TEMPLATE:{qe(e,t);break}default:e._err(t,N.endTagWithoutMatchingOpenElement)}}function qe(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==u.TEMPLATE&&e._err(t,N.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(u.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,N.endTagWithoutMatchingOpenElement)}function _t(e,t){e.openElements.pop(),e.insertionMode=E.AFTER_HEAD,e._processToken(t)}function Nh(e,t){switch(t.tagID){case u.HTML:{X(e,t);break}case u.BASEFONT:case u.BGSOUND:case u.HEAD:case u.LINK:case u.META:case u.NOFRAMES:case u.STYLE:{ie(e,t);break}case u.NOSCRIPT:{e._err(t,N.nestedNoscriptInHead);break}default:gt(e,t)}}function Sh(e,t){switch(t.tagID){case u.NOSCRIPT:{e.openElements.pop(),e.insertionMode=E.IN_HEAD;break}case u.BR:{gt(e,t);break}default:e._err(t,N.endTagWithoutMatchingOpenElement)}}function gt(e,t){const n=t.type===B.EOF?N.openElementsLeftAfterEof:N.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=E.IN_HEAD,e._processToken(t)}function Ih(e,t){switch(t.tagID){case u.HTML:{X(e,t);break}case u.BODY:{e._insertElement(t,I.HTML),e.framesetOk=!1,e.insertionMode=E.IN_BODY;break}case u.FRAMESET:{e._insertElement(t,I.HTML),e.insertionMode=E.IN_FRAMESET;break}case u.BASE:case u.BASEFONT:case u.BGSOUND:case u.LINK:case u.META:case u.NOFRAMES:case u.SCRIPT:case u.STYLE:case u.TEMPLATE:case u.TITLE:{e._err(t,N.abandonedHeadElementChild),e.openElements.push(e.headElement,u.HEAD),ie(e,t),e.openElements.remove(e.headElement);break}case u.HEAD:{e._err(t,N.misplacedStartTagForHeadElement);break}default:At(e,t)}}function Ch(e,t){switch(t.tagID){case u.BODY:case u.HTML:case u.BR:{At(e,t);break}case u.TEMPLATE:{qe(e,t);break}default:e._err(t,N.endTagWithoutMatchingOpenElement)}}function At(e,t){e._insertFakeElement(b.BODY,u.BODY),e.insertionMode=E.IN_BODY,Rn(e,t)}function Rn(e,t){switch(t.type){case B.CHARACTER:{va(e,t);break}case B.WHITESPACE_CHARACTER:{Ua(e,t);break}case B.COMMENT:{ls(e,t);break}case B.START_TAG:{X(e,t);break}case B.END_TAG:{Dn(e,t);break}case B.EOF:{Wa(e,t);break}}}function Ua(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function va(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Oh(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Rh(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Dh(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,I.HTML),e.insertionMode=E.IN_FRAMESET)}function Lh(e,t){e.openElements.hasInButtonScope(u.P)&&e._closePElement(),e._insertElement(t,I.HTML)}function xh(e,t){e.openElements.hasInButtonScope(u.P)&&e._closePElement(),e.openElements.currentTagId!==void 0&&cs.has(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,I.HTML)}function yh(e,t){e.openElements.hasInButtonScope(u.P)&&e._closePElement(),e._insertElement(t,I.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Ph(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(u.P)&&e._closePElement(),e._insertElement(t,I.HTML),n||(e.formElement=e.openElements.current))}function Mh(e,t){e.framesetOk=!1;const n=t.tagID;for(let s=e.openElements.stackTop;s>=0;s--){const r=e.openElements.tagIDs[s];if(n===u.LI&&r===u.LI||(n===u.DD||n===u.DT)&&(r===u.DD||r===u.DT)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.popUntilTagNamePopped(r);break}if(r!==u.ADDRESS&&r!==u.DIV&&r!==u.P&&e._isSpecialElement(e.openElements.items[s],r))break}e.openElements.hasInButtonScope(u.P)&&e._closePElement(),e._insertElement(t,I.HTML)}function kh(e,t){e.openElements.hasInButtonScope(u.P)&&e._closePElement(),e._insertElement(t,I.HTML),e.tokenizer.state=ee.PLAINTEXT}function wh(e,t){e.openElements.hasInScope(u.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(u.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,I.HTML),e.framesetOk=!1}function Bh(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(b.A);n&&(Ys(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,I.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Fh(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,I.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Uh(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(u.NOBR)&&(Ys(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,I.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function vh(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,I.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Hh(e,t){e.treeAdapter.getDocumentMode(e.document)!==se.QUIRKS&&e.openElements.hasInButtonScope(u.P)&&e._closePElement(),e._insertElement(t,I.HTML),e.framesetOk=!1,e.insertionMode=E.IN_TABLE}function Ha(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,I.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function qa(e){const t=Da(e,Be.TYPE);return t!=null&&t.toLowerCase()===rh}function qh(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,I.HTML),qa(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Yh(e,t){e._appendElement(t,I.HTML),t.ackSelfClosing=!0}function Wh(e,t){e.openElements.hasInButtonScope(u.P)&&e._closePElement(),e._appendElement(t,I.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Vh(e,t){t.tagName=b.IMG,t.tagID=u.IMG,Ha(e,t)}function jh(e,t){e._insertElement(t,I.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ee.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=E.TEXT}function Gh(e,t){e.openElements.hasInButtonScope(u.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ee.RAWTEXT)}function $h(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ee.RAWTEXT)}function iu(e,t){e._switchToTextParsing(t,ee.RAWTEXT)}function Qh(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,I.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===E.IN_TABLE||e.insertionMode===E.IN_CAPTION||e.insertionMode===E.IN_TABLE_BODY||e.insertionMode===E.IN_ROW||e.insertionMode===E.IN_CELL?E.IN_SELECT_IN_TABLE:E.IN_SELECT}function zh(e,t){e.openElements.currentTagId===u.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,I.HTML)}function Kh(e,t){e.openElements.hasInScope(u.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,I.HTML)}function Xh(e,t){e.openElements.hasInScope(u.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(u.RTC),e._insertElement(t,I.HTML)}function Jh(e,t){e._reconstructActiveFormattingElements(),ka(t),qs(t),t.selfClosing?e._appendElement(t,I.MATHML):e._insertElement(t,I.MATHML),t.ackSelfClosing=!0}function Zh(e,t){e._reconstructActiveFormattingElements(),wa(t),qs(t),t.selfClosing?e._appendElement(t,I.SVG):e._insertElement(t,I.SVG),t.ackSelfClosing=!0}function ou(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,I.HTML)}function X(e,t){switch(t.tagID){case u.I:case u.S:case u.B:case u.U:case u.EM:case u.TT:case u.BIG:case u.CODE:case u.FONT:case u.SMALL:case u.STRIKE:case u.STRONG:{Fh(e,t);break}case u.A:{Bh(e,t);break}case u.H1:case u.H2:case u.H3:case u.H4:case u.H5:case u.H6:{xh(e,t);break}case u.P:case u.DL:case u.OL:case u.UL:case u.DIV:case u.DIR:case u.NAV:case u.MAIN:case u.MENU:case u.ASIDE:case u.CENTER:case u.FIGURE:case u.FOOTER:case u.HEADER:case u.HGROUP:case u.DIALOG:case u.DETAILS:case u.ADDRESS:case u.ARTICLE:case u.SEARCH:case u.SECTION:case u.SUMMARY:case u.FIELDSET:case u.BLOCKQUOTE:case u.FIGCAPTION:{Lh(e,t);break}case u.LI:case u.DD:case u.DT:{Mh(e,t);break}case u.BR:case u.IMG:case u.WBR:case u.AREA:case u.EMBED:case u.KEYGEN:{Ha(e,t);break}case u.HR:{Wh(e,t);break}case u.RB:case u.RTC:{Kh(e,t);break}case u.RT:case u.RP:{Xh(e,t);break}case u.PRE:case u.LISTING:{yh(e,t);break}case u.XMP:{Gh(e,t);break}case u.SVG:{Zh(e,t);break}case u.HTML:{Oh(e,t);break}case u.BASE:case u.LINK:case u.META:case u.STYLE:case u.TITLE:case u.SCRIPT:case u.BGSOUND:case u.BASEFONT:case u.TEMPLATE:{ie(e,t);break}case u.BODY:{Rh(e,t);break}case u.FORM:{Ph(e,t);break}case u.NOBR:{Uh(e,t);break}case u.MATH:{Jh(e,t);break}case u.TABLE:{Hh(e,t);break}case u.INPUT:{qh(e,t);break}case u.PARAM:case u.TRACK:case u.SOURCE:{Yh(e,t);break}case u.IMAGE:{Vh(e,t);break}case u.BUTTON:{wh(e,t);break}case u.APPLET:case u.OBJECT:case u.MARQUEE:{vh(e,t);break}case u.IFRAME:{$h(e,t);break}case u.SELECT:{Qh(e,t);break}case u.OPTION:case u.OPTGROUP:{zh(e,t);break}case u.NOEMBED:case u.NOFRAMES:{iu(e,t);break}case u.FRAMESET:{Dh(e,t);break}case u.TEXTAREA:{jh(e,t);break}case u.NOSCRIPT:{e.options.scriptingEnabled?iu(e,t):ou(e,t);break}case u.PLAINTEXT:{kh(e,t);break}case u.COL:case u.TH:case u.TD:case u.TR:case u.HEAD:case u.FRAME:case u.TBODY:case u.TFOOT:case u.THEAD:case u.CAPTION:case u.COLGROUP:break;default:ou(e,t)}}function ef(e,t){if(e.openElements.hasInScope(u.BODY)&&(e.insertionMode=E.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function tf(e,t){e.openElements.hasInScope(u.BODY)&&(e.insertionMode=E.AFTER_BODY,Xa(e,t))}function nf(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function sf(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(u.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(u.FORM):n&&e.openElements.remove(n))}function rf(e){e.openElements.hasInButtonScope(u.P)||e._insertFakeElement(b.P,u.P),e._closePElement()}function uf(e){e.openElements.hasInListItemScope(u.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(u.LI),e.openElements.popUntilTagNamePopped(u.LI))}function af(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function of(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function cf(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function lf(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(b.BR,u.BR),e.openElements.pop(),e.framesetOk=!1}function Ya(e,t){const n=t.tagName,s=t.tagID;for(let r=e.openElements.stackTop;r>0;r--){const a=e.openElements.items[r],i=e.openElements.tagIDs[r];if(s===i&&(s!==u.UNKNOWN||e.treeAdapter.getTagName(a)===n)){e.openElements.generateImpliedEndTagsWithExclusion(s),e.openElements.stackTop>=r&&e.openElements.shortenToLength(r);break}if(e._isSpecialElement(a,i))break}}function Dn(e,t){switch(t.tagID){case u.A:case u.B:case u.I:case u.S:case u.U:case u.EM:case u.TT:case u.BIG:case u.CODE:case u.FONT:case u.NOBR:case u.SMALL:case u.STRIKE:case u.STRONG:{Ys(e,t);break}case u.P:{rf(e);break}case u.DL:case u.UL:case u.OL:case u.DIR:case u.DIV:case u.NAV:case u.PRE:case u.MAIN:case u.MENU:case u.ASIDE:case u.BUTTON:case u.CENTER:case u.FIGURE:case u.FOOTER:case u.HEADER:case u.HGROUP:case u.DIALOG:case u.ADDRESS:case u.ARTICLE:case u.DETAILS:case u.SEARCH:case u.SECTION:case u.SUMMARY:case u.LISTING:case u.FIELDSET:case u.BLOCKQUOTE:case u.FIGCAPTION:{nf(e,t);break}case u.LI:{uf(e);break}case u.DD:case u.DT:{af(e,t);break}case u.H1:case u.H2:case u.H3:case u.H4:case u.H5:case u.H6:{of(e);break}case u.BR:{lf(e);break}case u.BODY:{ef(e,t);break}case u.HTML:{tf(e,t);break}case u.FORM:{sf(e);break}case u.APPLET:case u.OBJECT:case u.MARQUEE:{cf(e,t);break}case u.TEMPLATE:{qe(e,t);break}default:Ya(e,t)}}function Wa(e,t){e.tmplInsertionModeStack.length>0?Ka(e,t):Ws(e,t)}function df(e,t){var n;t.tagID===u.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function hf(e,t){e._err(t,N.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Gn(e,t){if(e.openElements.currentTagId!==void 0&&Ba.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=E.IN_TABLE_TEXT,t.type){case B.CHARACTER:{ja(e,t);break}case B.WHITESPACE_CHARACTER:{Va(e,t);break}}else Bt(e,t)}function ff(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,I.HTML),e.insertionMode=E.IN_CAPTION}function Ef(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,I.HTML),e.insertionMode=E.IN_COLUMN_GROUP}function mf(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(b.COLGROUP,u.COLGROUP),e.insertionMode=E.IN_COLUMN_GROUP,Vs(e,t)}function Tf(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,I.HTML),e.insertionMode=E.IN_TABLE_BODY}function bf(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(b.TBODY,u.TBODY),e.insertionMode=E.IN_TABLE_BODY,Ln(e,t)}function pf(e,t){e.openElements.hasInTableScope(u.TABLE)&&(e.openElements.popUntilTagNamePopped(u.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function _f(e,t){qa(t)?e._appendElement(t,I.HTML):Bt(e,t),t.ackSelfClosing=!0}function gf(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,I.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function Je(e,t){switch(t.tagID){case u.TD:case u.TH:case u.TR:{bf(e,t);break}case u.STYLE:case u.SCRIPT:case u.TEMPLATE:{ie(e,t);break}case u.COL:{mf(e,t);break}case u.FORM:{gf(e,t);break}case u.TABLE:{pf(e,t);break}case u.TBODY:case u.TFOOT:case u.THEAD:{Tf(e,t);break}case u.INPUT:{_f(e,t);break}case u.CAPTION:{ff(e,t);break}case u.COLGROUP:{Ef(e,t);break}default:Bt(e,t)}}function Rt(e,t){switch(t.tagID){case u.TABLE:{e.openElements.hasInTableScope(u.TABLE)&&(e.openElements.popUntilTagNamePopped(u.TABLE),e._resetInsertionMode());break}case u.TEMPLATE:{qe(e,t);break}case u.BODY:case u.CAPTION:case u.COL:case u.COLGROUP:case u.HTML:case u.TBODY:case u.TD:case u.TFOOT:case u.TH:case u.THEAD:case u.TR:break;default:Bt(e,t)}}function Bt(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,Rn(e,t),e.fosterParentingEnabled=n}function Va(e,t){e.pendingCharacterTokens.push(t)}function ja(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function ft(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Bt(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const Ga=new Set([u.CAPTION,u.COL,u.COLGROUP,u.TBODY,u.TD,u.TFOOT,u.TH,u.THEAD,u.TR]);function Af(e,t){const n=t.tagID;Ga.has(n)?e.openElements.hasInTableScope(u.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(u.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=E.IN_TABLE,Je(e,t)):X(e,t)}function Nf(e,t){const n=t.tagID;switch(n){case u.CAPTION:case u.TABLE:{e.openElements.hasInTableScope(u.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(u.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=E.IN_TABLE,n===u.TABLE&&Rt(e,t));break}case u.BODY:case u.COL:case u.COLGROUP:case u.HTML:case u.TBODY:case u.TD:case u.TFOOT:case u.TH:case u.THEAD:case u.TR:break;default:Dn(e,t)}}function Vs(e,t){switch(t.tagID){case u.HTML:{X(e,t);break}case u.COL:{e._appendElement(t,I.HTML),t.ackSelfClosing=!0;break}case u.TEMPLATE:{ie(e,t);break}default:dn(e,t)}}function Sf(e,t){switch(t.tagID){case u.COLGROUP:{e.openElements.currentTagId===u.COLGROUP&&(e.openElements.pop(),e.insertionMode=E.IN_TABLE);break}case u.TEMPLATE:{qe(e,t);break}case u.COL:break;default:dn(e,t)}}function dn(e,t){e.openElements.currentTagId===u.COLGROUP&&(e.openElements.pop(),e.insertionMode=E.IN_TABLE,e._processToken(t))}function Ln(e,t){switch(t.tagID){case u.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,I.HTML),e.insertionMode=E.IN_ROW;break}case u.TH:case u.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(b.TR,u.TR),e.insertionMode=E.IN_ROW,xn(e,t);break}case u.CAPTION:case u.COL:case u.COLGROUP:case u.TBODY:case u.TFOOT:case u.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=E.IN_TABLE,Je(e,t));break}default:Je(e,t)}}function ds(e,t){const n=t.tagID;switch(t.tagID){case u.TBODY:case u.TFOOT:case u.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=E.IN_TABLE);break}case u.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=E.IN_TABLE,Rt(e,t));break}case u.BODY:case u.CAPTION:case u.COL:case u.COLGROUP:case u.HTML:case u.TD:case u.TH:case u.TR:break;default:Rt(e,t)}}function xn(e,t){switch(t.tagID){case u.TH:case u.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,I.HTML),e.insertionMode=E.IN_CELL,e.activeFormattingElements.insertMarker();break}case u.CAPTION:case u.COL:case u.COLGROUP:case u.TBODY:case u.TFOOT:case u.THEAD:case u.TR:{e.openElements.hasInTableScope(u.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=E.IN_TABLE_BODY,Ln(e,t));break}default:Je(e,t)}}function $a(e,t){switch(t.tagID){case u.TR:{e.openElements.hasInTableScope(u.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=E.IN_TABLE_BODY);break}case u.TABLE:{e.openElements.hasInTableScope(u.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=E.IN_TABLE_BODY,ds(e,t));break}case u.TBODY:case u.TFOOT:case u.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(u.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=E.IN_TABLE_BODY,ds(e,t));break}case u.BODY:case u.CAPTION:case u.COL:case u.COLGROUP:case u.HTML:case u.TD:case u.TH:break;default:Rt(e,t)}}function If(e,t){const n=t.tagID;Ga.has(n)?(e.openElements.hasInTableScope(u.TD)||e.openElements.hasInTableScope(u.TH))&&(e._closeTableCell(),xn(e,t)):X(e,t)}function Cf(e,t){const n=t.tagID;switch(n){case u.TD:case u.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=E.IN_ROW);break}case u.TABLE:case u.TBODY:case u.TFOOT:case u.THEAD:case u.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),$a(e,t));break}case u.BODY:case u.CAPTION:case u.COL:case u.COLGROUP:case u.HTML:break;default:Dn(e,t)}}function Qa(e,t){switch(t.tagID){case u.HTML:{X(e,t);break}case u.OPTION:{e.openElements.currentTagId===u.OPTION&&e.openElements.pop(),e._insertElement(t,I.HTML);break}case u.OPTGROUP:{e.openElements.currentTagId===u.OPTION&&e.openElements.pop(),e.openElements.currentTagId===u.OPTGROUP&&e.openElements.pop(),e._insertElement(t,I.HTML);break}case u.HR:{e.openElements.currentTagId===u.OPTION&&e.openElements.pop(),e.openElements.currentTagId===u.OPTGROUP&&e.openElements.pop(),e._appendElement(t,I.HTML),t.ackSelfClosing=!0;break}case u.INPUT:case u.KEYGEN:case u.TEXTAREA:case u.SELECT:{e.openElements.hasInSelectScope(u.SELECT)&&(e.openElements.popUntilTagNamePopped(u.SELECT),e._resetInsertionMode(),t.tagID!==u.SELECT&&e._processStartTag(t));break}case u.SCRIPT:case u.TEMPLATE:{ie(e,t);break}}}function za(e,t){switch(t.tagID){case u.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===u.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===u.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===u.OPTGROUP&&e.openElements.pop();break}case u.OPTION:{e.openElements.currentTagId===u.OPTION&&e.openElements.pop();break}case u.SELECT:{e.openElements.hasInSelectScope(u.SELECT)&&(e.openElements.popUntilTagNamePopped(u.SELECT),e._resetInsertionMode());break}case u.TEMPLATE:{qe(e,t);break}}}function Of(e,t){const n=t.tagID;n===u.CAPTION||n===u.TABLE||n===u.TBODY||n===u.TFOOT||n===u.THEAD||n===u.TR||n===u.TD||n===u.TH?(e.openElements.popUntilTagNamePopped(u.SELECT),e._resetInsertionMode(),e._processStartTag(t)):Qa(e,t)}function Rf(e,t){const n=t.tagID;n===u.CAPTION||n===u.TABLE||n===u.TBODY||n===u.TFOOT||n===u.THEAD||n===u.TR||n===u.TD||n===u.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(u.SELECT),e._resetInsertionMode(),e.onEndTag(t)):za(e,t)}function Df(e,t){switch(t.tagID){case u.BASE:case u.BASEFONT:case u.BGSOUND:case u.LINK:case u.META:case u.NOFRAMES:case u.SCRIPT:case u.STYLE:case u.TEMPLATE:case u.TITLE:{ie(e,t);break}case u.CAPTION:case u.COLGROUP:case u.TBODY:case u.TFOOT:case u.THEAD:{e.tmplInsertionModeStack[0]=E.IN_TABLE,e.insertionMode=E.IN_TABLE,Je(e,t);break}case u.COL:{e.tmplInsertionModeStack[0]=E.IN_COLUMN_GROUP,e.insertionMode=E.IN_COLUMN_GROUP,Vs(e,t);break}case u.TR:{e.tmplInsertionModeStack[0]=E.IN_TABLE_BODY,e.insertionMode=E.IN_TABLE_BODY,Ln(e,t);break}case u.TD:case u.TH:{e.tmplInsertionModeStack[0]=E.IN_ROW,e.insertionMode=E.IN_ROW,xn(e,t);break}default:e.tmplInsertionModeStack[0]=E.IN_BODY,e.insertionMode=E.IN_BODY,X(e,t)}}function Lf(e,t){t.tagID===u.TEMPLATE&&qe(e,t)}function Ka(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(u.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):Ws(e,t)}function xf(e,t){t.tagID===u.HTML?X(e,t):hn(e,t)}function Xa(e,t){var n;if(t.tagID===u.HTML){if(e.fragmentContext||(e.insertionMode=E.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===u.HTML){e._setEndLocation(e.openElements.items[0],t);const s=e.openElements.items[1];s&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(s))===null||n===void 0)&&n.endTag)&&e._setEndLocation(s,t)}}else hn(e,t)}function hn(e,t){e.insertionMode=E.IN_BODY,Rn(e,t)}function yf(e,t){switch(t.tagID){case u.HTML:{X(e,t);break}case u.FRAMESET:{e._insertElement(t,I.HTML);break}case u.FRAME:{e._appendElement(t,I.HTML),t.ackSelfClosing=!0;break}case u.NOFRAMES:{ie(e,t);break}}}function Pf(e,t){t.tagID===u.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==u.FRAMESET&&(e.insertionMode=E.AFTER_FRAMESET))}function Mf(e,t){switch(t.tagID){case u.HTML:{X(e,t);break}case u.NOFRAMES:{ie(e,t);break}}}function kf(e,t){t.tagID===u.HTML&&(e.insertionMode=E.AFTER_AFTER_FRAMESET)}function wf(e,t){t.tagID===u.HTML?X(e,t):Zt(e,t)}function Zt(e,t){e.insertionMode=E.IN_BODY,Rn(e,t)}function Bf(e,t){switch(t.tagID){case u.HTML:{X(e,t);break}case u.NOFRAMES:{ie(e,t);break}}}function Ff(e,t){t.chars=v,e._insertCharacters(t)}function Uf(e,t){e._insertCharacters(t),e.framesetOk=!1}function Ja(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==I.HTML&&e.openElements.currentTagId!==void 0&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function vf(e,t){if(Zd(t))Ja(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),s=e.treeAdapter.getNamespaceURI(n);s===I.MATHML?ka(t):s===I.SVG&&(eh(t),wa(t)),qs(t),t.selfClosing?e._appendElement(t,s):e._insertElement(t,s),t.ackSelfClosing=!0}}function Hf(e,t){if(t.tagID===u.P||t.tagID===u.BR){Ja(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const s=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(s)===I.HTML){e._endTagOutsideForeignContent(t);break}const r=e.treeAdapter.getTagName(s);if(r.toLowerCase()===t.tagName){t.tagName=r,e.openElements.shortenToLength(n);break}}}function Za(e,t){return function(s){let r,a=0,i="";for(;r=e.exec(s);)a!==r.index&&(i+=s.substring(a,r.index)),i+=t.get(r[0].charCodeAt(0)),a=r.index+1;return i+s.substring(a)}}const qf=Za(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),Yf=Za(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]])),Wf=new Set([b.AREA,b.BASE,b.BASEFONT,b.BGSOUND,b.BR,b.COL,b.EMBED,b.FRAME,b.HR,b.IMG,b.INPUT,b.KEYGEN,b.LINK,b.META,b.PARAM,b.SOURCE,b.TRACK,b.WBR]);function Vf(e,t){return t.treeAdapter.isElementNode(e)&&t.treeAdapter.getNamespaceURI(e)===I.HTML&&Wf.has(t.treeAdapter.getTagName(e))}const jf={treeAdapter:Ee,scriptingEnabled:!0};function Gf(e,t){const n={...jf,...t};return ei(e,n)}function $f(e,t){let n="";const s=t.treeAdapter.isElementNode(e)&&t.treeAdapter.getTagName(e)===b.TEMPLATE&&t.treeAdapter.getNamespaceURI(e)===I.HTML?t.treeAdapter.getTemplateContent(e):e,r=t.treeAdapter.getChildNodes(s);if(r)for(const a of r)n+=ei(a,t);return n}function ei(e,t){return t.treeAdapter.isElementNode(e)?Qf(e,t):t.treeAdapter.isTextNode(e)?Kf(e,t):t.treeAdapter.isCommentNode(e)?Xf(e,t):t.treeAdapter.isDocumentTypeNode(e)?Jf(e,t):""}function Qf(e,t){const n=t.treeAdapter.getTagName(e);return`<${n}${zf(e,t)}>${Vf(e,t)?"":`${$f(e,t)}</${n}>`}`}function zf(e,{treeAdapter:t}){let n="";for(const s of t.getAttrList(e)){if(n+=" ",s.namespace)switch(s.namespace){case I.XML:{n+=`xml:${s.name}`;break}case I.XMLNS:{s.name!=="xmlns"&&(n+="xmlns:"),n+=s.name;break}case I.XLINK:{n+=`xlink:${s.name}`;break}default:n+=`${s.prefix}:${s.name}`}else n+=s.name;n+=`="${qf(s.value)}"`}return n}function Kf(e,t){const{treeAdapter:n}=t,s=n.getTextNodeContent(e),r=n.getParentNode(e),a=r&&n.isElementNode(r)&&n.getTagName(r);return a&&n.getNamespaceURI(r)===I.HTML&&Rd(a,t.scriptingEnabled)?s:Yf(s)}function Xf(e,{treeAdapter:t}){return`<!--${t.getCommentNodeContent(e)}-->`}function Jf(e,{treeAdapter:t}){return`<!DOCTYPE ${t.getDocumentTypeNodeName(e)}>`}function Zf(e,t){return Fa.parse(e,t)}function eE(e,t,n){typeof e=="string"&&(n=t,t=e,e=null);const s=Fa.getFragmentParser(e,n);return s.tokenizer.write(t,!0),s.getFragment()}function cu(e){const t=e.includes('"')?"'":'"';return t+e+t}function tE(e,t,n){let s="!DOCTYPE ";return e&&(s+=e),t?s+=` PUBLIC ${cu(t)}`:n&&(s+=" SYSTEM"),n&&(s+=` ${cu(n)}`),s}const ge={isCommentNode:An,isElementNode:y,isTextNode:he,createDocument(){const e=new Ue([]);return e["x-mode"]=se.NO_QUIRKS,e},createDocumentFragment(){return new Ue([])},createElement(e,t,n){const s=Object.create(null),r=Object.create(null),a=Object.create(null);for(let o=0;o<n.length;o++){const l=n[o].name;s[l]=n[o].value,r[l]=n[o].namespace,a[l]=n[o].prefix}const i=new Rs(e,s,[]);return i.namespace=t,i["x-attribsNamespace"]=r,i["x-attribsPrefix"]=a,i},createCommentNode(e){return new Is(e)},createTextNode(e){return new Nt(e)},appendChild(e,t){const n=e.children[e.children.length-1];n&&(n.next=t,t.prev=n),e.children.push(t),t.parent=e},insertBefore(e,t,n){const s=e.children.indexOf(n),{prev:r}=n;r&&(r.next=t,t.prev=r),n.prev=t,t.next=n,e.children.splice(s,0,t),t.parent=e},setTemplateContent(e,t){ge.appendChild(e,t)},getTemplateContent(e){return e.children[0]},setDocumentType(e,t,n,s){const r=tE(t,n,s);let a=e.children.find(i=>es(i)&&i.name==="!doctype");a?a.data=r??null:(a=new Cs("!doctype",r),ge.appendChild(e,a)),a["x-name"]=t,a["x-publicId"]=n,a["x-systemId"]=s},setDocumentMode(e,t){e["x-mode"]=t},getDocumentMode(e){return e["x-mode"]},detachNode(e){if(e.parent){const t=e.parent.children.indexOf(e),{prev:n,next:s}=e;e.prev=null,e.next=null,n&&(n.next=s),s&&(s.prev=n),e.parent.children.splice(t,1),e.parent=null}},insertText(e,t){const n=e.children[e.children.length-1];n&&he(n)?n.data+=t:ge.appendChild(e,ge.createTextNode(t))},insertTextBefore(e,t,n){const s=e.children[e.children.indexOf(n)-1];s&&he(s)?s.data+=t:ge.insertBefore(e,ge.createTextNode(t),n)},adoptAttributes(e,t){for(let n=0;n<t.length;n++){const s=t[n].name;e.attribs[s]===void 0&&(e.attribs[s]=t[n].value,e["x-attribsNamespace"][s]=t[n].namespace,e["x-attribsPrefix"][s]=t[n].prefix)}},getFirstChild(e){return e.children[0]},getChildNodes(e){return e.children},getParentNode(e){return e.parent},getAttrList(e){return e.attributes},getTagName(e){return e.name},getNamespaceURI(e){return e.namespace},getTextNodeContent(e){return e.data},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){var t;return(t=e["x-name"])!==null&&t!==void 0?t:""},getDocumentTypeNodePublicId(e){var t;return(t=e["x-publicId"])!==null&&t!==void 0?t:""},getDocumentTypeNodeSystemId(e){var t;return(t=e["x-systemId"])!==null&&t!==void 0?t:""},isDocumentTypeNode(e){return es(e)&&e.name==="!doctype"},setNodeSourceCodeLocation(e,t){t&&(e.startIndex=t.startOffset,e.endIndex=t.endOffset),e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){t.endOffset!=null&&(e.endIndex=t.endOffset),e.sourceCodeLocation={...e.sourceCodeLocation,...t}}};function nE(e,t,n,s){var r;return(r=t.treeAdapter)!==null&&r!==void 0||(t.treeAdapter=ge),t.scriptingEnabled!==!1&&(t.scriptingEnabled=!0),n?Zf(e,t):eE(s,e,t)}const sE={treeAdapter:ge};function rE(e){const t="length"in e?e:[e];for(let s=0;s<t.length;s+=1){const r=t[s];Se(r)&&Array.prototype.splice.call(t,s,1,...r.children)}let n="";for(let s=0;s<t.length;s+=1){const r=t[s];n+=Gf(r,sE)}return n}const uE=Ul((e,t,n,s)=>t._useHtmlParser2?h0(e,t):nE(e,t,n,s)),aE=bd(uE,(e,t)=>t._useHtmlParser2?Nn(e,t):rE(e));async function iE(e){const t=e.tryoutPage||e.website;try{const s=(await Y.get(t,{timeout:1e4,headers:{"User-Agent":"Mozilla/5.0 (compatible; AAU-Tryouts-Checker/1.0; +https://github.com/nathannam/aau-basketball-tryouts)"}})).data,a=aE(s)("body").text().toLowerCase(),i=e.checkPatterns.filter(l=>a.includes(l.toLowerCase())),o=cE(a);return{organizationName:e.name,website:t,contentHash:o,foundPatterns:i,lastChecked:new Date().toISOString(),hasChanges:!1}}catch(n){return console.error(`Error scraping ${e.name}:`,n),{organizationName:e.name,website:t,contentHash:"",foundPatterns:[],lastChecked:new Date().toISOString(),hasChanges:!1,error:n instanceof Error?n.message:"Unknown error occurred"}}}async function oE(e){console.log(`[Scraper] Starting scrape of ${e.length} organizations...`);const n=(await Promise.allSettled(e.map(s=>iE(s)))).map((s,r)=>s.status==="fulfilled"?s.value:{organizationName:e[r].name,website:e[r].website,contentHash:"",foundPatterns:[],lastChecked:new Date().toISOString(),hasChanges:!1,error:s.reason?.message||"Failed to scrape website"});return console.log(`[Scraper] Completed scraping ${n.length} websites`),n}function cE(e){let t=0;for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);t=(t<<5)-t+s,t=t&t}return t.toString(36)}function lE(e,t){return e.map(n=>{const s=t.find(a=>a.organizationName===n.organizationName);if(!s)return{...n,hasChanges:!0};const r=s.contentHash!==n.contentHash;return{...n,hasChanges:r}})}const fn=Te.join(process.cwd(),".scraper-data"),hs=Te.join(fn,"latest-results.json"),lu=Te.join(fn,"history.json");async function dE(){try{await Te.mkdir(fn,{recursive:!0}),console.log(`[Storage] Initialized storage directory: ${fn}`)}catch(e){console.error("[Storage] Failed to initialize storage:",e)}}async function hE(e){try{await Te.writeFile(hs,JSON.stringify(e,null,2)),console.log(`[Storage] Saved ${e.length} results to ${hs}`)}catch(t){console.error("[Storage] Failed to save results:",t)}}async function fE(){try{const e=await Te.readFile(hs,"utf-8");return JSON.parse(e)}catch{return[]}}async function EE(e){try{const t=e.filter(a=>a.hasChanges).length,n={timestamp:new Date().toISOString(),results:e,changesDetected:t};let s=[];try{const a=await Te.readFile(lu,"utf-8");s=JSON.parse(a)}catch{}s.push(n);const r=new Date;r.setDate(r.getDate()-30),s=s.filter(a=>new Date(a.timestamp)>r),await Te.writeFile(lu,JSON.stringify(s,null,2)),console.log(`[Storage] Appended to history. Total entries: ${s.length}`)}catch(t){console.error("[Storage] Failed to append to history:",t)}}let $n=!1,Qn=null;async function du(){if($n)return console.log("[Scheduler] Job already running, skipping..."),{success:!1,message:"Job already running",changesCount:0};$n=!0,console.log(`[Scheduler] Starting scheduled scrape job at ${new Date().toISOString()}`);try{const e=await fE();console.log(`[Scheduler] Loaded ${e.length} previous results`);const t=await oE(Et.organizations),n=lE(t,e),s=n.filter(r=>r.hasChanges).length;return await hE(n),await EE(n),s>0?(console.log(`[Scheduler]  Detected ${s} changes:`),n.filter(r=>r.hasChanges).forEach(r=>{console.log(`  - ${r.organizationName}`),console.log(`    Website: ${r.website}`),console.log(`    Found patterns: ${r.foundPatterns.join(", ")}`)})):console.log("[Scheduler] No changes detected"),console.log("[Scheduler] Job completed successfully"),{success:!0,message:`Scraped ${t.length} websites. ${s} changes detected.`,changesCount:s}}catch(e){return console.error("[Scheduler] Job failed:",e),{success:!1,message:e instanceof Error?e.message:"Unknown error",changesCount:0}}finally{$n=!1}}async function mE(){if(Qn){console.log("[Scheduler] Scheduler already running");return}await dE(),Qn=Ti.schedule(Et.schedule,()=>{du()},{scheduled:!0,timezone:Et.timezone}),console.log(`[Scheduler]  Scheduler started with schedule: ${Et.schedule}`),console.log(`[Scheduler] Timezone: ${Et.timezone}`),console.log(`[Scheduler] Next run: ${Qn.nextDate().toISO()}`),console.log("[Scheduler] Running initial scrape..."),await du()}async function TE(){console.log("[Server] Initializing server components..."),await mE(),console.log("[Server] Server initialization complete")}typeof window>"u"&&TE().catch(e=>{console.error("[Server] Failed to initialize server:",e)});export{TE as initializeServer};
